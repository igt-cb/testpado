/* Minification failed. Returning unminified contents.
(26,4030-4031): run-time error JS1014: Invalid character: `
(26,4049-4050): run-time error JS1004: Expected ';': {
(26,4089-4090): run-time error JS1014: Invalid character: `
(26,4090-4091): run-time error JS1003: Expected ':': }
(33,42985-42986): run-time error JS1014: Invalid character: `
(33,43004-43005): run-time error JS1004: Expected ';': {
(33,43059-43060): run-time error JS1014: Invalid character: `
(33,43060-43061): run-time error JS1003: Expected ':': ;
 */
function GlobalEvents(n){for(var t in n)eval("GlobalEvents.on"+t+"=[function(s,e){"+n[t].join(";")+"}]")}GlobalEvents.addEventHandler=function(n,t){var i="on"+n;this[i]||(this[i]=[]);this[i].push(t)};GlobalEvents.trigger=function(n,t,i){var u=this["on"+n],r;if(u)for(r=0;r<u.length;r++)u[r](t,i)};
function _$(n){if(document.querySelector)return document.querySelector(n);throw"document.querySelector is not supported";}function _$$(n){if(document.querySelectorAll)return document.querySelectorAll(n);throw"document.querySelectorAll is not supported";}function appendEventHandler(n,t,i,r,u){function f(n){i(n||window.event)}var f=i;if(typeof n.addEventListener=="function"){if(u?n.addEventListener(t,f,{passive:!0,capture:!1}):n.addEventListener(t,f,!1),r)return function(){n.removeEventListener(t,f,!1)}}else if(n.attachEvent&&(n.attachEvent("on"+t,f),r))return function(){n.detachEvent("on"+t,f)}}function stopBubbling(n){return n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,!1}function appendTouchGestureHandler(n,t,i,r){function f(n){xDown=n.touches?n.touches[0].clientX:n.clientX;yDown=n.touches?n.touches[0].clientY:n.clientY;xUp=xDown;yUp=yDown;u=setInterval(o,15,i,r)}function e(n){xUp=n.touches?n.touches[0].clientX:n.clientX;yUp=n.touches?n.touches[0].clientY:n.clientY}function o(n,t){if(xDown&&yDown){t||(t=0);var i=xDown-xUp,r=yDown-yUp;Math.abs(i)>Math.abs(r)?Math.abs(i)>t&&(i>0?n({dir:"left"}):n({dir:"right"}),xDown=null,yDown=null):Math.abs(r)>t&&(r>0,xDown=null,yDown=null)}}function s(){u&&(clearInterval(u),u=null)}var u=null;switch(t){case"swipe":appendEventHandler(n,"touchstart",f,!1,!0);appendEventHandler(n,"touchmove",function(n){e(n)},!1,!0);appendEventHandler(document.documentElement,"touchend",s,!1,!0);break;default:throw"Unknown touch gesture type!";}}function getMouseBtn(n){return n.which==null?n.button<2?"left":n.button==4?"middle":"right":n.which<2?"left":n.which==2?"middle":"right"}function guid(){function n(n){var t=(Math.random().toString(16)+"000000000").substr(2,8);return n?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return n()+n(!0)+n(!0)+n()}function isIgnoreCaseEqual(n,t){return n==t||n!=null&&t!=null&&n.toLowerCase()==t.toLowerCase()}function isNullOrEmpty(n){return n==null||n&&n.length==0||typeof n=="undefined"}function escapeMarkup(n){if(n){for(var t=0;t<markupEscapeCharsMapping.length;t++)n=n.replace(new RegExp(RegExp.escape(markupEscapeCharsMapping[t][0]),"g"),markupEscapeCharsMapping[t][1]);return n}return n}function unescapeMarkup(n){if(n){for(var t=markupEscapeCharsMapping.length-1;t>=0;t--)n=n.replace(new RegExp(RegExp.escape(markupEscapeCharsMapping[t][1]),"g"),markupEscapeCharsMapping[t][0]);return n}return n}function getDirectoryName(n,t){return t||(t="\\"),n.substr(0,n.lastIndexOf(t))}function getFileName(n){n=n.replace(new RegExp("/","g"),"\\");var t=n.lastIndexOf("\\");return n.substr(t>-1?t+1:0)}function getFileExtension(n){var t=n.lastIndexOf(".");return n.substr(t>-1?t+1:0)}function endNotWithPathSeparator(n){return n.length>0&&arrayContains(["/","\\"],n[n.length-1])?n.slice(0,-1):n}function getCurUrlParams(){return function(n){var r,t,i;if(n=="")return{};for(r={},t=0;t<n.length;++t)(i=n[t].split("="),i.length==2)&&(r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")));return r}(window.location.search.substr(1).split("&"))}function toEllipsisString(n,t){return n?n.length<=t?n:n.substring(0,t-3)+"...":""}function toCamelCase(n){var i,r,t;for(n=n.replace(/[^a-zA-Z0-9]/g,"\t"),i=n.split("\t"),r="",t=0;t<i.length;t++)i[t]&&(r+=i[t][0].toUpperCase()+i[t].toLowerCase().substr(1,i[t].length-1));return r}function createCookie(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString());document.cookie=n+"="+t+u+"; path=/"}function readCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++)if(t=u[i].trim(),t.indexOf(r)==0)return t.substring(r.length,t.length);return null}function eraseCookie(n){createCookie(n,"",-1)}function arrayContains(n,t,i){for(var r=0;r<n.length;r++)if(i&&i(n[r],t)||n[r]==t)return!0;return!1}function arrayPushAll(n,t){for(var i=0;i<t.length;i++)n.push(t[i])}function isObjectEmpty(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function removeDynamicLinks(n,t,i){var u,r;for(i||(i=document),u=i.getElementsByTagName(n?"script":"link"),r=u.length-1;r>=0;r--)u[r].id&&u[r].id.indexOf(t)>-1&&u[r].parentNode.removeChild(u[r])}function addDynamicLinks(n,t,i,r,u){var o,e,f;for(r||(r=document),i||(i=""),o=r.getElementsByTagName("head")[0],e=0;e<n.length;e++)f=null,t?(f=document.createElement("script"),f.setAttribute("type","text/javascript"),f.setAttribute("src",n[e]),f.setAttribute("id",i+"js"+e)):(f=document.createElement("link"),f.setAttribute("rel","stylesheet"),f.setAttribute("type","text/css"),f.setAttribute("href",n[e]),f.setAttribute("id",i+"css"+e)),u&&appendEventHandler(f,"load",u),o.appendChild(f)}function getStyleByName(n,t){var r=[],u=t?t:document,i,f;for(n.indexOf(".")!=0&&(n="."+n),i=0;i<u.styleSheets.length;i++){u.styleSheets[i].cssRules?r=u.styleSheets[i].cssRules:u.styleSheets[i].rules&&(r=u.styleSheets[i].rules);for(f in r)if(r[f].selectorText&&r[f].selectorText.toLowerCase()==n.toLowerCase())return r[f]}return null}function getElementByCustomCriteria(n,t,i){for(var e,u,o,f=document.getElementsByTagName(n.toLowerCase()),r=0;r<i.length;r++)i[r]=new RegExp("^"+RegExp.escape(i[r]).replace(/\\\*/g,".*")+"$","i");for(r=0;r<f.length;r++){for(e=0,u=0;u<t.length;u++)if(o=f[r].getAttribute(t[u]),i[u].test(o))e++;else break;if(e==t.length)return f[r]}return null}function getElementByPartOfId(n,t){for(var r=document.getElementsByTagName(n.toLowerCase()),i=0;i<r.length;i++)if(r[i].id.indexOf(t)>-1)return r[i];return null}function getElementByClassName(n,t){for(var r=document.getElementsByTagName(n.toLowerCase()),i=0;i<r.length;i++)if(r[i].className==t)return r[i];return null}function getElementsByPartOfClassName(n,t,i){var r;n=n?n:"*";var e=i?i:document,u=e.getElementsByTagName(n.toLowerCase()),f=[];for(r=0;r<u.length;r++)u[r].classList.value.indexOf(t)>-1&&f.push(u[r]);return f}function getStyleValue(n,t){var i;if(n.currentStyle)i=n.currentStyle[t];else if(window.getComputedStyle)var r=n.ownerDocument,u=r.defaultView||r.parentWindow,i=u.getComputedStyle(n,null).getPropertyValue(t);return i}function getHtmlElement(n){var t=n;return typeof n=="string"&&(t=window[n],null==t&&(t=document.getElementById(n))),n.GetMainElement!=null&&(t=n.GetMainElement()),t}function getIsChildOf(n,t){while(n!=null&&!isIgnoreCaseEqual(n.tagName,"body")){if(n==t)return!0;n=n.parentNode}return!1}function runOnChildren(n,t){if(n.nodeType==Node.ELEMENT_NODE){t(n);for(var i=0;i<n.children.length;i++)runOnChildren(n.children[i],t)}}function getMatchingParent(n,t,i){while(n!=null&&!isIgnoreCaseEqual(n.tagName,"body")){var r=t(n);if(r)return i?r:n;n=n.parentNode}return null}function getMatchingParentByQuery(n,t){return n.nodeType===Node.ELEMENT_NODE?n.closest(t):n.parentElement?n.parentElement.closest(t):null}function getClientWidth(n){if(!n)return 0;var t=getHtmlElement(n),i=parseInt(getStyleValue(t,"padding-left")),r=parseInt(getStyleValue(t,"padding-right"));return t.offsetWidth-(isNaN(parseInt(i))?0:i)-(isNaN(parseInt(r))?0:r)-getBordersWidth(n)}function getClientHeight(n){var t,i,r;return n?(t=getHtmlElement(n),t==document.documentElement)?document.documentElement.clientHeight:(i=parseInt(getStyleValue(t,"padding-top")),r=parseInt(getStyleValue(t,"padding-bottom")),t.offsetHeight-(isNaN(parseInt(i))?0:i)-(isNaN(parseInt(r))?0:r)-getBordersHeight(n)):0}function getBordersWidthRect(n){if(!n)return{top:0,left:0,right:0,bottom:0};var e=getHtmlElement(n),o=e.ownerDocument,s=o.defaultView||o.parentWindow,t=s.getComputedStyle(n,null),i=parseInt(t.getPropertyValue("border-top-width")),r=parseInt(t.getPropertyValue("border-left-width")),u=parseInt(t.getPropertyValue("border-right-width")),f=parseInt(t.getPropertyValue("border-bottom-width"));return isIgnoreCaseEqual(getStyleValue(e,"border-collapse"),"collapse")&&(i=isNaN(i)?0:i/2,r=isNaN(r)?0:r/2,u=isNaN(u)?0:u/2,f=isNaN(f)?0:f/2),{top:i,left:r,right:u,bottom:f}}function getBordersWidth(n){var t=getBordersWidthRect(n);return t.left+t.right}function getBordersHeight(n){var t=getBordersWidthRect(n);return t.top+t.bottom}function getPaddingsHeight(n){if(!n)return 0;var t=getHtmlElement(n),i=parseInt(getStyleValue(t,"padding-top")),r=parseInt(getStyleValue(t,"padding-bottom"));return(isNaN(parseInt(i))?0:i)+(isNaN(parseInt(r))?0:r)}function getPaddingsWidth(n){if(!n)return 0;var t=getHtmlElement(n),i=parseInt(getStyleValue(t,"padding-left")),r=parseInt(getStyleValue(t,"padding-right"));return(isNaN(parseInt(i))?0:i)+(isNaN(parseInt(r))?0:r)}function getMarginsHeight(n){if(!n)return 0;var t=getHtmlElement(n),i=parseInt(getStyleValue(t,"margin-top")),r=parseInt(getStyleValue(t,"margin-bottom"));return(isNaN(parseInt(i))?0:i)+(isNaN(parseInt(r))?0:r)}function getMarginsWidth(n){if(!n)return 0;var t=getHtmlElement(n),i=parseInt(getStyleValue(t,"margin-left")),r=parseInt(getStyleValue(t,"margin-right"));return isNaN(parseInt(i))?0:i+(isNaN(parseInt(r))?0:r)}function getMarginLeftWidth(n){if(!n)return 0;var i=getHtmlElement(n),t=parseInt(getStyleValue(i,"margin-left"));return isNaN(parseInt(t))?0:t}function getAdjustedElementHeight(n,t,i){return getClientHeight(n)-(t?t.offsetHeight:0)-(i&&!isNaN(parseInt(i))?i:0)}function getOffset(n){for(var t=0,i=0;n&&!isNaN(parseInt(n.offsetLeft))&&!isNaN(parseInt(n.offsetTop));)t+=n.offsetLeft-n.scrollLeft,i+=n.offsetTop-n.scrollTop,n=n.offsetParent;return{top:i,left:t}}function getElementAbsPos(n){for(var t=0,i=0;n&&!isNaN(parseInt(n.offsetLeft))&&!isNaN(parseInt(n.offsetTop));)t+=n.offsetLeft-n.scrollLeft,i+=n.offsetTop-n.scrollTop,n=n.offsetParent;return[t,i]}function getIsAbsPos(n){var t=getStyleValue(n,"position");return t&&(t=t.toLowerCase()),t=="relative"||t=="absolute"||t=="fixed"||t=="sticky"?t:!1}function getIsOverflowVisibleX(n){var t=getStyleValue(n,"overflow"),i=getStyleValue(n,"overflow-x");return isIgnoreCaseEqual(t,"visible")||isIgnoreCaseEqual(i,"visible")}function getIsOverflowVisibleY(n){var t=getStyleValue(n,"overflow"),i=getStyleValue(n,"overflow-y");return isIgnoreCaseEqual(t,"visible")||isIgnoreCaseEqual(i,"visible")}function getNearestAbsParent(n){return getIsAbsPos(n.parentNode)||n.parentNode.nodeName.toLowerCase()=="body"?n.parentNode:getNearestAbsParent(n.parentNode)}function getElBoundingClientRect(n){var i=n.getBoundingClientRect(),t;return n.endContainer&&isIgnoreCaseEqual(JSON.stringify(new DOMRect),JSON.stringify(i))&&(t=document.createElement("span"),t.style.visibility="hidden",t.innerHTML="|",n.insertNode(t),i=t.getBoundingClientRect(),t.parentNode.removeChild(t)),i}function getElementPos(n,t,i){var r=0,u=0,i=t?document.documentElement:i?i:getNearestAbsParent(n),f=n.ownerDocument||n.startContainer.ownerDocument,c=i.ownerDocument||i.startContainer.ownerDocument,e,o,s,h;if(f!=c){if(e=f.defaultView||f.parentWindow,!e.frameElement)throw"Cannot calculate position: 'e' and 'pivotParent' are from different documents, but e's document is not a document of an iframe. This is not supported.";o=getElBoundingClientRect(n);n=e.frameElement;r=o.left;u=o.top}return s=getElBoundingClientRect(n),r+=s.left+window.pageXOffset,u+=s.top+window.pageYOffset,!t&&i&&(h=getElBoundingClientRect(i),r-=h.left+window.pageXOffset,u-=h.top+window.pageYOffset),[r,u]}function getScrollTop(n){return n||(n=window),n.pageYOffset?n.pageYOffset:n.scrollTop?n.scrollTop:0}function setScrollTop(n,t){t||(t=document);n=Math.max(0,n);t.body.scrollTop=n;t.documentElement.scrollTop=n}function getScrollHeight(n){return n||(n=document),Math.max(n.body.scrollHeight,n.body.offsetHeight,n.documentElement.clientHeight,n.documentElement.scrollHeight,n.documentElement.offsetHeight)}function getFirstScrollableParent(n){return n.scrollHeight>n.offsetHeight?n:n.parentNode==document.documentElement?document.body:getFirstScrollableParent(n.parentNode)}function getIsElementHiddenByParentOverflow(n){var t=getComputedStyle(n);return t.position==="fixed"?!1:!getIsElementsIntersect(n,getFirstScrollableParent(n))}function getWindowClientAreaWidth(n){return n||(n=window),isIos?n.screen.width:n.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function getWindowClientAreaHeight(n){return n||(n=window),isIos?n.screen.height:n.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function highlightEl(n,t){function r(){function i(n){n.style.animation="none";n.style.webkitAnimation="none";n.style.display="none"}var n=_$("#"+t.hliterId);n&&(t.effectTimeout?setTimeout(function(){i(n)},t.effectTimeout):i(n))}function u(){var u=getElementPos(n,t.isRelativeToBody);i.style.left=u[0]+"px";i.style.top=u[1]+"px";i.style.width=n.offsetWidth+"px";i.style.height=n.offsetHeight+"px";i.style.animation="";i.style.webkitAnimation="";t.effectTimeout&&setTimeout(function(){r()},t.effectTimeout)}typeof t.isRelativeToBody=="undefined"&&(t.isRelativeToBody=!0);var i=_$("#"+t.hliterId);return i||(i=document.createElement("div"),i.id=t.hliterId,i.className=t.hliterCssClass,t.hliterParentId?_$("#"+t.hliterParentId).appendChild(i):document.body.appendChild(i)),i.style.display="block",t.effectTimeout?setTimeout(function(){u()},0):u(),r}function textareaNoWrapAutoSize(n,t){var i=n.value.split(/\r|\n|\r\n|\n\r/);n.rows=t?Math.min(t,i.length):i.length}function getIsElementsIntersect(n,t){var i=getElementPos(n,!0),r=getElementPos(t,!0),u={top:i[1],right:i[0]+n.offsetWidth,bottom:i[1]+n.offsetHeight,left:i[0]},f={top:r[1],right:r[0]+t.offsetWidth,bottom:r[1]+t.offsetHeight,left:r[0]};return u.left<=f.right&&f.left<=u.right&&u.top<=f.bottom&&f.top<=u.bottom}function getIsElementInViewport(n,t){t||(t=window);var i=getElBoundingClientRect(n);return i.top>=0&&i.left>=0&&i.bottom<=getWindowClientAreaHeight()&&i.right<=getWindowClientAreaWidth()}function autosizeImgsAndVideos(){function n(n){for(var i,r,o,f,t=0;t<n.length;t++){if(i=getMatchingParent(n[t],function(n){return isIgnoreCaseEqual(n.tagName,"td")||isIgnoreCaseEqual(n.tagName,"th")}),isIgnoreCaseEqual(n[t].getAttribute("data-ch-no-autosize"),"true")){i&&n[t].style.width=="100%"&&n[t].style.removeProperty("width");continue}if((n[t].getAttribute("data-originalWidth")||n[t].getAttribute("data-originalWidth")=="")&&(n[t].style.width=n[t].getAttribute("data-originalWidth"),n[t].style.maxWidth=n[t].getAttribute("data-originalMaxWidth"),n[t].removeAttribute("data-originalWidth"),n[t].removeAttribute("data-originalMaxWidth")),(n[t].getAttribute("data-originalHeight")||n[t].getAttribute("data-originalHeight")=="")&&(n[t].style.height=n[t].getAttribute("data-originalHeight"),n[t].removeAttribute("data-originalHeight")),r=getElementPos(n[t],!0),r[0]-=getMarginLeftWidth(document.body),o=n[t].clientHeight/n[t].clientWidth,f=getWindowClientAreaWidth()-getMarginsWidth(document.body),r[0]+n[t].offsetWidth>f){n[t].setAttribute("data-originalWidth",n[t].style.width||(n[t].getAttribute("width")?n[t].getAttribute("width")+"px":""));n[t].setAttribute("data-originalMaxWidth",n[t].style.maxWidth);n[t].style.width="100%";var e=n[t].offsetWidth+getMarginsWidth(n[t])-getClientWidth(n[t]),u=50,s=Math.max(u,Math.min(document.documentElement.clientWidth-r[0]-e,n[t].offsetWidth-e));n[t].style.maxWidth=s+"px";i&&(i.style.minWidth=i.style.width?Math.min(parseInt(i.style.width),u)+"px":u+"px");n[t].setAttribute("data-originalHeight",n[t].style.height||(n[t].getAttribute("height")?n[t].getAttribute("height")+"px":""));n[t].style.height="auto"}}}n(document.getElementsByTagName("img"));n(document.getElementsByTagName("iframe"));n(document.getElementsByTagName("embed"));n(document.getElementsByTagName("object"));n(document.getElementsByTagName("video"))}function addHorizontalScrollForTables(n){function t(t){for(var u,f,r,i=0;i<t.length;i++)t[i].className.includes(n)&&(u=getWindowClientAreaWidth(),f=getElementPos(t[i],!0),!t[i].parentNode.getAttribute("data-ch-table-scroll-wrapper")&&f[0]+t[i].scrollWidth>=u?(r=document.createElement("div"),r.style.overflowX="auto",r.setAttribute("data-ch-table-scroll-wrapper","true"),t[i].parentNode.insertBefore(r,t[i]),r.appendChild(t[i])):f[0]+t[i].scrollWidth<u&&(r=t[i].parentNode,r.getAttribute("data-ch-table-scroll-wrapper")&&(r.parentNode.insertBefore(t[i],r),r.remove())))}t(document.getElementsByTagName("table"))}function sendRequest(n,t,i,r,u,f){function s(n,t){var i=new XMLHttpRequest;return"withCredentials"in i?i.open(n,t,!0):typeof XDomainRequest!="undefined"?(i=new XDomainRequest,i.open(n,t)):i=null,i}var o,e;if(window.GlobalEvents&&(o={requestUrl:t},GlobalEvents.trigger("BeforeSendRequest",this,o),t=o.requestUrl),typeof r=="undefined"&&(r=!0),e=null,f){if(e=s(n,t),!e)throw new Error("CORS requests are not supported by your web browser.");}else e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return u&&(e.onreadystatechange=function(){this.readyState==4&&u(this)}),e.open(n,t,r),i&&(typeof i=="object"||typeof i==typeof[])&&(e.setRequestHeader("Content-type","application/json"),i=JSON.stringify(i)),e.send(i),e}function mergeOptions(n,t){function i(n,t,r){var f={};for(var u in n)n.hasOwnProperty(u)&&(f[u]=t&&(Array.isArray(n[u])||Array.isArray(t[u]))&&t[u]!=null?t[u]:t&&("object"==typeof n[u]&&n[u]!=null||"object"==typeof t[u]&&t[u]!=null)?i(n[u],t[u],u=="cssClasses"):r?n[u]+(t&&t.hasOwnProperty(u)&&t[u]?" "+t[u]:""):(t&&t.hasOwnProperty(u)&&t[u]!=null?t:n)[u]);return f}return i(n,t,!1)}function copyToClipboard(n,t){var f,i,u,r;if(isIe){f="_hiddenCopyText_";i=document.getElementById(f);i||(i=document.createElement("textarea"),i.style.position="absolute",i.style.left="-9999px",i.style.top="0",i.id=f,i.setAttribute("aria-label","hiddenCopyText"),document.body.appendChild(i));i.textContent=n;u=document.activeElement;i.focus();i.select?i.select():i.setSelectionRange(0,i.value.length);try{r=document.execCommand("copy")}catch(e){r=!1}return t&&u&&typeof u.focus=="function"&&u.focus(),i.textContent="",r}try{r=window.navigator.clipboard.writeText(n)}catch(e){r=!1}return r}function lazyLoadFontAwesome(){function n(){CssHandler.removeElClass(document.documentElement,"__ch_fa_loading");createCookie("fa-cached","1")}function t(){function t(n){var t=350,i=function(){var u,r,f;t-=1;u=document.createElement("canvas");u.width=20;u.height=20;r=u.getContext("2d");r.fillStyle="rgba(255,255,255,1.0)";r.fillRect(0,0,20,20);r.font='300 16pt "Font Awesome 5 Pro"';r.textAlign="center";r.fillStyle="rgba(0,0,0,1.0)";r.fillText("ï‘œ",10,18);f=r.getImageData(0,0,1,1).data;f[0]!==0&&f[1]!==0&&f[2]!==0?t>0?setTimeout(i,20):n(!1):typeof n=="function"&&n(!0)};i()}addDynamicLinks(["/Styles/CommonControls/FontAwesome/css/all.min-ignore.css"],!1,null,null,function(){if(window.FontFace){var i=new FontFace("'Font Awesome 5 Pro'","url(/Styles/CommonControls/FontAwesome/webfonts/fa-light-300.eot?#iefix) format('embedded-opentype'), url(/Styles/CommonControls/FontAwesome/webfonts/fa-light-300.woff2) format('woff2'), url(/Styles/CommonControls/FontAwesome/webfonts/fa-light-300.woff) format('woff'), url(/Styles/CommonControls/FontAwesome/webfonts/fa-light-300.ttf) format('truetype'), url(/Styles/CommonControls/FontAwesome/webfonts/fa-light-300.svg#fontawesome) format('svg')",{style:"normal",weight:300});i.load().then(n)["catch"](function(){console.warn("Font Awesome Light font file hasn't been loaded.")})}else t(function(){n()})})}CssHandler.addElClass(document.documentElement,"__ch_fa_loading");readCookie("fa-cached")=="1"?t():appendEventHandler(window,"load",function(){t()})}function setAriaRoleToDxErrorImg(n){var t=n.GetErrorImage();t&&t.setAttribute("role","alert")}function parseHtml(n){var t=document.createElement("div");return t.innerHTML=n,t}function selectAllInElement(n){window.getSelection().selectAllChildren(n)}function insertHtmlAtCaret(n){var t,i,r,u;if(isIe){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){for(i=parseHtml(n),r=t.getRangeAt(0),r.deleteContents(),u=0;u<i.length;u++)r.insertNode(i);t.collapseToEnd()}}else document.execCommand("insertHTML",!1,n)}var markupEscapeCharsMapping;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});String.prototype.includes||(String.prototype.includes=function(n,t){return typeof t!="number"&&(t=0),t+n.length>this.length?!1:this.indexOf(n,t)!==-1});Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"});window.getComputedStyle||(window.getComputedStyle=function(n){return this.el=n,this.getPropertyValue=function(t){var i=/(\-([a-z]){1})/g;return t=="float"&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()})),n.currentStyle[t]?n.currentStyle[t]:null},this});document.querySelectorAll||(document.querySelectorAll=function(n){var r=document.documentElement.firstChild,t=document.createElement("STYLE"),i,u;r.appendChild(t);document.__qsResult=[];t.styleSheet.cssText=n+"{x:expression(document.__qsResult.push(this))}";window.scrollBy(0,0);r.removeChild(t);i=[];for(u in document.__qsResult)i.push(document.__qsResult[u]);return i});document.querySelector||(document.querySelector=function(n){var i=document.documentElement.firstChild,t=document.createElement("STYLE");return i.appendChild(t),document.__qsResult=[],t.styleSheet.cssText=n+"{x:expression(document.__qsResult.push(this))}",window.scrollBy(0,0),i.removeChild(t),document.__qsResult[0]||null}),function(){var n=function(n){var t=this;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null};window.Element?(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=n)):(Object.prototype.matches||(Object.prototype.matches=Object.prototype.msMatchesSelector||Object.prototype.webkitMatchesSelector),Object.prototype.closest||(Object.prototype.closest=n))}();var xDown=null,yDown=null,xUp=null,yUp=null;var isIe=navigator.appVersion.toLowerCase().indexOf("msie")>-1||Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject,isEdge=/Edge/.test(navigator.userAgent),isIos=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream,isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&navigator.userAgent.indexOf("CriOS")==-1&&navigator.userAgent.indexOf("FxiOS")==-1;RegExp.escape=function(n){return n.replace(/[[\]{}()*+?\.,\\^$|#]/g,"\\$&")};String.prototype.charCount=function(n){var t=this.match(new RegExp(RegExp.escape(n),"g"));return t==null?0:t.length};markupEscapeCharsMapping=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"]],function(){function n(){}window.PlainTextRetriever||(n.prototype.getPlainTextFromHtml=function(n,t){return n?(t&&(n=n.replace(/<br\s*\/?>/gi,"\r\n")),n.replace(/<[^>]*>/g,"")):n},window.PlainTextRetriever=new n)}(),function(){function n(){}window.CssHandler||(n.prototype.extraClassMask="(\\s+|^){0}(\\s+|$)",n.prototype.addElClass=function(n,t){n.setAttribute("class",this.addClass(n.getAttribute("class"),t))},n.prototype.getIsHasClass=function(n,t){return new RegExp(this.extraClassMask.replace("{0}",RegExp.escape(t)),"i").test(n)},n.prototype.getIsElHasClass=function(n,t){return this.getIsHasClass(n.getAttribute("class"),t)},n.prototype.switchElClass=function(n,t,i){typeof i=="undefined"&&(i=!this.getIsHasClass(n.getAttribute("class"),t));n.setAttribute("class",this.switchClass(n.getAttribute("class"),t,i))},n.prototype.switchClass=function(n,t,i){return typeof i=="undefined"&&(i=!this.getIsHasClass(n,t)),i?this.addClass(n,t):this.removeClass(n,t)},n.prototype.addClass=function(n,t){return n||(n=""),this.getIsHasClass(n,t)||(n+=(n?" ":"")+t),n},n.prototype.removeClass=function(n,t,i){return n||(n=""),n.replace(new RegExp(this.extraClassMask.replace("{0}",i?t:RegExp.escape(t)),"gi")," ").replace(" {2,}"," ").trim()},n.prototype.removeElClass=function(n,t){n.setAttribute("class",this.removeClass(n.getAttribute("class"),t));!n.getAttribute("class")&&n.removeAttribute&&n.removeAttribute("class")},window.CssHandler=new n)}();
function setIsPropertiesMode(n,t,i,r){window.propEditor&&(articleEditor.setVisible(!n),propEditor.setVisible(n,t,i),r&&(articleEditor.setIsEditing(!1),articleEditor.refreshFrameUrl()))}function onReviewNotesRequested(){setIsPropertiesMode(!0,"review-notes")}function onVersionHistoryRequested(){setIsPropertiesMode(!0,"version-history")}function onLinkViewerRequested(){setIsPropertiesMode(!0,"link-viewer")}function onAllMetricsPageRequested(){setIsPropertiesMode(!0,"metrics")}function onArticleEditorCreateSnippetRequested(n,t){articleSelector.createArticle(t.html,!0)}function onArticleCreatedInSelector(n,t){articleEditor.onArticleCreated(n,t)}function onBtnPropertiesClick(n,t){articleEditor.getVisible()&&setIsPropertiesMode(!0,t.pageName,t.isFocusTopicTitle)}function onPropertiesBackToTopic(n,t){setIsPropertiesMode(!1,null,null,t.isSwitchToView)}function onPropertiesTocRefreshNeeded(){articleSelector.refreshToc()}function onPropertiesDataSaved(n,t){if(window.articleEditor)articleEditor.onSavingComplete(n,t)}function onArticlesSplitterResized(){setTimeout(function(){window.articleSelector&&articleSelector.adjustControl();window.articleEditor&&articleEditor.getVisible()?articleEditor.adjustControl():window.propEditor&&propEditor.adjustControl();window.articleSelector&&!getCurrentUserInfo().isInternalUser&&getPortalUiProps().isStickyNavPanel&&articleSelector.adjustControl()},0)}function onShowReviewCommentsInSelector(n,t){isIgnoreCaseEqual(t.node.vals.e,hashHandler.getHashObj().externalId)?(articleEditor.getIsEditingState()&&(t.isStopBubbling=!0),articleEditor.showReviewCommentsWindow()):this.isShowReviewCommentsAfterLoad=!0}function onShowToDoItemsInSelector(){articleEditor.showToDoItems()}function onShowImportProjectWizardInSelector(n,t){importProjectWizard.showDialog(t.inputProjectId)}function onShowPropertiesInSelector(n,t){articleEditor.getVisible()&&setIsPropertiesMode(!0);window.propEditor&&propEditor.loadTocNodeProps(t.tocNodeId,t.tocNodeProjectId)}function onTocNodeFocusedInSelector(n,t){window.propEditor&&propEditor.loadTocNodeProps(t.tocNodeId,t.tocNodeProjectId)}function onArticleClickedInSelector(n,t){if(baseMasterOffCanvasPanel.hide(),t.externalId){var i=hashHandler.getHashObj();i.externalId=t.externalId;hashHandler.setHashObj(i)}}function onSelectedArticleChangedInSelector(n,t){var i=t.externalId?t.externalId:null;i&&(isHashChangedFromToc=t.changedFromTabName=="tabContents",articleEditor.saveArticleChangedEventArg(t),hashHandler.setHashObj({externalId:i,projectId:articleSelector.getProjectExtId(),isEditing:hashHandler.getHashObj().isEditing}),t.isForceArticleRefresh&&articleEditor.refresh())}function onImportProjectWizardClosed(){articleSelector.executeTocCommand("menuItemRefresh")}function onTocCommandRequested(n,t){articleSelector.executeTocCommand(t.commandId,t.param)}function onArticleEditorCommandRequested(n,t){articleEditor.executeCommand(t.commandId,t.param)}function onHashChanged(){}function onArticlePropertyChangedInEditor(n,t){var r,f,i,u,e;if(GlobalEvents.trigger("ArticlePropertyChanged",n,t),getCurrentUserInfo().isInternalUser){if(t.articleObj){if(t.articleObj.isInPublication)for(r=[],f=t.articleObj.articleUrlInPubNotPreviewMask,i=0;i<t.articleObj.versionsFromOtherPubs.length;i++)u=t.articleObj.versionsFromOtherPubs[i].Value.split(","),r.push({Text:t.articleObj.versionsFromOtherPubs[i].Text,Value:f.replace("{0}",u[1]).replace("{1}",u[0])});e={projectId:t.articleObj.isInPublication?t.articleObj.propsForInternalUsers.parentProjectId:t.articleObj.propsForInternalUsers.projectId,projectExtId:t.articleObj.projectExternalId,projectName:t.articleObj.projectName,pubItems:r}}window[baseMasterPageParams.breadcrumbNavName].initElements(e)}}function onSelectedArticleChangedInEditor(n,t){if(getCurrentUserInfo().isInternalUser||!(getIsPortalUiProjectExtIdSynchronizing()||getIsInFullPageCallback())){var i=hashHandler.getHashObj();articleSelector.selectArticleByExtId(i.projectId,i.externalId);isHashChangedFromToc?isHashChangedFromToc=!1:window.propEditor&&propEditor.loadArticleProps(t.internalId);CssHandler.switchElClass(document.body,"Articles_404MasterPageBody",!t.internalId);this.isShowReviewCommentsAfterLoad&&(this.isShowReviewCommentsAfterLoad=!1,articleEditor.showReviewCommentsWindow())}}function onArticleSelectorLoad(){setTimeout(function(){articleEditor.loadHtmlEditorIfNeeded()},0)}function onArticleEditorResized(){!getCurrentUserInfo().isInternalUser&&getPortalUiProps().isStickyNavPanel&&articleSelector.adjustControl()}function onNavPanelExpandCollapseSeparatorClick(){var n=_$("#pnlBaseMasterContainer"),t=!CssHandler.getIsElHasClass(n,"Articles_navHidden");CssHandler.switchElClass(n,"Articles_navHidden",t);createCookie("articles_isNavPanelCollapsed",t?"1":"0");setTimeout(onArticlesSplitterResized,350)}function setIsAllowArticlesNavCollapse(n){var i=readCookie("articles_isNavPanelCollapsed")==="1",t=_$("#pnlBaseMasterContainer");CssHandler.switchElClass(t,"Articles_isAllowNavCollapse",n);CssHandler.switchElClass(t,"Articles_navHidden",n&&i)}var isHashChangedFromToc=!1;(function(){appendEventHandler(window,"resize",function(){onArticlesSplitterResized()});appendEventHandler(window,"load",function(){var n=_$("#pnlArticlesContent");appendEventHandler(n,"transitionend",function(t){(t.srcElement||t.target)===n&&onArticlesSplitterResized()});onArticlesSplitterResized()})})();
window.EventTypes={intro:{started:"Intro_Started",stepChanged:"Intro_StepChanged",completed:"Intro_Completed",closed:"Intro_Closed"},startTrialQuiz:{opened:"StartTrialQuiz_Opened",closed:"StartTrialQuiz_Closed",questionChanged:"StartTrialQuiz_QuestionChanged",submitted:"StartTrialQuiz_Submitted"},importExport:{importFromSelected:"ImportExport_ImportFromSelected",importFromConfirmed:"ImportExport_ImportFromConfirmed",requestFormatClicked:"ImportExport_RequestFormatClicked",requestFormatSent:"ImportExport_RequestFormatSent"},htmlEditor:{ribbonItemClick:"HtmlEditor_RibbonItemClick"},articleEditor:{headerMenuItemClick:"ArticleEditor_HeaderMenuItemClick"},projectsPage:{newProjectsPageExperienceTypeformSubmitted:"ProjectsPage_NewProjectsPageExperienceTypeformSubmitted",newProjectsPageExperienceTypeformShown:"ProjectsPage_NewProjectsPageExperienceTypeformShown",newProjectsPageExperienceTypeformClosed:"ProjectsPage_NewProjectsPageExperienceTypeformClosed",newProjectsPageExperienceTypeformStepChanged:"ProjectsPage_NewProjectsPageExperienceTypeformStepChanged"},baseMaster:{askguruBetaInviteTypeformSubmitted:"BaseMaster_AskguruBetaInviteTypeformSubmitted",askguruBetaInviteTypeformShown:"BaseMaster_AskguruBetaInviteTypeformShown",askguruBetaInviteTypeformClosed:"BaseMaster_AskguruBetaInviteTypeformClosed",askguruBetaInviteTypeformStepChanged:"BaseMaster_AskguruBetaInviteTypeformStepChanged"},quickSetupWizard:{started:"QuickSetupWizard_Started"}};
(function(){function n(){}window.StatsWriter||(n.prototype.registerEvent=function(n,t){sendRequest("POST","/stats/events/",{eventType:n,timestampStr:(new Date).toISOString(),propsStr:typeof t!="undefined"?JSON.stringify(t):null})},window.StatsWriter=new n)})();
function updateHtmlLangAtt(n){n&&(document.documentElement.lang=n)}function initMasterPageBase(){function t(){masterPagesBaseParams.ch_ver&&sendRequest("GET","/check/?v="+masterPagesBaseParams.ch_ver,null,!0,function(i){var u=i.responseText,r=u&&u!=""?u.split("\t"):null;r&&r.length>1?(alert(r[1]),r.length>2?(window.ch_timeout=r[0],window.ch_timeoutMsg=r[2],showNotification(r[2].replace("{0}",r[0]),!0,!0)):(window.onbeforeunload=null,setTimeout(function(){window.onbeforeunload=null;location.reload(!0)},parseInt(r[0])*1e3))):setTimeout(function(){t()},n)})}var n=6e4;setTimeout(function(){t()},n);appendEventHandler(window,"load",function(){window.ASPx&&(ASPx.ThemesWithRipple.push("DefaultTheme"),ASPx.RippleHelper.ReInit())})}function hideNotification(){var n=document.getElementById("MasterPagesBase_pnlNotice");CssHandler.removeElClass(n,"slideDown");CssHandler.addElClass(n,"slideDownHiding");setTimeout(function(){n.style.display="none";CssHandler.removeElClass(n,"slideDownHiding")},300)}function showNotification(n,t,i,r,u,f){var e=document.getElementById("MasterPagesBase_pnlNotice"),o,s;e?e.style.display="block":(e=document.createElement("div"),e.setAttribute("role","alert"),e.id="MasterPagesBase_pnlNotice",document.documentElement.appendChild(e));e.className="MasterPagesBase_notification slideDown "+(t?"MasterPagesBase_notificationWarning":"MasterPagesBase_notificationMessage");f||(f="top");switch(f.toLowerCase()){case"top":e.className+=" MasterPagesBase_notificationTop";break;case"bottom":e.className+=" MasterPagesBase_notificationBottom"}e.innerHTML=n;r&&(o=document.createElement("button"),o.attributes.type="button",o.setAttribute("aria-label",masterPagesBaseParams.closeNotificationText),o.title=masterPagesBaseParams.closeNotificationText,o.className="MasterPagesBase_notificationClose",appendEventHandler(o,"click",hideNotification),e.insertBefore(o,e.childNodes[0]));!isNaN(parseInt(u))&&u>0&&setTimeout(hideNotification,u);i&&(window.onbeforeunload=null,s=setInterval(function(){window.ch_timeout>0&&(window.ch_timeout--,document.getElementById("MasterPagesBase_pnlNotice").innerHTML=window.ch_timeoutMsg.replace("{0}",window.ch_timeout));window.ch_timeout<1&&(clearInterval(s),window.onbeforeunload=null,location.reload(!0))},1e3))}function getProjectExtIdForSearchUrl(n){switch(n){case"-1":return"*";case"-2":return null;default:return n}}initMasterPageBase();
function PopupWindow(n){function i(n){var t=document.getElementsByTagName("body")[0],i;if(n.wnd.parentNode!=t){if(n.wnd.id)for(i=0;i<t.children.length;i++)if(t.children[i].id==n.wnd.id){t.removeChild(t.children[i]);break}t.appendChild(n.wnd)}}function r(n){function f(n,t,i,r){return getMatchingParent(r,function(r){return r==n||r==t||r==i})}function i(t,i,r){appendEventHandler(t,"keydown",function(t){(t.keyCode||t.which)==i&&setTimeout(function(){r.call(n)},0)})}for(var u,r=n.showAction.split("|"),t=0;t<r.length;t++)switch(r[t]){case"init":n.show();break;case"mouseover":case"click":appendEventHandler(n.target,r[t],function(){n.show.call(n)});break;case"enter":i(n.target,13,n.show);break;case"space":i(n.target,32,n.show)}for(u=n.hideAction.split("|"),t=0;t<u.length;t++)switch(u[t]){case"mouseout":function e(t){typeof t!="undefined"&&f(n.wnd,n.target,n.beak,t.relatedTarget||t.toElement)||n.hide.call(n,null)}appendEventHandler(n.wnd,"mouseout",e);n.target&&appendEventHandler(n.target,"mouseout",e);break;case"click":appendEventHandler(document.documentElement,"click",function(t){if(n.wnd&&!n.isDontHidePopupOnBodyClick){if(typeof t!="undefined"&&f(n.wnd,n.isDontHideOnTargetClick?n.target:null,n.beak,t.target||t.srcElement))return;n.hide.call(n,null)}});break;case"escape":n.target&&i(n.target,27,n.hide);isNaN(n.wnd.tabIndex)||(n.wnd.tabIndex=-1);i(n.wnd,27,n.hide)}n.btnClose&&appendEventHandler(n.btnClose,"click",function(){n.hide.call(n,n.btnClose)})}function u(n){if(n.contentUrl&&n.iframe)if(appendEventHandler(window,"message",function(t){var i=null;try{i=JSON.parse(t.data)}catch(r){return}n.isAutoAdjustHeightForIframe&&i.clhFrameName&&i.clhFrameName==n.iframe.id&&(n.iframeContentHeight=i.height,n.show())}),appendEventHandler(n.iframe,"load",function(){n.hidePnlLoading()}),n.isDelayLoadIframeContent){var t=document.createElement("div");t.style.position="absolute";t.style.top="0";t.style.left="0";t.style.right="0";t.style.overflow="hidden";t.style.width="100%";t.style.textAlign="center";t.style.zIndex=n.zIndex+1;t.innerHTML=n.iframeLoadingText;n.wnd.appendChild(t);n.pnlLoading=t}else n.iframe.src=n.contentUrl}function f(n){var i,t,r;if(n.wnd.style.display="none",n.isRenderBeak&&!n.beak&&(n.beak=document.createElement("div"),n.beak.style.overflow="hidden",n.beak.style.display="none",i=n.getBeakSize(),n.beak.style.width=i[0]+"px",n.beak.style.height=i[1]+"px",n.wnd.parentNode.insertBefore(n.beak,n.wnd.nextSibling),t=document.createElement("div"),t.style.position="absolute",t.style.borderWidth="1px",t.style.borderStyle="solid",t.style.borderColor="#cdcdcd",t.style.width=-2+n.beakSize*Math.sqrt(2)+"px",t.style.height=-2+n.beakSize*Math.sqrt(2)+"px",t.style.backgroundColor="white",t.style.transformOrigin=t.style.webkitTransformOrigin="top left",t.className=n.beakCssClass?n.beakCssClass:"",n.beak.appendChild(t)),n.isEffectAppear&&(n.wnd.style.opacity="0",n.beak&&(n.beak.style.opacity=n.wnd.style.opacity)),n.isEffectExpand&&(n.wnd.style.transform=n.wnd.style.webkitTransform=n.getTranslateValue(),n.beak&&(n.beak.style.transform=n.beak.style.webkitTransform=n.wnd.style.transform)),this.iframe&&(n.wnd.style.overflow="hidden"),n.wnd.style.boxShadow=n.isAddShadow?"rgba(0,0,0,.7) 0 2px 25px":"",isIgnoreCaseEqual(n.position,"default")||(n.wnd.style.position="absolute",n.beak&&(n.beak.style.position="absolute")),n.wnd.style.zIndex=n.zIndex+(n.isModal?0:-1),n.beak&&(n.beak.style.zIndex=n.wnd.style.zIndex),n.isAllowDragging){r=n.dragTrigger?n.dragTrigger:n.wnd;r.style.cursor="move";function u(){n.isDragging=!1;n.pnlPopupOverlay.parentNode&&n.wnd.removeChild(n.pnlPopupOverlay);n.pnlBodyOverlay.parentNode&&document.documentElement.removeChild(n.pnlBodyOverlay)}function f(t){var i,r,u;n.isDragging&&(i=0,r=0,n.wnd.offsetParent&&(u=getElementPos(n.wnd.offsetParent,!0),i=u[0],r=u[1]),n.wnd.style.left=t.pageX-n.dragPoint[0]-i+"px",n.wnd.style.top=t.pageY-n.dragPoint[1]-r+"px")}function e(t){var r=t.srcElement||t.target,i;if(r&&r==n.btnClose)return!0;n.isDragging=!0;i=getElementPos(n.wnd,!0);n.dragPoint=[t.pageX-i[0],t.pageY-i[1]];n.pnlPopupOverlay=document.createElement("div");n.pnlPopupOverlay.style.position="absolute";n.pnlPopupOverlay.style.top=0;n.pnlPopupOverlay.style.bottom=0;n.pnlPopupOverlay.style.left=0;n.pnlPopupOverlay.style.right=0;n.pnlPopupOverlay.style.cursor="move";n.wnd.appendChild(n.pnlPopupOverlay);appendEventHandler(n.pnlPopupOverlay,"mousemove",f);appendEventHandler(n.pnlPopupOverlay,"mouseup",u);n.pnlBodyOverlay=document.createElement("div");n.pnlBodyOverlay.style.position="absolute";n.pnlBodyOverlay.style.top=0;n.pnlBodyOverlay.style.bottom=0;n.pnlBodyOverlay.style.left=0;n.pnlBodyOverlay.style.right=0;n.pnlBodyOverlay.style.cursor="move";document.documentElement.appendChild(n.pnlBodyOverlay);appendEventHandler(n.pnlBodyOverlay,"mousemove",f);appendEventHandler(n.pnlBodyOverlay,"mouseup",u)}appendEventHandler(r,"mousedown",e)}}function e(n){appendEventHandler(window,"resize",function(){n.adjustSize()})}function t(n,t,i){var u,r;if(!n)return i;for(u=n.toLowerCase().split("|"),r=0;r<u.length;r++)if(!arrayContains(t,u[r]))return console.warn("Failed to initialize PopupWindow: invalid show/hide action type specified: '"+n+"'. Resetting to the default action type of '"+i+"'."),i;return n}PopupWindow.prototype.getIsHorizontalAlign=function(){switch(this.position.toLowerCase()){case"left":case"right":return!0;default:return!1}};PopupWindow.prototype.getBeakSize=function(){return[this.beak?this.beakSize*(this.getIsHorizontalAlign()?1:2):0,this.beak?this.beakSize*(this.getIsHorizontalAlign()?2:1):0]};PopupWindow.prototype.getTranslateValue=function(){var n=-1,t="Y";return this.fixedPosition&&typeof this.fixedPosition.top!="undefined"||!this.fixedPosition&&(isIgnoreCaseEqual(this.position,"bottom")||isIgnoreCaseEqual(this.position,"center"))?(n=-1,t="Y"):this.fixedPosition&&typeof this.fixedPosition.bottom!="undefined"||!this.fixedPosition&&isIgnoreCaseEqual(this.position,"top")?(n=1,t="Y"):this.fixedPosition&&typeof this.fixedPosition.left!="undefined"||!this.fixedPosition&&isIgnoreCaseEqual(this.position,"right")?(n=-1,t="X"):(this.fixedPosition&&typeof this.fixedPosition.right!="undefined"||!this.fixedPosition&&isIgnoreCaseEqual(this.position,"left"))&&(n=1,t="X"),this.isInvertExpandEffectDir&&(n=n*-1),"translate"+t+"("+50*n+"px)"};if(this.onShowing=n.onShowing,this.onShown=n.onShown,this.onHiding=n.onHiding,this.wnd=n.wnd?n.wnd:document.getElementById(n.wndId),!this.wnd)return window.console&&console.warn("Failed to initialize PopupWindow: window element not found. Expected element ID is: '"+n.wndId+"'"),null;this.target=n.target?n.target:null;!this.target&&n.targetId&&(this.target=document.getElementById(n.targetId));this.targetCoordinatesEvalType=typeof n.targetCoordinatesEvalType!="undefined"?n.targetCoordinatesEvalType:PopupWindow.defaults.targetCoordinatesEvalType;this.position=!n.position||!arrayContains(["left","right","top","bottom","center","default"],n.position.toLowerCase())?"center":n.position.toLowerCase();this.showAction=t(n.showAction,["mouseover","click","init","space","enter","none"],PopupWindow.defaults.showAction);this.hideAction=t(n.hideAction,["mouseout","click","escape","none"],PopupWindow.defaults.hideAction);this.isDontHideOnTargetClick=typeof n.isDontHideOnTargetClick=="undefined"?PopupWindow.defaults.isDontHideOnTargetClick:n.isDontHideOnTargetClick;this.isAllowDragging=typeof n.isAllowDragging!="undefined"?n.isAllowDragging&&this.hideAction=="none":PopupWindow.defaults.isAllowDragging;this.dragTrigger=n.dragTrigger;!this.dragTrigger&&n.dragTriggerId&&(this.dragTrigger=document.getElementById(n.dragTriggerId));this.beginWindowMeasurement();this.width=n.width&&!isNaN(n.width)?n.width:this.wnd.offsetWidth>0?getClientWidth(this.wnd):PopupWindow.defaults.width;this.height=n.height&&!isNaN(n.height)?n.height:this.wnd.offsetHeight>0?getClientHeight(this.wnd):PopupWindow.defaults.height;this.endWindowMeasurement();this.relOffset=n.relOffset?n.relOffset:PopupWindow.defaults.relOffset;this.fixedPosition=n.fixedPosition?n.fixedPosition:PopupWindow.defaults.fixedPosition;this.btnClose=n.btnClose;!this.btnClose&&n.btnCloseId&&(this.btnClose=document.getElementById(n.btnCloseId));this.isAddShadow=typeof n.isAddShadow=="undefined"?PopupWindow.defaults.isAddShadow:n.isAddShadow;this.isEffectExpand=typeof n.isEffectExpand=="undefined"?PopupWindow.defaults.isEffectExpand:n.isEffectExpand;this.isEffectAppear=typeof n.isEffectAppear=="undefined"?PopupWindow.defaults.isEffectAppear:n.isEffectAppear;this.isInvertExpandEffectDir=typeof n.isInvertExpandEffectDir=="undefined"?PopupWindow.defaults.isInvertExpandEffectDir:n.isInvertExpandEffectDir;this.effectsTimeout=typeof n.effectsTimeout=="undefined"?PopupWindow.defaults.effectsTimeout:n.effectsTimeout;this.isModal=typeof n.isModal=="undefined"?PopupWindow.defaults.isModal:n.isModal;this.iframe=n.iframe;!this.iframe&&n.iframeId&&(this.iframe=document.getElementById(n.iframeId));this.iframeLoadingText=n.iframeLoadingText?n.iframeLoadingText:PopupWindow.defaults.iframeLoadingText;this.contentUrl=n.contentUrl?n.contentUrl:PopupWindow.defaults.contentUrl;this.isDelayLoadIframeContent=typeof n.isDelayLoadIframeContent!="undefined"?n.isDelayLoadIframeContent:!1;this.isAutoAdjustHeightForIframe=!n.height;this.zIndex=typeof n.zIndex=="undefined"?PopupWindow.defaults.zIndex:n.zIndex;this.isEnableResponsiveResize=typeof n.isEnableResponsiveResize=="undefined"?PopupWindow.defaults.isEnableResponsiveResize:n.isEnableResponsiveResize;this.responsiveResizeMaxWidth=n.responsiveResizeMaxWidth&&!isNaN(n.responsiveResizeMaxWidth)?n.responsiveResizeMaxWidth:this.width;this.responsiveResizeMaxHeight=n.responsiveResizeMaxHeight&&!isNaN(n.responsiveResizeMaxWidth)?n.responsiveResizeMaxHeight:this.height;this.responsiveResizedEl=n.responsiveResizedElId?document.getElementById(n.responsiveResizedElId):n.responsiveResizedEl;this.responsiveResizedElHeight=n.responsiveResizedElHeight&&!isNaN(n.responsiveResizedElHeight)?n.responsiveResizedElHeight:0;this.isMoveToBodyChildLevel=typeof n.isMoveToBodyChildLevel=="undefined"?PopupWindow.defaults.isMoveToBodyChildLevel:n.isMoveToBodyChildLevel;this.beakSize=n.beakSize?n.beakSize:PopupWindow.defaults.beakSize;this.beakCssClass=n.beakCssClass?n.beakCssClass:PopupWindow.defaults.beakCssClass;this.isRenderBeak=typeof n.isRenderBeak=="undefined"?PopupWindow.defaults.isRenderBeak:n.isRenderBeak;this.isRenderBeak&&!arrayContains(["left","right","top","bottom"],this.position)&&(this.isRenderBeak=!1);this.isMoveToBodyChildLevel&&i(this);f(this);u(this);r(this);this.isEnableResponsiveResize&&e(this)}PopupWindow.defaults={wnd:null,target:null,targetId:"",targetCoordinatesEvalType:"",btnClose:null,btnCloseId:"",dragTrigger:null,dragTriggerId:"",isAllowDragging:!1,position:"center",showAction:"init",hideAction:"none",isDontHideOnTargetClick:!1,width:200,height:200,relOffset:null,fixedPosition:null,isEffectExpand:!1,isEffectAppear:!1,isInvertExpandEffectDir:!1,effectsTimeout:300,isAddShadow:!0,isModal:!1,contentUrl:"",iframe:null,iframeId:"",iframeLoadingText:"Loading...",isDelayLoadIframeContent:!1,isMoveToBodyChildLevel:!1,isRenderBeak:!1,beakCssClass:"",beakSize:10,zIndex:5e4,isEnableResponsiveResize:!1,responsiveResizeMaxWidth:200,responsiveResizeMaxHeight:200,responsiveResizedElId:"",responsiveResizedEl:null,responsiveResizedElHeight:0};PopupWindow.prototype.hidePnlLoading=function(){this.pnlLoading&&(this.pnlLoading.style.display="none",this.pnlLoading.parentNode&&this.pnlLoading.parentNode.removeChild(this.pnlLoading),this.pnlLoading=null)};PopupWindow.prototype.createModalPanel=function(){var n=document.createElement("div"),t;return n.style.backgroundColor="black",n.style.opacity="0.5",n.style.webkitTransition=n.style.transition="opacity "+this.effectsTimeout+"ms",n.style.position="fixed",n.style.top="0",n.style.bottom="0",n.style.left="0",n.style.right="0",n.style.overflow="hidden",n.style.zIndex=this.zIndex-1,t=this,t.wnd.parentNode.insertBefore(n,t.wnd),appendEventHandler(n,"click",function(){t.hide()}),n};PopupWindow.prototype.adjustPosition=function(){var u,b,a,v,d,g,h,c,l,k;if(this.position.toLowerCase()!="default"){var f=this.getWindowSize(),d=0,g=0;if(this.relOffset&&(f[0]+=this.relOffset.left?this.relOffset.left:0,f[1]+=this.relOffset.top?this.relOffset.top:0),this.target){var t=this.getTargetPos(this.target),w=[this.getViewportParent(this.target.parentNode,!0),this.getViewportParent(this.target.parentNode,!1)],s=this.getTargetPosRelativeToViewportParents(w),r=this.getElementSize(this.target),y=this.getViewPos(w),p=this.getViewSize(w),o=this.getBeakSize(),i,n,e;switch(this.position.toLowerCase()){case"left":i=1;n=0;e=-1;break;case"right":i=1;n=0;e=1;break;case"top":i=0;n=1;e=-1;break;default:i=0;n=1;e=1}if(u=(r[n]+f[n])/2,b=[-y[i]+s[i]+f[i]>p[i]?-y[i]+s[i]+r[i]/2>p[i]/2&&s[i]+r[i]-f[i]>=0?t[i]+r[i]-f[i]:t[i]:t[i],-y[n]+s[n]+r[n]+f[n]-u+u*e>p[n]?-y[n]+s[n]+r[n]/2>p[n]/2&&s[n]+r[n]-u-u*e>=0?t[n]+r[n]-u-u*e:t[n]+r[n]-u+u*e:s[n]+r[n]-u+u*e>=0?t[n]+r[n]-u+u*e:t[n]+r[n]-u-u*e],a=b[i],v=b[n],this.wnd.style.position="absolute",this.wnd.style.clear="both",d=(a<t[0]?-1:1)*((this.getIsHorizontalAlign()?o[0]:0)+(this.relOffset&&this.relOffset.left?this.relOffset.left:0)),this.wnd.style.left=a+d+"px",g=(v<t[1]?-1:1)*((this.getIsHorizontalAlign()?0:o[1])+(this.relOffset&&this.relOffset.top?this.relOffset.top:0)),this.wnd.style.top=v+g+"px",this.beak){h=null;switch(this.position.toLowerCase()){case"left":h=a<t[0]?"left":"right";break;case"right":h=a>t[0]?"right":"left";break;case"top":h=v<t[1]?"top":"bottom";break;case"bottom":h=v>t[1]?"bottom":"top"}c=0;l=0;switch(h){case"left":this.beak.children[0].style.transform=this.beak.children[0].style.webkitTransform="rotate(45deg)";this.beak.children[0].style.left="0";this.beak.children[0].style.top="0";c=t[0]-o[0];l=t[1]+Math.min(f[1]/2,r[1]/2)-o[1]/2;break;case"right":this.beak.children[0].style.transform=this.beak.children[0].style.webkitTransform="rotate(-45deg)";this.beak.children[0].style.left="0";this.beak.children[0].style.top="50%";c=t[0]+r[0];l=t[1]+Math.min(f[1]/2,r[1]/2)-o[1]/2;break;case"top":this.beak.children[0].style.transform=this.beak.children[0].style.webkitTransform="rotate(-45deg)";this.beak.children[0].style.left="0";this.beak.children[0].style.top="0";c=t[0]+Math.min(f[0]/2,r[0]/2)-o[0]/2;l=t[1]-o[1];break;case"bottom":this.beak.children[0].style.transform=this.beak.children[0].style.webkitTransform="rotate(45deg)";this.beak.children[0].style.left="50%";this.beak.children[0].style.top="0";c=t[0]+Math.min(f[0]/2,r[0]/2)-o[0]/2;l=t[1]+r[1]}this.beak.style.left=c+"px";this.beak.style.top=l+"px"}}else{this.wnd.style.position="fixed";switch(this.position.toLowerCase()){case"left":this.wnd.style.left="0";this.wnd.style.top="0";break;case"right":this.wnd.style.right="0";this.wnd.style.top="0";break;case"top":this.wnd.style.top="0";this.wnd.style.left="0";break;case"bottom":this.wnd.style.bottom="0";this.wnd.style.left="0";break;case"center":this.wnd.style.top=Math.max(0,document.documentElement.clientHeight/2-f[1]/2)+"px";this.wnd.style.left=Math.max(0,document.documentElement.clientWidth/2-f[0]/2)+"px";break;default:this.wnd.style.left="0";this.wnd.style.top="0"}}if(this.fixedPosition){this.wnd.style.position="fixed";this.wnd.style.left="";this.wnd.style.top="";this.wnd.style.right="";this.wnd.style.bottom="";for(k in this.fixedPosition)this.wnd.style[k]=this.fixedPosition[k]}}};PopupWindow.prototype.show=function(){var i,t,n,r;if(this.isShowing){this.adjustSize();this.adjustPosition();return}if(this.onShowing){i={isCancel:!1};this.onShowing(this,i);if(i.isCancel)return}this.adjustSize();this.adjustPosition();this.isModal&&!this.isShowing&&(this.pnlModal=this.createModalPanel());this.contentUrl&&this.iframe&&this.isDelayLoadIframeContent&&(!this.iframe.src||isIgnoreCaseEqual(this.iframe.src,"about:blank"))&&(this.iframe.src=this.contentUrl);this.wnd.style.display="block";this.beak&&(this.beak.style.display=this.wnd.style.display);this.wnd.style.visibility="visible";t=[];this.isEffectExpand&&(t.push("transform "+this.effectsTimeout+"ms"),t.push("-webkit-transform "+this.effectsTimeout+"ms"));this.isEffectAppear&&t.push("opacity "+this.effectsTimeout+"ms");this.wnd.style.webkitTransition=this.wnd.style.transition=t.join(",");this.beak&&(this.beak.style.transition=this.beak.style.webkitTransition=this.wnd.style.transition);this.hideAction=="escape"&&this.wnd.focus();n=this;r=50;setTimeout(function(){n.isEffectExpand&&(n.wnd.style.transform=n.wnd.style.webkitTransform="",n.beak&&(n.beak.style.transform=n.beak.style.webkitTransform=n.wnd.style.transform));n.wnd.style.opacity="1";n.beak&&(n.beak.style.opacity=n.wnd.style.opacity)},r);switch(this.hideAction){case"click":this.isDontHidePopupOnBodyClick=!0;setTimeout(function(){n.isDontHidePopupOnBodyClick=!1},0)}if(this.isShowing=!0,this.onShown)if(this.effectsTimeout)setTimeout(function(){n.onShown(n,{})},this.effectsTimeout+r);else this.onShown(this,{})};PopupWindow.prototype.hide=function(){var t,n;if(this.isShowing){if(this.onHiding){t={cancel:!1};this.onHiding(this,t);if(t.cancel)return}this.pnlModal&&(n=this,this.pnlModal.style.opacity="0",setTimeout(function(){n.pnlModal&&(n.wnd.parentNode.removeChild(n.pnlModal),n.pnlModal=null)},this.effectsTimeout));this.isEffectAppear||this.isEffectExpand?(this.isEffectExpand&&(this.wnd.style.transform=this.wnd.style.webkitTransform=this.getTranslateValue(),this.beak&&(this.beak.style.transform=this.beak.style.webkitTransform=this.wnd.style.transform)),this.isEffectAppear&&(this.wnd.style.opacity="0",this.beak&&(this.beak.style.opacity=this.wnd.style.opacity)),n=this,setTimeout(function(){n.wnd.style.display="none";n.beak&&(n.beak.style.display=n.wnd.style.display)},this.effectsTimeout)):(this.wnd.style.display="none",this.beak&&(this.beak.style.display=this.wnd.style.display));this.isShowing=!1}};PopupWindow.prototype.getWindowSize=function(){this.beginWindowMeasurement();var n=[this.wnd.offsetWidth>0?this.wnd.offsetWidth:this.width,this.wnd.offsetHeight>0?this.wnd.offsetHeight:this.height];return this.endWindowMeasurement(),n};PopupWindow.prototype.setWindowSize=function(n,t){var r=!1,i=this.target?getElementPos(this.target,!1):null,u,f;n&&(u=i?Math.max(document.documentElement.clientWidth-i[0]-this.target.offsetWidth,i[0]):document.documentElement.clientWidth,n=Math.min(n,u),this.width=n,this.wnd.style.width=n+"px",r=!0);t&&(f=i?Math.max(document.documentElement.clientHeight-i[1]-this.target.offsetHeight,i[1]):document.documentElement.clientHeight,t=Math.min(t,f),this.height=t,this.wnd.style.height=t+"px",r=!0);r&&this.adjustPosition()};PopupWindow.bind=function(){var u,o,f,i,s,n,h,e,r,c,t;for(PopupWindow.instances||(PopupWindow.instances=[]),u="data-chpw-",o=document.getElementsByTagName("*"),f=0;f<o.length;f++)if(i=o[f],s=i.getAttribute("class"),s&&s.toLowerCase().indexOf("chpopupwindow")>=0){for(n=null,h=i.getAttribute(u+"params"),h?(n=JSON.parse(h),n.wnd=i):n={wnd:i},e=0;e<i.attributes.length;e++)if(r=i.attributes[e],r.name.toLowerCase().indexOf(u)>=0){c=r.name.toLowerCase().replace(u,"");for(t in PopupWindow.defaults)if(isIgnoreCaseEqual(t,c))if(typeof PopupWindow.defaults[t]=="string"){n[t]=r.value;break}else if(typeof PopupWindow.defaults[t]=="boolean"){n[t]=r.value&&r.value.toLowerCase()=="true";break}else if(typeof PopupWindow.defaults[t]=="number"){n[t]=parseInt(r.value);break}}PopupWindow.instances["wnd"+PopupWindow.length]=new PopupWindow(n)}};PopupWindow.prototype.adjustSize=function(){var n,r,i,t,u;(isIgnoreCaseEqual(getStyleValue(this.wnd,"position"),"absolute")||isIgnoreCaseEqual(getStyleValue(this.wnd,"position"),"fixed"))&&(n=0,this.isEnableResponsiveResize?(r=this.responsiveResizeMaxWidth/this.responsiveResizeMaxHeight,n=this.responsiveResizedElHeight>0?this.responsiveResizedElHeight:this.responsiveResizedEl?this.wnd.scrollHeight-this.responsiveResizedEl.offsetHeight:0,n<0&&(n=0),i=Math.min(document.documentElement.clientWidth,this.responsiveResizeMaxWidth),t=Math.min(document.documentElement.clientHeight-n,this.responsiveResizeMaxHeight),i=Math.min(i,t*r),t=Math.min(t,i/r),this.setWindowSize(i,t+n),this.responsiveResizedEl&&(this.responsiveResizedEl.style.height=t+"px")):(this.iframe&&(this.beginWindowMeasurement(),n=this.wnd.scrollHeight-this.iframe.offsetHeight,u=this.wnd.offsetHeight,this.endWindowMeasurement()),this.isAutoAdjustHeightForIframe&&this.iframeContentHeight&&(this.iframe.style.height=this.iframeContentHeight+"px",this.setWindowSize(null,this.iframeContentHeight+n),u=this.getWindowSize()[1]),this.iframe&&(this.iframe.style.height=u-n+"px")))};PopupWindow.prototype.beginWindowMeasurement=function(){this.wnd.offsetParent||(this.oldDisplay=this.wnd.style.display,this.oldVisibility=this.wnd.style.visibility,this.wnd.style.visibility="hidden",this.wnd.style.display="block")};PopupWindow.prototype.endWindowMeasurement=function(){this.oldDisplay&&(this.wnd.style.visibility=this.oldVisibility,this.wnd.style.display=this.oldDisplay,this.oldVisibility=null,this.oldDisplay=null)};PopupWindow.prototype.getTargetPos=function(n){if(this.targetCoordinatesEvalType)return getElementPos(n,this.targetCoordinatesEvalType=="body");this.beginWindowMeasurement();var t=getNearestAbsParent(this.wnd),i=getElementPos(n,!this.target,t);return this.endWindowMeasurement(),i};PopupWindow.prototype.getViewportParent=function(n,t){return getMatchingParent(n,function(n){return n&&getIsAbsPos(n)&&(t?!getIsOverflowVisibleX(n):!getIsOverflowVisibleY(n))})};PopupWindow.prototype.getTargetPosRelativeToViewportParents=function(n){var t=n[0],r=getElementPos(this.target,!t,t),u=r[0],i=n[1],f=i==t?r[1]:getElementPos(this.target,!i,i)[1];return[u,f]};PopupWindow.prototype.getElementSize=function(n){var t=getElBoundingClientRect(n);return[t.width,t.height]};PopupWindow.prototype.getViewPos=function(n){var r=n[0],u=n[1],t=r?r.scrollLeft:0,i=u?u.scrollTop:0;return r&&u?[t,i]:typeof pageYOffset=="number"?(t=r?t:window.pageXOffset,i=u?i:window.pageYOffset,[t,i]):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(t=r?t:document.body.scrollLeft,i=u?i:document.body.scrollTop,[t,i]):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?(t=r?t:document.documentElement.scrollLeft,i=u?i:document.documentElement.scrollTop,[t,i]):(t=r?t:0,i=u?i:0,[t,i])};PopupWindow.prototype.getViewSize=function(n){var t=n[0],i=n[1],r=t?t.offsetWidth-getBordersWidth(t):getWindowClientAreaWidth(window),u=i?i.offsetHeight-getBordersHeight(t):getWindowClientAreaHeight(window);return[r,u]};PopupWindow.prototype.setRelOffset=function(n){this.relOffset=n};PopupWindow.prototype.setTarget=function(n){this.target=n};PopupWindow.prototype.getTarget=function(){return this.target};PopupWindow.prototype.getEffectsTimeout=function(){return this.effectsTimeout};PopupWindow.prototype.getIsShowing=function(){return this.isShowing};PopupWindow.prototype.setWidth=function(n){this.wnd.style.width=n+"px"};
function CHTree(n,t,i,r){var f,u,e;t.isUseFontAwesomeIcons&&(t.templates||(t.templates={}),t.templates.nodeContent||(t.templates.nodeContent=t.fontAwesomeVersion!="4"?"<i class='fa-lg fa-fw {{_faIconCssClass}}'><\/i>{{T}}":"<i class='fa fa-lg fa-fw {{_faIconCssClass}}'><\/i>{{T}}"),t.cssClasses||(t.cssClasses={}),t.cssClasses.nodeContent||(t.cssClasses.nodeContent="CHTree_nodeContentFaIcons"));r&&(this.onNodeInit=r);this.opts=mergeOptions(CHTree.defaults,t);this.opts.fontAwesomeVersion=="4"&&(t.templates&&t.templates.backArrow||(this.opts.templates.backArrow="<i class='fa fa-angle-left'><\/i>"),t.templates&&t.templates.expandCollapseButton||(this.opts.templates.expandCollapseButton="<i class='fa fa-angle-right'><\/i>"));this.containerId=n;this.initHiddenInputs();this.setNodes(i,!0);f=document.getElementById(this.containerId);CssHandler.addElClass(f,this.opts.cssClasses.tree);this.opts.isExpandCollapseEffects&&CssHandler.addElClass(f,"CHTree_withExpandCollapseEffects");u=this;appendEventHandler(f,"click",function(n){u.onClick(n,u)});appendEventHandler(f,"keydown",function(n){u.onTreeKeyDown(n)});appendEventHandler(f,"dblclick",function(n){u.onDblClick(n,u)});appendEventHandler(f,"auxclick",function(n){u.onAuxClick(n,u)});switch(this.opts.mobileViewMode){case"always":this.setIsMobileView(!0);break;case"never":this.setIsMobileView(!1);break;default:e=function(){var n=document.documentElement.clientWidth;try{n=window.top.document.documentElement.clientWidth}catch(t){}u.setIsMobileView(n<u.opts.mobileViewWidthThreshold,!0)};this.removeResizeHandler=appendEventHandler(window,"resize",e,!0);e()}this.opts.focusedNodeId==""?i!=null&&(i.length>0&&!this.selAllId?this.setFocusedNode(i[0].id):i.length>1&&this.selAllId&&this.setFocusedNode(i[1].id)):this.nodes[this.opts.focusedNodeId]&&this.setFocusedNode(this.opts.focusedNodeId);this.setReadOnly(this.opts.isReadOnly);setTimeout(function(){if(u.opts.actionButtons.length&&!u.onActionButtonClick)throw"onActionButtonClick handler must be defined for CHTree in order for action buttons to work!";},0)}CHTree.defaults={expandLevels:0,maxLevel:0,isSubmitExpandedNodesToServer:!1,isReadOnly:!1,isHighlightFocusedNode:!0,isExpandCollapseEffects:!0,isUseFontAwesomeIcons:!1,fontAwesomeVersion:"",isEscapeNodeText:!0,isDragAndDrop:!1,nodeBtnPosition:"left",multiSelectMode:"",focusedNodeId:"",mobileViewWidthThreshold:979,mobileViewMode:"",delayLoadServiceUrl:null,expandCollapseEffectsTimeout:500,templates:{nodeContent:"{{T}}",backArrow:"<i class='fal fa-angle-left'><\/i>",expandCollapseButton:"<i class='fal fa-angle-right'><\/i>"},cssClasses:{tree:"CHTree_tree",mobileView:"CHTree_mobileView",desktopView:"CHTree_desktopView",treeDisabled:"CHTree_disabled",node:"CHTree_node",nodeLevelN:"CHTree_nodeL{{LEVEL}}",nodeContainer:"CHTree_nodeContainer",nodeBack:"CHTree_nodeBack",nodeDelayLoadTrigger:"CHTree_nodeDelayLoadTrigger",nodeDelayLoadLoading:"CHTree_nodeDelayLoadLoading",nodeBtn:"CHTree_btn",nodeSelect:"CHTree_select",nodeContent:"CHTree_nodeContent",nodeContentDisabled:"CHTree_nodeContentDisabled",btnExpand:"CHTree_nodeBtnExpand",btnCollapse:"CHTree_nodeBtnCollapse",nodeChildren:"CHTree_nodeChildren",nodeChildrenOfHiddenNode:"CHTree_nodeChildrenOfHiddenNode",nodeChildrenExpanded:"CHTree_nodeChildrenExpanded",nodeChildrenCollapsed:"CHTree_nodeChildrenCollapsed",nodeChildrenLevelN:"CHTree_nodeChildrenL{{LEVEL}}",nodeSelectAll:"CHTree_nodeSelectAll",nodeFocused:"CHTree_nodeFocused",nodeUnfocusable:"CHTree_nodeUnfocusable",nodeContentExpanded:"CHTree_nodeContentExpanded",nodeContentCollapsed:"CHTree_nodeContentCollapsed",nodeContentWithoutChildren:"CHTree_nodeContentWithoutChildren",dndDropTarget:"CHTree_nodeContentDropTarget",dndDropTargetBefore:"CHTree_nodeContentDropTargetBefore",dndDropTargetAfter:"CHTree_nodeContentDropTargetAfter",dndDragHint:"CHTree_nodeContentDragHint",dndDraggingMode:"CHTree_draggingMode",dndDragOver:"CHTree_dragOver",dndDragSrc:"CHTree_dragSrc",dndDragSrcChildren:"CHTree_dragSrcChildren",actionButtonsContainer:"CHTree_actionButtonsContainer",actionButton:"CHTree_actionButton"},text:{selectAllNode:"(Select All)",delayLoadTriggerNode:"Click to load all {{CHILD_COUNT}} child items...",delayLoadLoadingNode:"Loading...",back:"back",dragHint:"Drag the node to change its position",errorCannotMoveChildOfItself:"Cannot change parent for the item. The item cannot become a child for itself.",errorCannotMoveMaxHierarchyLevelN:"Cannot change parent for the item. The maximum level of hierarchy allowed is {0}.",errorCannotAddMaxHierarchyLevelN:"Cannot add a new item. The maximum level of hierarchy allowed is {0}.",errorCannotAddSameId:"Cannot add a new item. An item with the same ID already exists.",expandNode:"Expand node",collapseNode:"Collapse node"},actionButtons:[]};CHTree.prototype.removeResizeHandler=function(){};CHTree.prototype.showError=function(n){alert(n)};CHTree.prototype.initHiddenInputs=function(){function n(n,t,i){var f=document.getElementById(n),u=n+"_"+t,r=document.createElement("input");return r.type="hidden",r.name=r.id=u,r.value=i,f.appendChild(r),u}this.hiDisabledNodesId=n(this.containerId,"hiDisabledNodes",this.getNodeIdsWithEnabledState(!1).join("\t"));this.hiSelectedNodesId=n(this.containerId,"hiSelectedNodes",this.getSelectedNodeIds().join("\t"));this.hiFocusedNodeId=n(this.containerId,"hiFocusedNode",this.getFocusedNodeId());this.opts.isSubmitExpandedNodesToServer&&(this.hiExpandedNodesId=n(this.containerId,"hiExpandedNodes",this.getExpandedNodeIds().join("\t")));this.opts.delayLoadServiceUrl&&(this.hiLoadedNodesId=n(this.containerId,"hiLoadedNodes",this.getAllNodeIds().join("\t")))};CHTree.prototype.rerender=function(n){var t=document.getElementById(this.containerId),r,i,u;for(this.getIsMobileView()?(CssHandler.removeElClass(t,this.opts.cssClasses.desktopView),CssHandler.addElClass(t,this.opts.cssClasses.mobileView)):(CssHandler.removeElClass(t,this.opts.cssClasses.mobileView),CssHandler.addElClass(t,this.opts.cssClasses.desktopView));t.firstChild;)t.removeChild(t.firstChild);if(!n)for(r in this.childrenPanels)r!==""&&(this.nodes[r].e=0);this.childrenPanels=null;this.nodePanels=null;this.initHiddenInputs();i=this.getReadOnlyOverlayPanel();i||(i=document.createElement("div"),i.id=this.containerId+"_pnlReadOnly",i.className=this.opts.cssClasses.treeDisabled,t.appendChild(i));this.updateNode("",!0);this.opts.expandLevels==0||this.getIsMobileView()||this.expandLevels(this.opts.expandLevels);this.isChangingView=!0;u=this.getFocusedNodeId();this.setFocusedNode(u?u:this.nodes[""].c.length?this.nodes[""].c[0].id:null);this.isChangingView=!1;this.setReadOnly(this.getIsReadOnly())};CHTree.prototype.setIsMobileView=function(n){var t=this.isMobileView!=n;this.isMobileView=n;t&&this.rerender()};CHTree.prototype.getIsMobileView=function(){return this.isMobileView};CHTree.prototype.getReadOnlyOverlayPanel=function(){return _$("#"+this.containerId+"_pnlReadOnly")};CHTree.prototype.getChildrenPanelCssClass=function(n){var t=[this.opts.cssClasses.nodeChildren];return t.push(this.opts.cssClasses.nodeChildrenLevelN.replace(/{{LEVEL}}/g,this.getNodeLevel(n.id))),t.push(n.e==1?this.opts.cssClasses.nodeChildrenExpanded:this.opts.cssClasses.nodeChildrenCollapsed),!n.isHidden||t.push(this.opts.cssClasses.nodeChildrenOfHiddenNode),t.join(" ")};CHTree.prototype.getChildrenPanel=function(n){return this.childrenPanels?this.childrenPanels[n]:null};CHTree.prototype.removeChildrenPanel=function(n){var t=this.getChildrenPanel(n);t&&t.parentNode&&t.parentNode.removeChild(t);this.childrenPanels[n]=null};CHTree.prototype.getNodeContainerPanel=function(n){var t=this.getNodePanel(n);return t?t.parentNode:null};CHTree.prototype.getNodePanel=function(n){return this.nodePanels?this.nodePanels[n]:null};CHTree.prototype.getNodeContentPanel=function(n){var i=this.getNodePanel(n),t;if(i)for(t=0;t<i.children.length;t++)if(CssHandler.getIsElHasClass(i.children[t],this.opts.cssClasses.nodeContent))return i.children[t];return null};CHTree.prototype.getEffectiveEl=function(n){if(!n)return null;for(var t=document.getElementsByTagName("body")[0];(!n.getAttribute||!n.getAttribute("data-node-id"))&&n.parentNode&&n!=document.getElementById(this.containerId)&&n!=t;)n=n.parentNode;return n.getAttribute("data-node-id")?n:null};CHTree.prototype.getNodeId=function(n){var t=this.getEffectiveEl(n);return t?t.getAttribute("data-node-id"):null};CHTree.prototype.updateNode=function(n,t,i){function nt(n){return res=document.createElement("a"),res.setAttribute("data-node-id",n.id),res.href=n.vals._url&&!n.d?n.vals._url:"javascript:void(0)",n.vals._target&&(res.target=n.vals._target),res.title=n.vals._toolTip?n.vals._toolTip:escapeMarkup(this.opts.isEscapeNodeText?n.t:PlainTextRetriever.getPlainTextFromHtml(n.t)),n.vals._rel&&(res.rel=n.vals._rel),res.className=this.opts.cssClasses.node,res}function ot(n){var t=[this.opts.cssClasses.node];return this.opts.isHighlightFocusedNode&&n.id==this.focusedNodeId&&t.push(this.opts.cssClasses.nodeFocused),n.vals._customCssClass&&t.push(n.vals._customCssClass),n.vals._isNoFocus&&t.push(this.opts.cssClasses.nodeUnfocusable),n.id==this.selAllId&&t.push(this.opts.cssClasses.nodeSelectAll),t.push(this.opts.cssClasses.nodeLevelN.replace(/{{LEVEL}}/g,this.getNodeLevel(n.id))),t.join(" ")}function st(n){return this.opts.cssClasses.nodeContent+(n.d==1?" "+this.opts.cssClasses.nodeContentDisabled:"")}function ht(){var n=[this.opts.cssClasses.nodeContainer];return r.vals._containerCustomCssClass&&n.push(r.vals._containerCustomCssClass),n.join(" ")}function tt(n){var t=document.createElement("div");return n.appendChild(t),t}function it(n){var t,i,r;return this.childrenPanels||(this.childrenPanels={}),t=document.createElement("ul"),t.className=this.getChildrenPanelCssClass(n),this.getIsMobileView()&&n.id!==""&&(i=nt.call(this,n),i.className+=" "+this.opts.cssClasses.nodeBack,r=tt.call(this,i),r.className=this.opts.cssClasses.nodeContent,r.innerHTML=this.opts.templates.backArrow+"  "+this.opts.text.back,t.appendChild(rt(i))),this.childrenPanels[n.id]=t,t}function rt(n){var t=document.createElement("li");return t.appendChild(n),t.className=ht.call(o),t}function ut(n,t,i){return i||(i=document.createElement("div"),n.c&&n.c.length>0&&(i.tabIndex=0,i.setAttribute("role","button")),t.appendChild(i)),i.className=o.opts.cssClasses.nodeBtn,i}var o=this,r=this.nodes[n],c,u,ct,y,h,l,a,b,k,d,g,p,w,f,v,ft,et;if(n===""){t&&(c=this.getChildrenPanel(n),c||(c=it.call(this,r),document.getElementById(this.containerId).appendChild(c)),this.updateChildNodes("",!0));return}if(this.onNodeInit&&n&&n!=this.selAllId)this.onNodeInit(this,{node:r});i&&this.getNodeContainerPanel(r.id)&&this.getNodePanel(r.id)&&(this.getNodeContainerPanel(r.id).removeChild(this.getNodePanel(r.id)),this.nodePanels[r.id]=null);u=this.getNodePanel(n);u||(u=nt.call(this,r),o.opts.isDragAndDrop&&r.vals._isDraggable?(u.setAttribute("draggable","true"),o=this,appendEventHandler(u,"dragstart",function(n){o.onDragStart(n)}),appendEventHandler(u,"dragend",function(n){o.onDragEnd(n)}),appendEventHandler(u,"dragover",function(n){o.onDragOver(n)}),appendEventHandler(u,"dragenter",function(n){o.onDragEnter(n)}),appendEventHandler(u,"dragleave",function(n){o.onDragLeave(n)}),appendEventHandler(u,"drop",function(n){o.onDrop(n)})):appendEventHandler(u,"dragstart",function(n){return stopBubbling(n)}),this.nodePanels||(this.nodePanels={}),this.nodePanels[r.id]=res,this.getChildrenPanel(r.parentId)||(ct=""),this.getChildrenPanel(r.parentId).appendChild(rt(u)));t&&this.removeChildrenPanel(n);var c=this.getChildrenPanel(n),e=this.getNodeContentPanel(n),s=null;for(f=0;f<u.children.length;f++)if(CssHandler.getIsElHasClass(u.children[f],this.opts.cssClasses.nodeBtn)){s=u.children[f];break}if(this.opts.nodeBtnPosition=="left"&&(s=ut(r,u,s)),e){if(this.opts.multiSelectMode&&r.s>-1){for(h=null,f=0;f<u.children.length;f++)if(l=u.children[f],l.className&&CssHandler.getIsElHasClass(l,this.opts.cssClasses.nodeSelect)){h=l;break}if(h)for(f=0;f<h.children.length;f++)if(l=h.children[f],l.tagName.toLowerCase()=="input"&&l.type.toLowerCase()=="checkbox"){l.checked=r.s==2;break}}}else this.opts.multiSelectMode&&r.s>-1&&(h=document.createElement("div"),h.className=this.opts.cssClasses.nodeSelect,u.appendChild(h),y=document.createElement("input"),y.type="checkbox",y.checked=r.s==2,y.disabled=r.d==1,h.appendChild(y)),e=tt.call(this,u);this.opts.nodeBtnPosition=="right"&&(s=ut(r,u,s));u.className=ot.call(this,r);u.style.display=r.isHidden?"none":"";e.className=st.call(this,r);r.c&&r.c.length>0?(s&&(s.innerHTML=this.opts.templates.expandCollapseButton,r.e==1?(s.setAttribute("aria-label",this.opts.text.collapseNode),s.className+=" "+this.opts.cssClasses.btnCollapse):(s.setAttribute("aria-label",this.opts.text.expandNode),s.className+=" "+this.opts.cssClasses.btnExpand)),r.e==1?r.imgs.Expanded?(e.style.backgroundImage="url('"+r.imgs.Expanded+"')",e.style.backgroundRepeat="no-repeat"):e.className+=" "+this.opts.cssClasses.nodeContentExpanded:r.imgs.Collapsed?(e.style.backgroundImage="url('"+r.imgs.Collapsed+"')",e.style.backgroundRepeat="no-repeat"):e.className+=" "+this.opts.cssClasses.nodeContentCollapsed):r.imgs.WithoutChildren?(e.style.backgroundImage="url('"+r.imgs.WithoutChildren+"')",e.style.backgroundRepeat="no-repeat"):e.className+=" "+this.opts.cssClasses.nodeContentWithoutChildren;a=r.id!=this.selAllId&&this.opts.templates.nodeContent&&this.opts.templates.nodeContent!=""?this.opts.templates.nodeContent.replace(/{{T}}/g,this.opts.isEscapeNodeText?escapeMarkup(r.t):r.t):escapeMarkup(r.t);a=a.replace(/{{ID}}/g,escapeMarkup(r.id));for(b in r.vals)a=a.replace(new RegExp("{{"+b+"}}","g"),r.vals[b]);if(e.innerHTML!=a&&(e.innerHTML=a),o.opts.isDragAndDrop&&r.vals._isDraggable&&(r.vals._isDropSiblingAllowed&&(k=document.createElement("div"),k.className=this.opts.cssClasses.dndDropTarget+" "+this.opts.cssClasses.dndDropTargetBefore,e.appendChild(k),d=this.nodes[r.parentId],d.c[d.c.length-1]==r&&(g=document.createElement("div"),g.className=this.opts.cssClasses.dndDropTarget+" "+this.opts.cssClasses.dndDropTargetAfter,e.appendChild(g))),p=document.createElement("div"),p.className=this.opts.cssClasses.dndDragHint,p.title=this.opts.text.dragHint,e.appendChild(p)),this.opts.actionButtons.length)for(w=document.createElement("div"),w.className=this.opts.cssClasses.actionButtonsContainer,e.appendChild(w),f=0;f<this.opts.actionButtons.length;f++){function lt(n,t){appendEventHandler(n,"click",function(n){t.htmlEvent=n;o.onClickActionButton(t);return stopBubbling(n)})}v=document.createElement("button");v.type="button";v.className=this.opts.cssClasses.actionButton+" "+this.opts.actionButtons[f].cssClass;v.title=this.opts.actionButtons[f].tooltip;appendEventHandler(v,"dragstart",function(n){return stopBubbling(n)});ft={nodeId:r.id,buttonId:o.opts.actionButtons[f].id};lt(v,ft);w.appendChild(v)}c||(c=it.call(this,r),et=this.getIsMobileView()?document.getElementById(this.containerId):this.getNodeContainerPanel(r.id),et.appendChild(c));c.className=this.getChildrenPanelCssClass(r)};CHTree.prototype.updateChildNodes=function(n,t){var r=this.nodes[n].c,i;if(r)for(i=0;i<r.length;i++)this.updateNode(r[i].id),t&&r[i].e&&this.updateChildNodes(r[i].id,t)};CHTree.prototype.switchNode=function(n,t,i){var r=this.nodes[n],f,u,e;if(i=typeof i!="undefined"?i:!r.e,i&&this.getIsMobileView())if(r.c&&r.c.length)for(f in this.childrenPanels)f!==r.id&&this.collapseNode(f);else return;u=r.e==1!=i;this.getIsMobileView()&&t&&u&&i&&r.c&&r.c.length>0&&this.setFocusedNode(r.c[0].id,!0);r.e=i?1:0;n!==""&&this.updateNode(n);u&&i&&this.updateChildNodes(n);e=this.getChildrenPanel(n);e.className=this.getChildrenPanelCssClass(r);u&&this.opts.isSubmitExpandedNodesToServer&&(document.getElementById(this.hiExpandedNodesId).value=this.getExpandedNodeIds().join("\t"))};CHTree.prototype.getOptions=function(){return this.opts};CHTree.prototype.setOptions=function(n,t){this.opts=n;this.rerender(t)};CHTree.prototype.runOnNodes=function(n,t,i,r,u){var f,e;if(r||(r=1),u||(u={isStop:!1}),n&&!u.isStop)for(f=0;f<n.length;f++){if(e={level:r,isSkipChildren:!1,isStop:!1},t.call(this,n[f],e),e.isStop){u.isStop=!0;return}if(i&&!e.isSkipChildren&&n[f].c&&(this.runOnNodes(n[f].c,t,i,r+1,u),u.isStop))return}};CHTree.prototype.initNode=function(n,t,i){var r,u,f;if(!i&&n.id&&this.nodes[n.id]){console.warn(n);throw"Duplicate node ID detected. Trying to init a node with an already registered ID: "+n.id;}if(this.nodes[n.id]=n,t&&n.id!=this.selAllId&&n.s>-1&&n.s<2&&(t.isAllSelected=!1),!this.opts.isUseFontAwesomeIcons||n.vals&&n.vals._faIconCssClass||(n.vals||(n.vals={}),n.vals._faIconCssClass=""),n.vals._isNoFocus&&typeof n.vals._isNoFocus!="boolean"&&(n.vals._isNoFocus=n.vals._isNoFocus==="1"?!0:!1),n.vals._isDraggable&&typeof n.vals._isDraggable!="boolean"&&(n.vals._isDraggable=n.vals._isDraggable==="0"?!1:!0),n.vals._isDropChildAllowed&&typeof n.vals._isDropChildAllowed!="boolean"&&(n.vals._isDropChildAllowed=n.vals._isDropChildAllowed==="0"?!1:!0),n.vals._isDropSiblingAllowed&&typeof n.vals._isDropSiblingAllowed!="boolean"&&(n.vals._isDropSiblingAllowed=n.vals._isDropSiblingAllowed==="0"?!1:!0),(!n.c||n.c.length<1)&&n.vals&&n.vals._delayLoadType&&parseInt(n.vals._dlc)>0){if(!this.opts.delayLoadServiceUrl)throw new"The 'delayLoadServiceUrl' option is not initialized. It must be initialized for delayed loading to work.";r=null;u=null;switch(n.vals._delayLoadType){case"LoadOnClick":r=this.opts.cssClasses.nodeDelayLoadTrigger;u=this.opts.text.delayLoadTriggerNode.replace(/{{CHILD_COUNT}}/g,n.vals._dlc);break;case"LoadOnExpand":r=this.opts.cssClasses.nodeDelayLoadLoading;u=this.opts.text.delayLoadLoadingNode}n.c=[{id:n.id+"_dl",c:[],t:u,s:-1,d:0,vals:{_customCssClass:r,_faIconCssClass:""},imgs:{}}]}if(n.c)for(f=0;f<n.c.length;f++)n.c[f].parentId=n.id};CHTree.prototype.getAllNodeIds=function(){var n=[];for(var t in this.nodes)n.push(t);return n};CHTree.prototype.getExpandedNodeIds=function(){var t=[];for(var n in this.nodes)this.nodes[n].e==1&&n!=this.selAllId&&t.push(n);return t};CHTree.prototype.onNodeChildrenDelayLoaded=function(n,t){var u=JSON.parse(t),i=this.nodes[n],r;i.c=u;i.vals._delayLoadType=null;i.vals._dlc=null;r={isAllSelected:!0};this.runOnNodes([i],function(t){this.initNode(t,r,t.id==n)},!0);this.selAllId&&!r.isAllSelected&&this.nodes[this.selAllId].s==2&&(this.nodes[this.selAllId].s=0);document.getElementById(this.hiDisabledNodesId).value=this.getNodeIdsWithEnabledState(!1).join("\t");document.getElementById(this.hiSelectedNodesId).value=this.getSelectedNodeIds().join("\t");document.getElementById(this.hiLoadedNodesId).value=this.getAllNodeIds().join("\t");this.updateNode(n,!0);this.updateChildNodes(n);this.selAllId&&this.updateNode(this.selAllId)};CHTree.prototype.onClick=function(n,t){function o(n,t){if(!n)return null;while(n.parentNode&&n!=document.getElementById(this.containerId)&&!n.getAttribute("data-node-id")){if(CssHandler.getIsElHasClass(n,t))return!0;n=n.parentNode}return CssHandler.getIsElHasClass(n,t)}var r=n.srcElement||n.target,s,u,i,e,h;if(r&&(s=getElBoundingClientRect(r),s.width||s.height)){if(o(r,this.opts.cssClasses.btnExpand)||o(r,this.opts.cssClasses.btnCollapse)){if(i=this.getNodeId(r),u=o(r,this.opts.cssClasses.btnExpand),i){if(u&&this.onNodeExpanding)this.onNodeExpanding(this,{node:this.nodes[i]});if(this.opts.isExpandCollapseEffects)setTimeout(function(){if(u&&t.onNodeExpanded)t.onNodeExpanded(t,{node:t.nodes[i]});if(!u&&t.onNodeCollapsed)t.onNodeCollapsed(t,{node:t.nodes[i]})},this.opts.expandCollapseEffectsTimeout);else{if(u&&this.onNodeExpanded)this.onNodeExpanded(this,{node:this.nodes[i]});if(!u&&this.onNodeCollapsed)this.onNodeCollapsed(this,{node:this.nodes[i]})}this.switchNode(i,!0)}return stopBubbling(n)}if(r.type&&r.type.toLowerCase()=="checkbox"){this.opts.multiSelectMode&&(i=this.getNodeId(r),this.setNodeSelected(i,r.checked,n.ctrlKey?"recursive":null));this.setFocusedNode(i);return}if(o(r,this.opts.cssClasses.node)){var i=this.getNodeId(r),f=CssHandler.getIsElHasClass(this.getEffectiveEl(r),this.opts.cssClasses.nodeBack),c=CssHandler.getIsElHasClass(this.getEffectiveEl(r),this.opts.cssClasses.nodeDelayLoadTrigger);if(c?(e=this.nodes[i],e.t=this.opts.text.delayLoadLoadingNode,e.vals._customCssClass=this.opts.cssClasses.nodeDelayLoadLoading,this.updateNode(i),sendRequest("GET",this.opts.delayLoadServiceUrl.replace(/{{PARENT_ID}}/g,encodeURIComponent(e.parentId)),null,!0,function(n){t.onNodeChildrenDelayLoaded(e.parentId,n.responseText)})):(h=!0,this.getFocusedNodeId()==i&&(this.switchNode(i,!0),this.getIsMobileView()&&(!f||f&&!this.nodes[i].c.length)&&(h=!1)),h&&this.setFocusedNode(i,f)),this.onNodeClick&&!f&&!c)this.onNodeClick(this,{node:t.nodes[i],htmlEvent:n});if(this.onNodeCollapsed&&f)this.onNodeCollapsed(this,{node:t.nodes[i]})}}};CHTree.prototype.onTreeKeyDown=function(n){function u(n,t){var u=null,f=!1,r=null;return i.runOnNodes(i.nodes[""].c,function(e,o){if(t&&f){o.isStop=!0;r=e;return}if(e.e!=1&&(o.isSkipChildren=!0),e.id==n)if(t)f=!0;else{o.isStop=!0;r=i.nodes[u];return}u=e.id},!0),r}var i=this,r,t,f;if(this.onBeforeKeyDown){r={isCancel:!1,htmlEvent:n};this.onBeforeKeyDown(this,r);if(r.isCancel)return stopBubbling(n)}t=null;f=n.keyCode||n.which;switch(f){case 13:case 32:n.target.click();break;case 37:t=this.nodes[this.getFocusedNodeId()];t&&this.collapseNode(t.id);break;case 38:t=u(this.getFocusedNodeId(),!1);t&&this.setFocusedNode(t.id,!0,!1,!0);break;case 39:t=this.nodes[this.getFocusedNodeId()];t&&this.expandNode(t.id);break;case 40:t=u(this.getFocusedNodeId(),!0);t&&this.setFocusedNode(t.id,!0,!1,!0)}if(this.onKeyDown)this.onKeyDown(this,n)};CHTree.prototype.onDblClick=function(n,t){var i=n.srcElement||n.target,r;if(i&&CssHandler.getIsElHasClass(i,t.opts.cssClasses.nodeContent)&&(r=t.getNodeId(i),t.onNodeDblClick))t.onNodeDblClick(t,{nodeId:r})};CHTree.prototype.onAuxClick=function(n,t){var i=t.getNodeId(n.srcElement||n.target),r=t.getNode(i);if(r&&!r.vals._isNoFocus&&t.onNodeAuxClick)t.onNodeAuxClick(t,{htmlEvent:n,nodeId:i})};CHTree.prototype.onClickActionButton=function(n){if(this.onActionButtonClick)this.onActionButtonClick(this,n)};CHTree.prototype.setFocusedNode=function(n,t,i,r){var f=this.nodes[n],s,h,c,e,u,o,l;if(!f||!f.vals._isNoFocus){if(s=this.focusedNodeId,s!=n&&!i&&this.onFocusedNodeChanging){h={isCancel:!1,oldId:s,newId:n};this.onFocusedNodeChanging(this,h);if(h.isCancel)return}if(c=document.getElementById(this.hiFocusedNodeId),this.focusedNodeId&&!this.isChangingView&&(c.value=this.focusedNodeId="",this.updateNode(s)),f){for(c.value=this.focusedNodeId=n,e=[];this.nodes[f.parentId];)e.push(f.parentId),f=this.nodes[f.parentId];for(u=e.length-1;u>=0;u--)this.expandNode(e[u]);if(this.getIsMobileView())for(u=1;u<e.length;u++)this.collapseNode(e[u]);this.updateNode(n);o=this.getNodeElement(n);t&&getIsElementHiddenByParentOverflow(o)&&(l=getFirstScrollableParent(o),l.scrollTop+=getElementPos(o,!1,l)[1]);r&&o.parentNode.focus()}if(this.onFocusedNodeChanged)this.onFocusedNodeChanged(this,{})}};CHTree.prototype.setNodeSelected=function(n,t,i){var r,e,u,o,s,f,h;if(n&&this.opts.multiSelectMode&&(r=this.nodes[n],r&&!(r.s<0)&&r.d!=1&&!r.isHidden)){if(this.onNodeSelecting){e={isCancel:!1,nodeId:n,isChecked:t};this.onNodeSelecting(this,e);if(e.isCancel)return}if(r.d!=1&&(r.s=t?2:0,(this.opts.multiSelectMode=="recursive"&&i!="explicit"||i=="recursive")&&(this.runOnNodes(r.c,function(n){this.setNodeSelected(n.id,t,"explicit")},!0),!t)))for(u=r;u.parentId;)this.setNodeSelected(u.parentId,!1,"explicit"),u=this.nodes[u.parentId];if(o=null,r.id!=this.selAllId){if(o=this.getSelectedNodeIds(),this.selAllId)if(t){s=!0;for(f in this.nodes)if(f!=this.selAllId&&this.nodes[f].s>-1&&this.nodes[f].s<2){s=!1;break}this.nodes[this.selAllId].s=s?2:0;this.updateNode(this.selAllId)}else this.nodes[this.selAllId].s=0,this.updateNode(this.selAllId);h=document.getElementById(this.hiSelectedNodesId);h.value=o.join("\t")}else this.setAllNodesSelected(t);if(this.updateNode(n),this.onNodeSelected)this.onNodeSelected(this,{})}};CHTree.prototype.setAllNodesSelected=function(n){var i,t,r,u;for(i in this.nodes)t=this.nodes[i],t.s>-1&&t.d!=1&&(t.s=n?2:0);r=this.getSelectedNodeIds();this.runOnNodes(this.nodes[""].c,function(n){this.updateNode(n.id)},!0);u=document.getElementById(this.hiSelectedNodesId);u.value=r.join("\t")};CHTree.prototype.expandLevels=function(n){var t=this;this.runOnNodes(this.nodes[""].c,function(i,r){(n<0||n>=r.level)&&t.expandNode(i.id);n==r.level&&(r.isSkipChildren=!0)},!0)};CHTree.prototype.expandNode=function(n){this.switchNode(n,!1,!0)};CHTree.prototype.collapseNode=function(n){this.switchNode(n,!1,!1)};CHTree.prototype.collapseAll=function(){var n=this;this.runOnNodes(this.nodes[""].c,function(t){n.collapseNode(t.id)},!0)};CHTree.prototype.setSelectedNodeIds=function(n){this.setAllNodesSelected(!1);for(var t=0;t<n.length;t++)this.setNodeSelected(n[t],!0)};CHTree.prototype.getNodeIdsWithEnabledState=function(n){var i=[];for(var t in this.nodes)this.nodes[t].d===(n?0:1)&&t!==this.selAllId&&i.push(t);return i};CHTree.prototype.getEnabledNodeIds=function(){return this.getNodeIdsWithEnabledState(!0)};CHTree.prototype.getSelectedNodeIds=function(){var t=[];for(var n in this.nodes)this.nodes[n].s==2&&n!=this.selAllId&&t.push(n);return t};CHTree.prototype.getFocusedNodeId=function(){return this.focusedNodeId?this.focusedNodeId:null};CHTree.prototype.getNode=function(n){return this.nodes[n]};CHTree.prototype.getAllNodes=function(n){var i,t;if(n)return this.nodes[""].c;i=[];for(t in this.nodes)t&&t!=this.selAllId&&i.push(this.nodes[t]);return i};CHTree.prototype.setNode=function(n,t){return this.nodes[n.id]=n,t?this.updateNode(n.id,!0,!0):this.rerender(!0),n};CHTree.prototype.setNodes=function(n,t){this.opts.multiSelectMode&&n.length>0&&(this.selAllId=this.containerId+"_selAll",n.unshift({t:this.opts.text.selectAllNode,id:this.selAllId,s:0,c:[],imgs:{},vals:{_faIconCssClass:"",_isNoFocus:!0}}));this.nodes={};this.nodes[""]={id:"",c:n,e:1,vals:{}};var i={isAllSelected:!0};this.runOnNodes([this.nodes[""]],function(n){this.initNode(n,i)},!0);this.selAllId&&(this.nodes[this.selAllId].s=i.isAllSelected?2:0);t||this.rerender(!0)};CHTree.prototype.getNodeElement=function(n){return this.getNodeContentPanel(n)};CHTree.prototype.getNodeByVal=function(n,t){var r,i;for(r in this.nodes)if(i=this.nodes[r],i.vals&&typeof i.vals[n]!="undefined"&&i.vals[n]==t)return i;return null};CHTree.prototype.setReadOnly=function(n){this.isReadOnly=n;var t=this.getReadOnlyOverlayPanel();t.style.display=this.isReadOnly?"":"none"};CHTree.prototype.getIsReadOnly=function(){return this.isReadOnly};CHTree.prototype.setExpandCollapseEffectsEnabled=function(n){var t=document.getElementById(this.containerId);this.opts.isExpandCollapseEffects=n;this.opts.isExpandCollapseEffects?CssHandler.addElClass(t,"CHTree_withExpandCollapseEffects"):CssHandler.removeElClass(t,"CHTree_withExpandCollapseEffects")};CHTree.prototype.createNode=function(n,t){return{id:t?t:guid(),c:[],t:n,s:0,d:0,e:0,parentId:"",vals:{},imgs:{}}};CHTree.prototype.appendNode=function(n,t){return(t||(t=""),n.parentId=t,this.nodes[n.id])?(this.showError(this.opts.text.errorCannotAddSameId),!1):this.validateNewChildNode(null,t)?(this.nodes[n.id]=n,this.nodes[t].c.push(n),this.rerender(!0),!0):!1};CHTree.prototype.insertNode=function(n,t,i){var r,u;if(this.nodes[n.id])return this.showError(this.opts.text.errorCannotAddSameId),!1;r=this.nodes[t];n.parentId=r.parentId;u=this.nodes[r.parentId].c;this.nodes[n.id]=n;u.splice(u.indexOf(r)+(i?0:1),0,n);this.rerender(!0)};CHTree.prototype.getNodeLevel=function(n){if(n==="")return 0;var t=this.nodes[n];return t.parentId?this.getNodeLevel(t.parentId)+1:1};CHTree.prototype.setKeyboardFocus=function(){if(this.nodes[""].c&&this.nodes[""].c.length){var n=this.getNodePanel(this.nodes[""].c[0].id);n&&n.focus()}};CHTree.prototype.applyFilter=function(n){this.runOnNodes(this.nodes[""].c,function(t){var i=n(t);i||t.s>0&&(t.s=0);t.isHidden=!i},!0);this.rerender(!0)};CHTree.prototype.removeFilter=function(){this.applyFilter(function(){return!0});this.rerender(!0)};CHTree.prototype.validateNewChildNode=function(n,t){function f(n){if(!n.c.length)return 0;var t=1;return i.runOnNodes(n.c,function(n,i){i.level>t&&(t=i.level)},!0,1),t}function r(n,t){if(n==t)return!0;var u=i.nodes[n];return u.parentId?u.parentId==t?!0:r(u.parentId,t):!1}var i=this,u;return n&&r(t,n)?(this.showError(this.opts.text.errorCannotMoveChildOfItself),!1):this.opts.maxLevel&&(u=this.getNodeLevel(t)+1+(n?f(this.nodes[n]):0),u>this.opts.maxLevel)?(n?this.showError(this.opts.text.errorCannotMoveMaxHierarchyLevelN.replace("{0}",this.opts.maxLevel)):this.showError(this.opts.text.errorCannotAddMaxHierarchyLevelN.replace("{0}",this.opts.maxLevel)),!1):!0};CHTree.prototype.moveNode=function(n,t,i){var u=this.nodes[t],f=this.nodes[u.parentId],r=this.nodes[n],e=this.nodes[r.parentId],o;if(this.validateNewChildNode(r.id,i=="child"?u.id:u.parentId)){e.c.splice(e.c.indexOf(r),1);switch(i){case"before":case"after":o=i=="before"?0:1;r.parentId=f.id;f.c.splice(f.c.indexOf(u)+o,0,r);break;case"child":r.parentId=u.id;u.c.push(r)}this.rerender(!0)}};CHTree.prototype.moveNodeOnSameLevel=function(n,t){var r=this.nodes[n],i=this.nodes[r.parentId],u,f;i.c.length!=1&&(u=i.c.indexOf(r),f=Math.min(i.c.length-1,Math.max(0,u+t)),i.c.splice(u,1),i.c.splice(f,0,r),this.rerender(!0))};CHTree.prototype.removeNode=function(n){var t=this.nodes[n],i;this.runOnNodes([t],function(n){n.id==this.focusedNodeId&&this.setFocusedNode(null);delete this.nodes[n.id]},!0);i=this.nodes[t.parentId];i.c.splice(i.c.indexOf(t),1);this.rerender(!0)};CHTree.prototype.onDragStart=function(n){this.dragSrcId=this.getNodeId(n.target);this.noDropIds={};this.runOnNodes(this.nodes[this.dragSrcId].c,function(n){this.noDropIds[n.id]=!0},!0);this.setFocusedNode(this.dragSrcId);CssHandler.addElClass(n.target,this.opts.cssClasses.dndDragSrc);CssHandler.addElClass(this.getChildrenPanel(this.dragSrcId),this.opts.cssClasses.dndDragSrcChildren);var t=document.getElementById(this.containerId);CssHandler.addElClass(t,this.opts.cssClasses.dndDraggingMode)};CHTree.prototype.getDropType=function(n){var t="child";return n.className&&CssHandler.getIsElHasClass(n,this.opts.cssClasses.dndDropTargetAfter)?t="after":n.className&&CssHandler.getIsElHasClass(n,this.opts.cssClasses.dndDropTargetBefore)&&(t="before"),t};CHTree.prototype.getIsDropAllowed=function(n){var t=this.getNodeId(n),i=t!=this.dragSrcId&&!this.noDropIds[t];return i&&(i=this.getDropType(n)=="child"?this.nodes[t].vals._isDropChildAllowed:this.nodes[t].vals._isDropSiblingAllowed),i};CHTree.prototype.onDragEnter=function(n){this.getIsDropAllowed(n.target)&&CssHandler.addElClass(n.target,this.opts.cssClasses.dndDragOver)};CHTree.prototype.onDragOver=function(n){var t=this.getIsDropAllowed(n.target);return n.dataTransfer.effectAllowed=t?"move":"none",n.dataTransfer.dropEffect=t?"move":"none",stopBubbling(n)};CHTree.prototype.onDragLeave=function(n){CssHandler.removeElClass(n.target,this.opts.cssClasses.dndDragOver)};CHTree.prototype.onDragEnd=function(n){CssHandler.removeElClass(n.target,this.opts.cssClasses.dndDragSrc);CssHandler.removeElClass(this.getChildrenPanel(this.dragSrcId),this.opts.cssClasses.dndDragSrcChildren);var t=document.getElementById(this.containerId);CssHandler.removeElClass(t,this.opts.cssClasses.dndDraggingMode);this.dragSrcId=null};CHTree.prototype.onDrop=function(n){var t;CssHandler.removeElClass(n.target,this.opts.cssClasses.dndDragOver);var r=this.getDropType(n.target),u=this.nodes[this.dragSrcId],i=this.nodes[this.getNodeId(n.target)];if(!this.validateNewChildNode(u.id,r=="child"?i.id:i.parentId)||r=="child"&&!i.vals._isDropChildAllowed)return stopBubbling(n);if(t={dropType:r,srcNode:u,destNode:i,isCancel:!1},this.onNodeDropping)this.onNodeDropping(this,t);if(t.isCancel||this.moveNode(t.srcNode.id,t.destNode.id,t.dropType),this.onNodeDropped)this.onNodeDropped(this,{dropType:r,srcNode:u,destNode:i});return stopBubbling(n)};
function CHMenu(n,t,i){this.noUrlAddress="javascript:void(0)";this.isInitialized=!1;t&&t.isUseFontAwesomeIcons&&(t.templates||(t.templates={}),t.templates.itemContent||(t.templates.itemContent=t.fontAwesomeVersion=="4"?"<a href='{{_url}}' target='{{_target}}' title='{{_toolTip}}' aria-label='{{_ariaLabel}}'><i class='fa fa-lg {{_faIconCssClass}}'><\/i>{{T}}<\/a>":"<a href='{{_url}}' target='{{_target}}' title='{{_toolTip}}' aria-label='{{_ariaLabel}}'><i class='fa-lg {{_faIconCssClass}}'><\/i>{{T}}<\/a>"));this.opts=mergeOptions(CHMenu.defaults,t);this.opts.fontAwesomeVersion!="4"||t.templates.dropDownArrow||(this.opts.templates.dropDownArrow="<i class='fa fa-angle-down'><\/i>");this.items={};this.items[""]={id:"",c:i};this.initItems(i);this.containerId=n;this.selectedItemId=this.opts.selectedItemId;var u=document.getElementById(this.containerId),r=this;appendEventHandler(document.documentElement,"click",function(){r.isDontHidePopupOnBodyClick||r.hidePopup()});appendEventHandler(window,"resize",function(){setTimeout(function(){r.onWindowResize()},0)});appendEventHandler(window,"load",function(){setTimeout(function(){r.onWindowResize()},0)});document.getElementById(this.containerId)&&(this.isDeferLayoutEvents=!0,r.onWindowResize())}CHMenu.defaults={isMobileViewIfParentOverflow:!1,mobileViewMinWidthThreshold:979,isAllowItemSelection:!1,isShowPopupOnHover:!1,isUseFontAwesomeIcons:!1,fontAwesomeVersion:"latest",selectedItemId:null,isMovePopupToBodyChildLevel:!0,isEscapeMenuItemText:!0,templates:{itemContent:"<a href='{{_url}}' target='{{_target}}' title='{{_toolTip}}' {{_ariaLabel}}>{{T}}<\/a>",dropDownArrow:"<i class='fal fa-angle-down'><\/i>",treeItemContent:null},cssClasses:{menu:"CHMenu_menu clearfix",menuItemDesktopRootLevel:"CHMenu_menuItem",menuItemDesktopRootLevelWithImage:"CHMenu_menuItemWithImage",menuItemDesktopRootLevelSelected:"CHMenu_menuItemSelected",menuItemDesktopRootLevelDisabled:"CHMenu_menuItemDisabled",popup:"CHMenu_popup"}};CHMenu.prototype.initItems=function(n){for(var t,i=0;i<n.length;i++)t=n[i],this.items[t.id]=t,t.vals._url||(t.vals._url=this.noUrlAddress),t.vals._target||(t.vals._target=""),t.vals._toolTip||(t.vals._toolTip=""),t.vals._ariaLabel||(t.vals._ariaLabel=""),t.vals._rel||(t.vals._rel=""),this.opts.isUseFontAwesomeIcons&&!t.vals._faIconCssClass&&(t.vals._faIconCssClass="far CHMenuItem_noFaIcon"),t.c&&this.initItems.call(this,t.c)};CHMenu.prototype.getItems=function(){return this.items};CHMenu.prototype.setItems=function(n){this.items={};this.items[""]={id:"",c:n};this.initItems(n);this.hidePopup();this.createMenu();this.onWindowResize()};CHMenu.prototype.onWindowResize=function(){function i(){if(t.onInit)t.onInit(this,{})}var t=this,u=this.isDeferLayoutEvents,n,r;(this.mobileViewDynamicWidthThreshold||typeof this.opts.mobileViewMinWidthThreshold=="number")&&this.setIsMobileView(getWindowClientAreaWidth()<this.mobileViewDynamicWidthThreshold||getWindowClientAreaWidth()<this.opts.mobileViewMinWidthThreshold||this.opts.mobileViewMinWidthThreshold==0);this.opts.isMobileViewIfParentOverflow&&(typeof this.getIsMobileView()=="undefined"&&this.setIsMobileView(!1),n=document.getElementById(this.containerId).parentNode,r=n.style.overflow,n.style.overflow="auto",!this.getIsMobileView()&&(n.offsetHeight<n.scrollHeight||!isIe&&!isEdge&&n.offsetWidth<n.scrollWidth||(isIe||isEdge)&&n.offsetWidth<n.scrollWidth&&Math.abs(n.offsetWidth-n.scrollWidth)>2)&&(this.mobileViewDynamicWidthThreshold=getWindowClientAreaWidth()+1,this.setIsMobileView(!0)),n.style.overflow=r);!this.getIsMobileView()&&!this.opts.isMobileViewIfParentOverflow&&this.opts.mobileViewMinWidthThreshold<0&&this.setIsMobileView(!1);this.isInitialized||(this.isInitialized=!0,u?setTimeout(i,0):i())};CHMenu.prototype.getIsMobileView=function(){return this.isMobileView};CHMenu.prototype.setIsMobileView=function(n){function i(){if(t.onViewSwitched)t.onViewSwitched(t,{isMobileView:t.isMobileView})}var t=this,r=this.isMobileView!=n;this.isMobileView=n;r&&(this.hidePopup(),this.createMenu(),this.isDeferLayoutEvents?(this.isDeferLayoutEvents=!1,setTimeout(i,0)):i())};CHMenu.prototype.getTree=function(n){return this.getIsMobileView()?this.mobileTree:this.treesByItemIds?this.treesByItemIds[n]:null};CHMenu.prototype.createTree=function(n,t){var e={mobileViewMode:"always",expandLevels:0,isReadOnly:!1,isHighlightFocusedNode:this.opts.isAllowItemSelection,isUseFontAwesomeIcons:this.opts.isUseFontAwesomeIcons,isEscapeNodeText:this.opts.isEscapeMenuItemText,focusedNodeId:this.selectedItemId,multiSelectMode:"",cssClasses:{tree:this.opts.cssClasses.menu}},r,f,u,i;for(this.opts.templates.treeItemContent&&(e.templates={nodeContent:this.opts.templates.treeItemContent}),r=document.getElementById(n);r.firstChild;)r.removeChild(r.firstChild);return f=document.createElement("div"),f.id=r.id+"_pt",r.appendChild(f),u=new CHTree(f.id,e,t),i=this,u.onNodeClick=function(n,t){i.items[t.node.id].d||this.isReadOnly||i.triggerItemClick(i.items[t.node.id],null,t.htmlEvent)&&(i.hidePopup(),i.setSelectedItem(null))},u.onNodeExpanding=function(n,t){i.triggerItemExpanding(t.node)},u.onNodeExpanded=function(n,t){i.triggerItemExpanded(t.node)},u.onNodeCollapsed=function(n,t){i.triggerItemCollapsed(t.node)},u};CHMenu.prototype.getMenuItemClass=function(n){var i=this.opts.isAllowItemSelection&&this.selectedItemId==n,t=this.getItem(n);return this.opts.cssClasses.menuItemDesktopRootLevel+(i?" "+this.opts.cssClasses.menuItemDesktopRootLevelSelected:"")+(t.d||this.isReadOnly?" "+this.opts.cssClasses.menuItemDesktopRootLevelDisabled:"")+(t.imgs.WithoutChildren?" "+this.opts.cssClasses.menuItemDesktopRootLevelWithImage:"")+(t.t?"":" CHMenuItem_noText")+(t.vals._containerCustomCssClass?" "+t.vals._containerCustomCssClass:"")+(t.vals._customCssClass?" "+t.vals._customCssClass:"")};CHMenu.prototype.setSelectedItem=function(n){var t,i;if(this.selectedItemId=n,this.getIsMobileView())this.mobileTree.setFocusedNode(n);else{for(t in this.itemEls)this.itemEls[t].className=this.getMenuItemClass(t);if(n&&this.getTree(n))this.getTree(n).setFocusedNode(n,!1,!0);else for(i in this.treesByItemIds)this.getTree(i).setFocusedNode(null,!1,!0)}};CHMenu.prototype.getItem=function(n){return this.items[n]};CHMenu.prototype.setItemEnabled=function(n,t,i){var r=this.items[n];r.d=t?0:1;this.setItem(r,i)};CHMenu.prototype.setItemUrl=function(n,t,i){var r=this.items[n];r.vals._url=t;this.setItem(r,i)};CHMenu.prototype.setItem=function(n,t){this.items[n.id]=n;this.getIsMobileView()?this.mobileTree.getNode(n.id)&&this.mobileTree.setNode(n,t):(this.items[n.id]=n,this.rerender())};CHMenu.prototype.rerender=function(){this.setItems(this.items[""].c)};CHMenu.prototype.setOptions=function(n){this.opts=n;this.rerender()};CHMenu.prototype.getOptions=function(){return this.opts};CHMenu.prototype.setReadOnly=function(n){var t=!!this.isReadOnly!=n;this.isReadOnly=n;t&&this.rerender()};CHMenu.prototype.createMenu=function(){function f(n){var t=document.createElement("li"),u=this.opts.isEscapeMenuItemText?escapeMarkup(n.t):n.t,i,r;n.c&&n.c.length>0&&this.opts.templates.dropDownArrow&&(u+=this.opts.templates.dropDownArrow);i=this.opts.templates.itemContent&&this.opts.templates.itemContent!=""?this.opts.templates.itemContent.replace(/{{T}}/g,u):u;i=i.replace(/{{ID}}/g,escapeMarkup(n.id));for(r in n.vals)i=i.replace(new RegExp("{{"+r+"}}","g"),(n.d||this.isReadOnly)&&r=="_url"?this.noUrlAddress:n.vals[r]);return t.className=this.getMenuItemClass(n.id),this.itemEls||(this.itemEls={}),this.itemEls[n.id]=t,t.innerHTML=i,t.setAttribute("data-item-id",n.id),t.setAttribute("title",n.t),n.imgs.WithoutChildren&&(t.style.backgroundImage="url('"+n.imgs.WithoutChildren+"')",t.style.backgroundRepeat="no-repeat"),t}function e(t,i){var r=document.createElement("div"),u;r.id=this.containerId+"_"+t.id+"_chmenu_popup";r.className=this.opts.cssClasses.popup;r.setAttribute("data-popup-for-chmenu",t.id);i.appendChild(r);var f=this.createTree(r.id,t.c),e={wnd:r,target:i,position:t.vals._popupPosition,showAction:"none",hideAction:"none",isEffectAppear:!this.opts.isShowPopupOnHover,isEffectExpand:!this.opts.isShowPopupOnHover,isAddShadow:!1,isMoveToBodyChildLevel:this.opts.isMovePopupToBodyChildLevel},o=new PopupWindow(e);for(this.opts.isShowPopupOnHover&&(this.isDontHidePopupOnBodyClick=!0,appendEventHandler(i,"mouseenter",function(t){n.curPopupTargetItemId||(n.curPopupTargetItemId=(t.srcElement||t.target).getAttribute("data-item-id"),setTimeout(function(){n.curPopupTargetItemId&&n.onItemMouseEnter.call(n,t)},300))}),appendEventHandler(i,"mouseleave",function(t){return n.curPopupTargetItemId=null,n.onPopupOrItemMouseLeave.call(n,t)}),appendEventHandler(r,"mouseleave",function(t){return n.curPopupTargetItemId=null,n.onPopupOrItemMouseLeave.call(n,t)})),this.treesByItemIds||(this.treesByItemIds={}),this.popupsByParentItemIds||(this.popupsByParentItemIds={}),u=0;u<t.c.length;u++)this.treesByItemIds[t.c[u].id]=f;this.popupsByParentItemIds[t.id]=o}for(var n=this,u=document.getElementById(this.containerId),i,t,r;u.firstChild;)u.removeChild(u.firstChild);if(this.itemEls=null,this.getIsMobileView())this.mobileTree=this.createTree(this.containerId,this.items[""].c);else for(i=document.createElement("ul"),i.className=this.opts.cssClasses.menu,appendEventHandler(i,"click",function(t){return n.onClick.call(n,t)}),u.appendChild(i),t=0;t<this.items[""].c.length;t++)r=f.call(this,this.items[""].c[t]),appendEventHandler(r,"auxclick",function(t){if(n.onItemAuxClick){var i={itemId:t.currentTarget.dataset.itemId,htmlEvent:t};n.onItemAuxClick(n,i)}}),i.appendChild(r),this.items[""].c[t].c&&this.items[""].c[t].c.length!==0?e.call(this,this.items[""].c[t],r):this.opts.isShowPopupOnHover&&appendEventHandler(r,"mouseenter",function(){return n.hidePopup()})};CHMenu.prototype.getItemIdByEl=function(n){if(!n)return null;while(!n.getAttribute("data-item-id")&&n.parentNode&&n!=document.getElementById(this.containerId)&&!CssHandler.getIsElHasClass(n,this.opts.cssClasses.popup))n=n.parentNode;return n.getAttribute("data-item-id")?{id:n.getAttribute("data-item-id"),el:n}:null};CHMenu.prototype.adjustPopupPosition=function(){this.curPopupParentItemId&&this.popupsByParentItemIds[this.curPopupParentItemId].adjustPosition()};CHMenu.prototype.showPopup=function(n){this.popupsByParentItemIds[n].getIsShowing()?this.popupsByParentItemIds[n].adjustPosition():(this.curPopupParentItemId&&this.popupsByParentItemIds[this.curPopupParentItemId].hide(),this.popupsByParentItemIds[n].show());this.curPopupParentItemId=n};CHMenu.prototype.hidePopup=function(){this.curPopupParentItemId&&(this.popupsByParentItemIds[this.curPopupParentItemId].hide(),this.curPopupParentItemId=null,this.triggerItemCollapsed(this.items[this.curPopupParentItemId]))};CHMenu.prototype.triggerItemClick=function(n,t,i){if(this.onItemClick){var r={item:n,isCancel:!1,el:t,htmlEvent:i};this.onItemClick(this,r);return!r.isCancel}return!0};CHMenu.prototype.triggerItemExpanding=function(n){if(this.onItemExpanding){var t={item:n};this.onItemExpanding(this,t)}};CHMenu.prototype.triggerItemExpanded=function(n){if(this.onItemExpanded){var t={item:n};this.onItemExpanded(this,t)}};CHMenu.prototype.triggerItemCollapsed=function(n){if(this.onItemCollapsed){var t={item:n};this.onItemCollapsed(this,t)}};CHMenu.prototype.onClick=function(n){var u=n.srcElement||n.target,i,t,r;if(u&&(i=this.getItemIdByEl(u),i)){if(t=this.items[i.id],this.isReadOnly||t.d||this.opts.isShowPopupOnHover&&t.c&&t.c.length)return;if(t.c&&t.c.length>0)this.curPopupParentItemId!=t.id&&(this.triggerItemExpanding(t),r=this,setTimeout(function(){r.triggerItemExpanded(t)},this.popupsByParentItemIds[t.id].getEffectsTimeout()),this.showPopup(t.id),this.isDontHidePopupOnBodyClick=!0,setTimeout(function(){r.isDontHidePopupOnBodyClick=!1;r.treesByItemIds[t.c[0].id].setKeyboardFocus()},0));else if(!this.triggerItemClick(t,i.el,n))return stopBubbling(n);this.opts.isAllowItemSelection&&this.setSelectedItem(t.id)}};CHMenu.prototype.onItemMouseEnter=function(n){var r=n.srcElement||n.target,i,t,u;r&&(i=this.getItemIdByEl(r),i)&&((t=this.items[i.id],this.isReadOnly||t.d)||t.c&&t.c.length&&(this.curPopupParentItemId!=t.id&&(this.triggerItemExpanding(t),u=this,setTimeout(function(){u.triggerItemExpanded(t)},this.popupsByParentItemIds[t.id].getEffectsTimeout())),this.showPopup(i.id)))};CHMenu.prototype.onPopupOrItemMouseLeave=function(n){getIsChildOf(n.relatedTarget||n.toElement,this.popupsByParentItemIds[this.curPopupParentItemId]?this.popupsByParentItemIds[this.curPopupParentItemId].getTarget():null)||this.hidePopup()};
function initGoogleTranslateMobile(){new google.translate.TranslateElement({layout:google.translate.TranslateElement.InlineLayout.VERTICAL},"google_translate_element_mobile")}function initGoogleTranslateDesktop(){new google.translate.TranslateElement({layout:google.translate.TranslateElement.InlineLayout.SIMPLE},"google_translate_element_desktop")}function initGoogleTranslate(){var n=CssHandler.getIsElHasClass(document.documentElement,"mobileView");n?addDynamicLinks(["https://translate.google.com/translate_a/element.js?cb=initGoogleTranslateMobile"],!0):addDynamicLinks(["https://translate.google.com/translate_a/element.js?cb=initGoogleTranslateDesktop"],!0)}function initMasterPage(){function t(){var n=getPortalUiProps();CssHandler.switchElClass(document.documentElement,"isStickyAppHeader",n.isStickyAppHeader);CssHandler.switchElClass(document.documentElement,"isFixedWidth",n.fixedWidth>0);window.ArticleEditor&&(CssHandler.switchElClass(document.documentElement,"isStickyArticleHeader",n.isStickyArticleHeader),CssHandler.switchElClass(document.documentElement,"isStickyNavPanel",n.isStickyNavPanel),CssHandler.switchElClass(document.documentElement,"isNoNavPanel",!hiStateBaseMaster.Get("isShowNavPanel")),CssHandler.switchElClass(document.documentElement,"isNoPubsList",!hiStateBaseMaster.Get("isShowPubsList")))}function n(){var t=_$("#pnlBaseMasterMenuContainer"),f=0,l=0,e,s,h,r,n,a,v,u,i,c,o;!t&&getCurrentUserInfo().isInternalUser&&(t=_$("#pnlTopNavigationContainer"),e=document.getElementById("pnlBaseMasterLeftMenuContainer"),getComputedStyle(e).flexDirection=="row"?f+=e.offsetHeight:l+=e.offsetWidth);s=_$("#pnlBaseMasterTrialPanel");s&&(f+=s.offsetHeight);h=_$("#pnlBaseMasterNavBarContainer");h&&(h.style.height=document.documentElement.clientHeight-f+"px");r=_$("#pnlBaseMasterContainer");n=getPortalUiProps();baseMasterPageParams.isArticlesPage&&getCurrentUserInfo().isInternalUser&&(a=document.documentElement.clientWidth-l+"px",r.style.width=a);getCurrentUserInfo().isInternalUser?(v=document.documentElement.clientHeight-(t?t.offsetHeight:0)-f-getMarginsHeight(r)+"px",r.style.height=v):baseMasterPageParams.isHomePage||(u=window.ArticleEditor?ArticleEditor.getPnlHeader():null,i=!isNaN(baseMasterPageParams.initialMarginTop)&&!(u&&n.isStickyAppHeader&&n.isStickyArticleHeader)?baseMasterPageParams.initialMarginTop:0,n.isStickyAppHeader&&(i+=t.offsetHeight,c=_$("#pnlBaseMasterReaderPreviewPanel"),i+=c?c.offsetHeight:0),CssHandler.switchElClass(t,"sticky",n.isStickyAppHeader),n.isStickyArticleHeader&&!n.isStickyNavPanel&&u&&CssHandler.getIsElHasClass(u,"sticky")&&(i+=u.offsetHeight),r.style.marginTop=i>0?i+"px":"");(getCurrentUserInfo().isInternalUser||!window.baseMasterMainMenu)&&(o=(hiStateBaseMaster.Get("mobileWidthBreakpointPx")||n.fixedWidth)&&document.documentElement.offsetWidth<(hiStateBaseMaster.Get("mobileWidthBreakpointPx")||n.fixedWidth)||document.documentElement.offsetWidth<baseMasterPageParams.defaultMobileWidthBreakpointPx,(!o||CssHandler.getIsElHasClass(document.documentElement,"mobileView"))&&(o||CssHandler.getIsElHasClass(document.documentElement,"desktopView"))||onMasterMainMenuViewSwitched({},{isMobileView:o}))}function i(){var i=_$$(".BaseMaster_hamburgerMenuIcon"),r,n,u,f,e;if(i.length>1){for(r=[],n=0;n<i.length;n++)r.push(i[n].id);window.baseMasterOffCanvasPanel=new CHOffCanvasPanel("pnlContainer",r,"pnlOffCanvasOverlay","pnlOffCanvasNav")}_$("#google_translate_element_desktop")?initGoogleTranslate():(u=_$("#google_translate_element_mobile"),u&&CssHandler.switchElClass(u,"BaseMaster_googleTranslateHidden",!0));window.baseMasterMainMenu&&window.baseMasterMainMenu.getOptions().mobileViewMinWidthThreshold>-1&&(f=getPortalUiProps(),e=window.baseMasterMainMenu.getOptions(),e.mobileViewMinWidthThreshold=Math.max(baseMasterPageParams.defaultMobileWidthBreakpointPx,hiStateBaseMaster.Get("mobileWidthBreakpointPx")||f.fixedWidth||0));t()}if(!getCurrentUserInfo().isInternalUser){var r=_$("#pnlBaseMasterContainer");baseMasterPageParams.initialMarginTop=parseInt(getStyleValue(r,"margin-top"));GlobalEvents.addEventHandler("ArticleEditorHeaderStickyChanged",n)}this.updateHtmlLangAtt(baseMasterPageParams.readerUiLangName);appendEventHandler(window,"resize",n);t();n();hiStateBaseMaster.Get("notificationWarningHtml")&&(showNotification(hiStateBaseMaster.Get("notificationWarningHtml"),!0,!1,!0),hiStateBaseMaster.Set("notificationWarningHtml",null));document.readyState!="complete"?appendEventHandler(window,"load",i):i()}function supressSubmitOnEnter(){}function onMasterLoginClick(){return window.location.href=baseMasterLoginUrlMask.replace("RETURN_URL",encodeURIComponent(window.location.pathname+window.location.search+window.location.hash)),!1}function onMasterMobileMenuItemClick(n,t){var i=document.getElementById("pnlArticlesNav"),r=document.getElementById("pnlMainMenu");switch(t.item.id){case"menuItemMenu":i&&(i.style.display="none");r&&(r.style.display="");break;case"menuItemToc":case"menuItemIndex":i&&(i.style.display="");r&&(document.getElementById("pnlMainMenu").style.display="none");articleSelector.selectTab(t.item.id=="menuItemToc"?"tabContents":"tabIndex");break;case"menuItemLogin":onMasterLoginClick();t.isCancel=!0}}function onMasterMainMenuItemClick(n,t){switch(t.item.id){case"menuItemFileManager":n.getIsMobileView()?(window.baseMasterOffCanvasPanel&&window.baseMasterOffCanvasPanel.hide(),setTimeout(function(){fileDialogBaseMaster.showDialog()},500)):fileDialogBaseMaster.showDialog()}}function onMasterMainMenuItemExpanding(n){var t=window.getProjectInfoForBaseMaster,r=null,f=null,u,i;t&&(u=getProjectInfoForBaseMaster(),u&&(r=u.extId,f=u.id));t=t&&r;i=null;n.getItem("menuItemProjectOpen")&&(n.setItemEnabled("menuItemProjectOpen",t,!0),t&&(i=hiStateBaseMaster.Get("projectOpenLinkTemplate").replace("/0","/"+r),n.setItemUrl("menuItemProjectOpen",i,!0)));n.getItem("menuItemProjectFiles")&&(n.setItemEnabled("menuItemProjectFiles",t,!0),t&&(i=hiStateBaseMaster.Get("projectFilesLinkTemplate").replace("/0/","/"+r+"/"),n.setItemUrl("menuItemProjectFiles",i,!0)));n.getItem("menuItemProjectSettings")&&(n.setItemEnabled("menuItemProjectSettings",t,!0),t&&(i=hiStateBaseMaster.Get("projectSettingsLinkTemplate").replace("/0/","/"+r+"/"),n.setItemUrl("menuItemProjectSettings",i,!0)));n.getItem("menuItemProjectVariables")&&(n.setItemEnabled("menuItemProjectVariables",t,!0),t&&(i=hiStateBaseMaster.Get("projectVariablesLinkTemplate").replace("/0/","/"+r+"/"),n.setItemUrl("menuItemProjectVariables",i,!0)));n.getItem("menuItemProjectReports")&&(n.setItemEnabled("menuItemProjectReports",t,!0),t&&(i=hiStateBaseMaster.Get("projectStatsLinkTemplate").replace("/0/","/"+r+"/"),n.setItemUrl("menuItemProjectReports",i,!0)));n.getItem("menuItemProjectPublish")&&n.setItemEnabled("menuItemProjectPublish",t,!0)}function onMasterMainMenuItemsLoaded(n,t){CssHandler.switchElClass(document.documentElement,"noMainMenu",!t.menuItems||t.menuItems[""].c.length<1)}function onMasterMainMenuViewSwitched(n,t){var h,i,c;if(document.readyState!="complete"){appendEventHandler(window,"load",function(){onMasterMainMenuViewSwitched(n,t)});return}var e=document.getElementById("pnlOffCanvasContent"),l=document.getElementById("pnlMainMenuContainer"),r=document.getElementById("pnlMainMenu"),f=document.getElementById("pnlBaseMasterLeftMenuContainer");if(l&&!getCurrentUserInfo().isInternalUser&&(t.isMobileView&&r.parentNode!=e?e.appendChild(r):t.isMobileView||r.parentNode==l||l.appendChild(r)),CssHandler.switchElClass(document.documentElement,"desktopView",!t.isMobileView),CssHandler.switchElClass(document.documentElement,"mobileView",t.isMobileView),t.isMobileView&&getCurrentUserInfo().isInternalUser){var u=_$("#pnlBaseMasterContainer"),o=_$("#pnlTopNavigationContainer"),s=_$("#pnlBaseMasterTrialPanel"),a=document.documentElement.clientHeight-(o?o.offsetHeight:0)-(s?s.offsetHeight:0)-(baseMasterPageParams.isArticlesPage&&f?f.offsetHeight:0)-getMarginsHeight(u)+"px";u.style.height=a;baseMasterPageParams.isArticlesPage&&(h=document.documentElement.clientWidth+"px",u.style.width=h)}else if(getCurrentUserInfo().isInternalUser){var u=_$("#pnlBaseMasterContainer"),o=_$("#pnlTopNavigationContainer"),s=_$("#pnlBaseMasterTrialPanel"),a=document.documentElement.clientHeight-(o?o.offsetHeight:0)-(s?s.offsetHeight:0)-getMarginsHeight(u)+"px";u.style.height=a;baseMasterPageParams.isArticlesPage&&(h=document.documentElement.clientWidth-(f?f.offsetWidth:0)+"px",u.style.width=h)}baseMasterPageParams.isArticlesPage&&(i=document.getElementById("pnlArticlesNav"),i&&(c=document.getElementById("pnlBaseMasterContainer"),t.isMobileView&&i.parentNode!=e?(e.appendChild(i),setIsAllowArticlesNavCollapse(!1)):t.isMobileView||i.parentNode==c||(c.insertBefore(i,c.children[0]),hiStateBaseMaster.Get("isShowNavPanel")&&hiStateBaseMaster.Get("isAllowCollapseNavPanel")&&setIsAllowArticlesNavCollapse(!0)),i.style.display="",articleEditor.setIsMobileView(t.isMobileView),onArticlesSplitterResized(),articleSelector.setIsMobileView(t.isMobileView),articleSelector.selectTab("tabContents"),hiStateBaseMaster.Get("isShowNavPanel")&&baseMasterMobileMenu.setSelectedItem("menuItemToc")));window.transEditor&&transEditor.setIsMobileView(t.isMobileView);r&&!f&&(r.style.display=i&&hiStateBaseMaster.Get("isShowNavPanel")&&t.isMobileView?"none":"");!t.isMobileView&&window.baseMasterOffCanvasPanel&&window.baseMasterOffCanvasPanel.hide();baseMasterEventHandlers.onMainMenuViewSwitched&&baseMasterEventHandlers.onMainMenuViewSwitched()}function onMenuActivated(n,t,i){var r=getElementPos(t,!0),u=i?popupMenuUser:popupMenuHelp;u.ShowAtPos(r[0]+t.offsetWidth,r[1]+t.offsetHeight);stopBubbling(n)}function onUserMenuDeactivated(){popupMenuUser.Hide()}function onMasterSearching(n,t){var u,i,r;(t.projectExtId=="-2"||t.projectExtId=="-1")&&(u=window.getProjectInfoForBaseMaster,i=null,u&&(r=getProjectInfoForBaseMaster("search"),r!=null&&(i=r.extId),t.projectExtId=i))}function onMasterSearchReported(n,t){t.q&&t.q.trim()&&reportSearchEventToGoogleAnalytics(t.q,getProjectExtIdForSearchUrl(t.projectExtId))}function onCreateTopicClick(){window.articleSelector&&articleSelector.createArticle()}function onCreateProjectClick(){window.createProject&&createProject()}function showContainerBaseMasterLoader(){_$(".BaseMaster_containerLoadingOverlay").style.display="block"}function onMasterContainerEndCallback(){if(baseMasterPageParams.callbackScheduledForProjectExtId=null,initMasterPage(),window.hashHandler&&(window.articleEditor&&articleEditor.clearState(),hashHandler.triggerHashChanged()),window.DynamicLoading&&DynamicLoading.init(),getIsPortalUiBrandingStyleUrlMaskChanged()){var t=getPortalUiBrandingStyleUrlMask(),n=this.getPortalUiProjectExtId();_$("#lnkPortalUiBrandingStyle").href=t.replace("PROJECT_ID",n?n:"")}}function onMasterBeforeSendRequest(n,t){var i=getCurUrlParams()[baseMasterPageParams.readerUiPreviewParamName];i&&(t.requestUrl+=(t.requestUrl.includes("?")?"&":"?")+baseMasterPageParams.readerUiPreviewParamName+"="+i)}function onShowMobileMenuClick(){CssHandler.switchElClass(_$("#pnlBaseMasterNavBarContainer"),"BaseMaster_navBarContainerMobileExpanded");baseMasterEventHandlers.onMainMenuViewSwitched&&baseMasterEventHandlers.onMainMenuViewSwitched()}function onBaseMasterTypeformPopoverFormSubmitted(){sendRequest("POST",baseMasterPageParams.userProfileDontShowAgainSettingsServiceUrl,{isAskguruBetaInviteTypeformPopoverSubmitted:!0});StatsWriter.registerEvent(EventTypes.baseMaster.askguruBetaInviteTypeformSubmitted)}function onBaseMasterTypeformPopoverFormShown(){StatsWriter.registerEvent(EventTypes.baseMaster.askguruBetaInviteTypeformShown)}function onBaseMasterTypeformPopoverFormClosed(){StatsWriter.registerEvent(EventTypes.baseMaster.askguruBetaInviteTypeformClosed)}function onBaseMasterTypeformPopoverFormStepChanged(){StatsWriter.registerEvent(EventTypes.baseMaster.askguruBetaInviteTypeformStepChanged)}function redirectToReaderUiPreviewIfNeeded(n,t){function f(t,i){i?t.searchParams.set(baseMasterPageParams.readerUiPreviewParamName,baseMasterPageParams.readerUiPreviewParamValueEnabled):t.searchParams.delete(baseMasterPageParams.readerUiPreviewParamName);createCookie("latestProjectExtId",n);window.location.replace(t.href)}if(!isIe){var i=new URL(window.location.href),r=i.searchParams.get(baseMasterPageParams.readerUiPreviewParamName),u=arrayContains(baseMasterPageParams.readerUiPreviewProjectExIds,n,isIgnoreCaseEqual)||arrayContains(baseMasterPageParams.pubsExtIds,n,isIgnoreCaseEqual);if(u&&!isIgnoreCaseEqual(r,baseMasterPageParams.readerUiPreviewParamValueDisabled)&&getCurrentUserInfo().isInternalUser)return f(i,!0),!0;if(u&&!isNullOrEmpty(r))return!1;if(r&&t)return f(i,u),!0}return!1}function setPortalUiProjectExtId(n){function e(n){function t(n){showContainerBaseMasterLoader();_$("#hiCurBrandingProjectExtId").value=n;pnlContainerBaseMaster.PerformCallback()}baseMasterPageParams.callbackScheduledForProjectExtId=n;window.pnlContainerBaseMaster?t(n):appendEventHandler(window,"load",function(){t(n)})}var t=getPortalUiProjectExtId(),i,u,f,r;return(this.updateHtmlLangAtt(baseMasterPageParams.culturesByVisiblePubExtIds[n]),redirectToReaderUiPreviewIfNeeded(n,!1))?!0:getCurrentUserInfo().isInternalUser||isIgnoreCaseEqual(baseMasterPageParams.callbackScheduledForProjectExtId,n)?!1:(i=!1,(isIgnoreCaseEqual(t,n)||(!t||!arrayContains(baseMasterPageParams.pubsWithNonGlobalPortalUiExtIds,t,isIgnoreCaseEqual))&&!arrayContains(baseMasterPageParams.pubsWithNonGlobalPortalUiExtIds,n,isIgnoreCaseEqual))&&(!getCurUrlParams()[baseMasterPageParams.readerUiPreviewParamName]||(!t||!arrayContains(baseMasterPageParams.projWithNonGlobalPortalUiExtIds,t,isIgnoreCaseEqual))&&!arrayContains(baseMasterPageParams.projWithNonGlobalPortalUiExtIds,n,isIgnoreCaseEqual))||(createCookie("latestProjectExtId",n),u=getPortalUiBrandingStyleUrlMask(),_$("#lnkPortalUiBrandingStyle").href=u.replace("PROJECT_ID",n?n:""),i=!0),f=readCookie(baseMasterPageParams.readerUiLanguageCookieName),r=baseMasterPageParams.culturesByVisiblePubExtIds[n],r&&!isIgnoreCaseEqual(f,r)&&(createCookie(baseMasterPageParams.readerUiLanguageCookieName,r),i=!0),i&&e(n),i)}function getIsInFullPageCallback(){return window.pnlContainerBaseMaster&&pnlContainerBaseMaster.InCallback()}function showFullPageTransparentOverlay(){window.pnlContainerBaseMaster&&CssHandler.addElClass(pnlContainerBaseMaster.GetMainElement(),"BaseMaster_containerWithTransparentOverlay")}function hideFullPageTransparentOverlay(){window.pnlContainerBaseMaster&&CssHandler.removeElClass(pnlContainerBaseMaster.GetMainElement(),"BaseMaster_containerWithTransparentOverlay")}function getIsPortalUiProjectExtIdSynchronizing(){return!!baseMasterPageParams.callbackScheduledForProjectExtId&&!isIgnoreCaseEqual(baseMasterPageParams.callbackScheduledForProjectExtId,getPortalUiProjectExtId())}function getPortalUiProjectExtId(){return _$("#hiCurBrandingProjectExtId")?_$("#hiCurBrandingProjectExtId").value:baseMasterPageParams.initialPortalUiExtId}function getPortalUiProps(){return{isStickyAppHeader:hiStateBaseMaster.Get("isStickyAppHeader"),isStickyNavPanel:hiStateBaseMaster.Get("isStickyNavPanel"),isStickyArticleHeader:hiStateBaseMaster.Get("isStickyArticleHeader"),fixedWidth:hiStateBaseMaster.Get("fixedWidth")}}function getPortalUiBrandingStyleUrlMask(){return _$("#hiPortalUiBrandingStyleUrlMask")?_$("#hiPortalUiBrandingStyleUrlMask").value:baseMasterPageParams.portalUiBrandingStyleUrlMask}function getIsPortalUiBrandingStyleUrlMaskChanged(){return!isIgnoreCaseEqual(_$("#hiPortalUiBrandingStyleUrlMask").value,baseMasterPageParams.portalUiBrandingStyleUrlMask)}function getCurrentUserInfo(){return{isInternalUser:baseMasterPageParams.isInternalUser,userName:baseMasterPageParams.curUserName,userRoles:baseMasterPageParams.curUserRoles}}function reportSearchEventToGoogleAnalytics(n,t){if(n){var i="/search/?q="+encodeURIComponent(n)+(t?"&p="+t:"");window.ga?ga("send","pageview",i):window._gaq&&_gaq.push(["_trackPageview",i]);window.gtag&&gtag("event","search",{search_term:n,page_location:i})}}(function(){var n;if(window._gaLegacyIds)for(function(){var n=document.createElement("script"),t;n.type="text/javascript";n.async=!0;n.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}(),window._gaq=window._gaq||[],n=0;n<_gaLegacyIds.length;n++)_gaq.push(["_setAccount",_gaLegacyIds[n]]),_gaq.push(["_trackPageview",document.location.pathname]);if(window._gaUniversalIds)for(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),n=0;n<_gaUniversalIds.length;n++)ga("create",_gaUniversalIds[n]),ga("send","pageview");if(window._ga4Ids)for(function(){var t=document.createElement("script"),i;t.type="text/javascript";t.async=!0;t.src="https://www.googletagmanager.com/gtag/js?id="+_ga4Ids[n];i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}(),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},n=0;n<_ga4Ids.length;n++)gtag("js",new Date),gtag("config",_ga4Ids[n])})();
function CHOffCanvasPanel(n,t,i,r){function f(n,t){if(n instanceof Array)for(var i=0;i<n.length;i++)appendEventHandler(document.getElementById(n[i]),"click",t);else appendEventHandler(document.getElementById(n),"click",t)}var u=this;f(t,function(){u.switchState()});f(i,function(){u.switchState()});this.pnlContainerName=n;this.menuButtons=t;appendTouchGestureHandler(document.getElementById(r),"swipe",function(n){n.dir=="left"&&u.switchState()},30)}CHOffCanvasPanel.prototype.switchState=function(n){var t=document.getElementById(this.pnlContainerName);if(CssHandler.switchElClass(t,"CHOffCanvasPanel_openMenu",n),this.onStateChanging)this.onStateChanging(this,{isOpening:n})};CHOffCanvasPanel.prototype.show=function(){this.switchState(!0)};CHOffCanvasPanel.prototype.hide=function(){this.switchState(!1)};
function ButtonHamburger(n){this.showMobileMenuText=n.showMobileMenuText;this.hideMobileMenuText=n.hideMobileMenuText;this.btnMobileMenuName=n.btnMobileMenuName}ButtonHamburger.prototype.setButtonAction=function(n){var i=n?this.showMobileMenuText:this.hideMobileMenuText,t=_$("#"+this.btnMobileMenuName);t.setAttribute("title",i);t.setAttribute("ariaLabel",i);CssHandler.addElClass(t,"isActive",!n)};
function PortalLogo(n){this.lnkLogoName=n.lnkLogoName;this.imgLogoName=n.imgLogoName;this.fileUrlMask=n.fileUrlMask}PortalLogo.prototype.setLogoImgUrl=function(n){var t=_$("#"+this.imgLogoName),i=_$("#"+this.lnkLogoName);t.src=n;i.style.display=t.src?"":"none"};PortalLogo.prototype.onArticlePropertyChanged=function(n,t){var f=_$("#"+this.imgLogoName),r=_$("#"+this.lnkLogoName),s=t.articleObj||t.readerUiDefaultProps,i,h,e,u,o;if(s&&(!t.articleObj||!t.articleObj.propsForInternalUsers)&&(i=s.companyProps,f.src=i.logoFullName?this.fileUrlMask.replace("FILE_NAME",i.logoFullName):"/images/empty.png",r.title=f.alt=i.logoAltText?i.logoAltText:"",r.href=i.logoTargetUrl?i.logoTargetUrl:"/",CssHandler.switchElClass(r,"noclick",!i.isLogoClickable),i.faviconFullName))for(h=this.fileUrlMask.replace("FILE_NAME",i.faviconFullName),e=["shortcut icon","icon"],u=0;u<e.length;u++)o=_$('link[rel="'+e[u]+'"]'),o&&(o.href=h);r.style.display=f.src?"":"none"};
function ReaderUiLanguageSelector(n){this.cmbLanguageSelectorName=n.cmbLanguageSelectorName;this.readerUiLangCookieName=n.readerUiLangCookieName;this.isRedirectUrlInValue=n.isRedirectUrlInValue;this.isSearchPage=n.isSearchPage===1;this.pnlContainerName=n.pnlContainerName;this.supportedCultureNamesByCmbText=JSON.parse(n.supportedCultureNamesByCmbText)}ReaderUiLanguageSelector.prototype.onArticlePropertyChanged=function(n,t){var r,i;if(t.articleObj&&window[this.cmbLanguageSelectorName]){for(r=null,CssHandler.switchElClass(_$("#"+this.pnlContainerName),"ReaderUiLanguageSelector_containerHidden",t.articleObj.versionsFromOtherLanguages.length<2),i=0;i<t.articleObj.versionsFromOtherLanguages.length;i++)t.articleObj.versionsFromOtherLanguages[i].Selected&&(r=t.articleObj.versionsFromOtherLanguages[i].Text);window[this.cmbLanguageSelectorName].setItems(t.articleObj.versionsFromOtherLanguages);window[this.cmbLanguageSelectorName].selectItem(r)}};ReaderUiLanguageSelector.prototype.onSelectedItemChanged=function(n,t){if(t.selectedItem&&t.selectedItem.value)if(updateHtmlLangAtt(this.supportedCultureNamesByCmbText[t.selectedItem.text]),this.isRedirectUrlInValue)window.location.href=t.selectedItem.value;else{if(this.isSearchPage){var i=hashHandler.getHashObj();i&&(i.projectId=null,hashHandler.setHashObj(i))}createCookie(this.readerUiLangCookieName,t.selectedItem.value);window.location.reload(!0)}};
function LightComboBox(n){this.comboBoxName=n.comboBoxName;this.ariaLabelText=n.ariaLabelText;this.pnlWidthTesterName=n.pnlWidthTesterName;this.maskClientRegExPattern=n.maskClientRegExPattern;this.isNegativeMask=n.isNegativeMask=="1";this.applyMask();window[this.comboBoxName].GetItemCount()&&this.adjustControl()}LightComboBox.prototype.onComboBoxInit=function(n){this.ariaLabelText&&n.GetInputElement().setAttribute("aria-label",this.ariaLabelText)};LightComboBox.prototype.getMaskedValue=function(n){if(!this.maskClientRegExPattern)return n;if(this.isNegativeMask)return n.replace(new RegExp(this.maskClientRegExPattern),"");var t=n.match(new RegExp(this.maskClientRegExPattern));return t&&t.length?t[0]:""};LightComboBox.prototype.applyMask=function(){this.maskClientRegExPattern&&(this.selectedItemFullText=window[this.comboBoxName].GetInputElement().value,window[this.comboBoxName].SetText(this.getMaskedValue(this.selectedItemFullText)),this.adjustControl())};LightComboBox.prototype.showDropDown=function(){window[this.comboBoxName].ShowDropDown()};LightComboBox.prototype.onComboBoxSelectedIndexChanged=function(n,t){t.processOnServer=!1;var i=window[this.comboBoxName].GetSelectedItem();this.onSelectedItemChanged&&this.onSelectedItemChanged.call(this,this,{selectedItem:i});this.applyMask();this.adjustControl()};LightComboBox.prototype.onComboBoxDropdown=function(){var t=this,i,r,n;if(this.onItemAuxClick)for(i=window[this.comboBoxName].GetItem(0).listEditBase,r=i.listTable.children,n=0;n<r.length;n++)appendEventHandler(r[n],"auxclick",function(n){var r={cmbList:i,itemIndex:n.target.parentNode.itemIndex,htmlEvent:n};t.onItemAuxClick(t,r)});this.maskClientRegExPattern&&(window[this.comboBoxName].SetText(this.selectedItemFullText),setTimeout(function(){window[t.comboBoxName].SetCaretPosition(0)},0))};LightComboBox.prototype.onComboBoxQueryCloseUp=function(){this.maskClientRegExPattern&&this.applyMask()};LightComboBox.prototype.onComboBoxCloseUp=function(){if(this.onCloseUp)this.onCloseUp(this,{})};LightComboBox.prototype.selectItem=function(n,t){for(var i=window[this.comboBoxName],r=null,u=0;u<i.GetItemCount();u++)if(r=i.GetItem(u),isIgnoreCaseEqual(r.text,n)){i.SetSelectedItem(r);!t&&this.onSelectedItemChanged&&this.onSelectedItemChanged.call(this,this,{});this.applyMask();this.adjustControl();return}};LightComboBox.prototype.setValue=function(n){window[this.comboBoxName].SetValue(n);this.applyMask();this.adjustControl()};LightComboBox.prototype.setItems=function(n){n||(n=[]);window[this.comboBoxName].ClearItems();window[this.comboBoxName].BeginUpdate();for(var t=0;t<n.length;t++)window[this.comboBoxName].AddItem(n[t].Text,n[t].Value?n[t].Value:n[t].Text,n[t].ImageUrl?n[t].ImageUrl:null);window[this.comboBoxName].EndUpdate();this.adjustControl()};LightComboBox.prototype.getSelectedItemValue=function(){return this.selectedItemFullText?this.selectedItemFullText:window[this.comboBoxName].GetValue()};LightComboBox.prototype.setVisible=function(n){window[this.comboBoxName].SetVisible(n);n&&this.adjustControl()};LightComboBox.prototype.adjustControl=function(){var r=window[this.comboBoxName].GetInputElement(),i=window[this.comboBoxName].GetMainElement(),h=i.style.display,u=window.getComputedStyle(r),n=_$("#"+this.pnlWidthTesterName),e=i.offsetWidth-getClientWidth(r),t,f,o,s;n.style.fontSize=u.fontSize;n.style.fontFamily=u.fontFamily;n.style.textTransform=u.textTransform;n.style.paddingRight=e+"px";n.innerHTML=escapeMarkup(r.value);n.style.display="block";i.style.display="none";t=getClientWidth(n.parentNode);f=Math.max(0,t-n.offsetWidth-1);t-=f;f==0&&t++;o=n.offsetWidth+1;n.style.display="none";i.style.display=h;s=o+e;window[this.comboBoxName].SetWidth(Math.min(t,s))};
function ProjectName(n){this.cmbProjectNameName=n.cmbProjectNameName;this.lblProjectNameName=n.lblProjectNameName}ProjectName.prototype.adjustControl=function(){window[this.cmbProjectNameName].adjustControl()};ProjectName.prototype.onOtherArticleVersionSelected=function(n){var r=n.getSelectedItemValue(),i,t;hashHandler&&r!=null&&(i=r.split(","),t=hashHandler.getHashObj(),t.externalId=i[0],t.projectId=i[1],t.anchor=null,t.reviewCommentId=null,t.searchQuery=null,hashHandler.setHashObj(t))};ProjectName.prototype.onArticlePropertyChanged=function(n,t){var i,u,r;t.articleObj&&(i=t.articleObj&&t.articleObj.versionsFromOtherPubs.length>1,window[this.cmbProjectNameName].setVisible(i),window[this.cmbProjectNameName].setItems(i&&t.articleObj?t.articleObj.versionsFromOtherPubs:null),t.articleObj&&window[this.cmbProjectNameName].selectItem(t.articleObj.projectName,!0),u=t.articleObj&&t.articleObj.versionsFromOtherPubs.length<=1,r=_$("#"+this.lblProjectNameName),r.style.display=u?"":"none",r.innerHTML=t.articleObj?t.articleObj.versionsFromOtherPubs.length?escapeMarkup(t.articleObj.versionsFromOtherPubs[0].Text):t.articleObj.projectName:"")};
function SearchBoxComplex(n){this.searchBoxName=n.searchBoxName}SearchBoxComplex.prototype.onEdtSearchDoSearch=function(){var t=window[this.searchBoxName].getQuery(),n;t&&((window[this.searchBoxName].setQuery(""),n={q:t,projectExtId:null},n.isCancel=!1,GlobalEvents.trigger("Searching",this,n),n.isCancel)||(GlobalEvents.trigger("DoSearch",this,{q:t,projectExtId:n.projectExtId,targetControl:null}),this.openPopup()))};SearchBoxComplex.prototype.onEdtSearchClick=function(){this.openPopup()};SearchBoxComplex.prototype.openPopup=function(){GlobalEvents.trigger("SearchPopupOpening",this,{})};SearchBoxComplex.prototype.onBtnSearchMobileClick=function(){this.openPopup()};
function SearchBox(n,t){this.edtQueryName=n;this.isEnableCompletion=t=="1";this.isEnableCompletion||window[this.edtQueryName].setIsShowCompletionOnFocus(!1)}SearchBox.prototype.focus=function(){window[this.edtQueryName].focus()};SearchBox.prototype.setQuery=function(n){window[this.edtQueryName].setFilterText(n)};SearchBox.prototype.getQuery=function(){return window[this.edtQueryName].getFilterText()};SearchBox.prototype.setProjectId=function(n){window[this.edtQueryName].setProjectId(n)};SearchBox.prototype.setVisible=function(n){window[this.edtQueryName].setVisible(n)};SearchBox.prototype.onArticleSelectedInCompletion=function(n){n.setFilterText("");window.location.href=window[this.edtQueryName].getSelectedItem().vals.url};SearchBox.prototype.onGetCompletions=function(n,t){if(this.onDoSearch)this.onDoSearch(this,{searchQuery:window[this.edtQueryName].getFilterText(),isTriggeredByTimer:t.isTriggeredByTimer})};SearchBox.prototype.onEditorKeyDown=function(n,t){if(this.onKeyDown)this.onKeyDown(this,t)};SearchBox.prototype.onContainerClick=function(n,t){if(this.onClick)this.onClick(this,t)};
function ArticleCompletionBox(n){this.editorName=n.editorName;this.serviceUrl=n.serviceUrl;this.recentArticlesType=n.recentArticlesType;this.stateName=n.stateName;this.lblArticlesAvailableName=n.lblArticlesAvailableName;this.isShowSelectedUrl=n.isShowSelectedUrl=="1";this.maxResultCount=parseInt(n.maxResultCount)}ArticleCompletionBox.prototype.getFilterText=function(){return window[this.editorName].getFilterText()};ArticleCompletionBox.prototype.setFilterText=function(n){window[this.editorName].setFilterText(n)};ArticleCompletionBox.prototype.setEnabled=function(n){window[this.editorName].setEnabled(n)};ArticleCompletionBox.prototype.setVisible=function(n){window[this.editorName].setVisible(n);var t=_$("#"+this.lblArticlesAvailableName);t&&(t.style.display=n?"":"none")};ArticleCompletionBox.prototype.getProjectId=function(){return window[this.stateName].Get("projectId")?window[this.stateName].Get("projectId"):null};ArticleCompletionBox.prototype.setProjectId=function(n){window[this.stateName].Set("projectId",isNaN(parseInt(n))?null:n)};ArticleCompletionBox.prototype.setIsShowCompletionOnFocus=function(n){window[this.editorName].setIsShowCompletionOnFocus(n)};ArticleCompletionBox.prototype.setRecentArticlesType=function(n){this.recentArticlesType=n};ArticleCompletionBox.prototype.validate=function(){return window[this.editorName].validate()};ArticleCompletionBox.prototype.getSelectedItem=function(){return window[this.editorName].getSelectedItem()};ArticleCompletionBox.prototype.getArticleUrl=function(){var n=window[this.editorName].getSelectedItem();return n?n.vals.url:""};ArticleCompletionBox.prototype.getArticleId=function(){var n=window[this.editorName].getSelectedItem();return n?n.vals.internalId:""};ArticleCompletionBox.prototype.getArticleProjectId=function(){var n=window[this.editorName].getSelectedItem();return n?parseInt(n.vals.projectId):null};ArticleCompletionBox.prototype.setArticleUrl=function(n){return window[this.editorName].setSelectedItem(n)};ArticleCompletionBox.prototype.setCurrentArticleInfo=function(n,t){this.curArticleUrl=n;this.curArticleId=t};ArticleCompletionBox.prototype.getCurrentArticleInfo=function(){return{url:this.curArticleUrl,id:this.curArticleId}};ArticleCompletionBox.prototype.onCompletionsGet=function(n,t){var i,u,f,r;if(t.isCancel=!1,this.onGetCompletions)this.onGetCompletions(this,t);if(!t.isCancel&&this.serviceUrl)for(i=this.serviceUrl.replace(/{{QUERY}}/g,t.filter?encodeURIComponent(t.filter):"").replace(/{{CUR_ARTICLE_ID}}/g,this.curArticleId?this.curArticleId:"0").replace(/{{RECENT_ARTICLES_TYPE}}/g,this.recentArticlesType).replace(/{{MAX_RESULTS_COUNT}}/g,t.isShowMore?0:this.maxResultCount),u=this.getProjectId(),i=i.replace(/{{PROJECT_ID}}/g,u?u:"0"),f=JSON.parse(sendRequest("GET",i,null,!1).responseText),r=0;r<f.length;r++)t.completions.push(f[r])};ArticleCompletionBox.prototype.onClickButton=function(n,t){if(this.onButtonClick)this.onButtonClick(n,t)};ArticleCompletionBox.prototype.onEditorKeyDown=function(n,t){if(this.onKeyDown)this.onKeyDown(n,t)};ArticleCompletionBox.prototype.onSelectedItemChanged=function(){if(window[this.stateName].Set("selectedVals",window[this.editorName].getSelectedItem().vals),this.isShowSelectedUrl&&this.getArticleUrl()&&this.setFilterText(this.getArticleUrl()),this.onArticleChanged)this.onArticleChanged(this,{})};ArticleCompletionBox.prototype.focus=function(){window[this.editorName].focus()};
function CHListBox(n,t,i){this.pnlContainerName=n;this.opts=mergeOptions(CHListBox.defaults,t);this.setItems(i);this.opts.selectItemByText&&this.selectItemByText(this.opts.selectItemByText);this.setReadOnly(!!this.isReadOnly);var r=this;appendEventHandler(document.getElementById(this.pnlContainerName),"click",function(n){r.onItemClicked(r,n||window.event)})}CHListBox.defaults={selectItemByText:null,isHighlightSelectedItem:!0,isEscapeNodeText:!0,actionButtons:[],cssClasses:{container:"CHListBox_container",item:"CHListBox_item",selectedItem:"CHListBox_itemSelected",disabledItem:"CHListBox_itemDisabled",groupName:"CHListBox_groupName",containerReadOnly:"CHListBox_containerReadOnly",actionButtonsContainer:"CHListBox_actionButtonsContainer",actionButton:"CHListBox_actionButton"},templates:{item:"{{TEXT}}",isAllowItemFocusFromKeyboard:!0}};CHListBox.prototype.changeSelectionHighlight=function(){var t=this.selectedItem?this.selectedItem.el:null,n;if(this.opts.isHighlightSelectedItem){for(n=0;n<this.items.length;n++)this.items[n].el.className=this.items[n].el.className.replace(new RegExp("\\s*"+this.opts.cssClasses.selectedItem),"");t&&(t.className+=" "+this.opts.cssClasses.selectedItem)}};CHListBox.prototype.selectItemInternal=function(n,t,i){var r=this.getItemByValue(n,t);r?(this.selectedItem=r,i&&this.selectedItem.el.scrollIntoView()):this.selectedItem=null;this.changeSelectionHighlight()};CHListBox.prototype.onClickActionButton=function(n){if(this.onActionButtonClick)this.onActionButtonClick(this,n)};CHListBox.prototype.onItemClicked=function(n,t){var i,r,u,f;if(getMouseBtn(t)=="left"&&!this.isReadOnly&&(i=t.target||t.srcElement,!i.tagName||i.tagName.toLowerCase()!="a"||isIgnoreCaseEqual(i.href,"javascript:void(0)"))){for(r=null;!i.getAttribute("data-item")&&i.parentNode&&i!=document.getElementById(this.pnlContainerName);)i=i.parentNode;for(u=0;u<this.items.length;u++)if(this.items[u].el==i){r=this.items[u];break}if(r!=null&&!CssHandler.getIsElHasClass(i,this.opts.cssClasses.disabledItem)){if(this.selectedItem!=r&&this.onSelectedItemChanging){f={isCancel:!1,oldItem:this.selectedItem,newItem:r};this.onSelectedItemChanging(this,f);if(f.isCancel)return}if(this.selectedItem=r,this.changeSelectionHighlight(),this.onSelectedItemChanged)this.onSelectedItemChanged(this,{})}}};CHListBox.prototype.setItems=function(n){var f,e,s,t,o,i,h,l,a,c,u,r,v;if(this.selectedItem=null,n&&n.length)this.items=n;else{this.items=[];return}for(f=document.getElementById(this.pnlContainerName);f.firstChild;)f.removeChild(f.firstChild);for(e=document.createElement("ul"),e.className=this.opts.cssClasses.container,f.appendChild(e),s=0;s<this.items.length;s++){if(t=this.items[s],!t.vals&&t.valsSerialized&&(t.vals=JSON.parse(t.valsSerialized)),t.beginGroupText&&(o=document.createElement("div"),o.className=this.opts.cssClasses.groupName,t.vals&&t.vals._customGroupNameCssClass&&CssHandler.addElClass(o,t.vals._customGroupNameCssClass),o.innerHTML=t.beginGroupText,e.appendChild(o)),t.text){if(i=document.createElement("li"),this.opts.templates.isAllowItemFocusFromKeyboard&&(i.setAttribute("tabindex","0"),appendEventHandler(i,"keydown",function(){(event.keyCode==13||event.keyCode==32)&&this.click()})),i.className=this.opts.cssClasses.item,t.imageUrl&&(i.style.backgroundImage="url('"+t.imageUrl+"')",i.style.backgroundRepeat="no-repeat"),h=this.opts.templates.item.replace("{{TEXT}}",this.opts.isEscapeItemText?escapeMarkup(t.text):t.text),t.vals){for(l in t.vals)h=h.replace(new RegExp("{{"+l+"}}","g"),t.vals[l]);t.vals._customCssClass&&CssHandler.addElClass(i,t.vals._customCssClass)}(!t.isEnabled?!0:t.isEnabled)||CssHandler.addElClass(i,this.opts.cssClasses.disabledItem);i.title=t.vals&&t.vals._toolTip?t.vals._toolTip:t.text;i.innerHTML=h;i.setAttribute("data-item","yes");e.appendChild(i);t.el=i}if(t.itemClass&&CssHandler.addElClass(t.el,t.itemClass),this.opts.actionButtons.length)for(a=this,c=document.createElement("div"),c.className=this.opts.cssClasses.actionButtonsContainer,t.el.appendChild(c),u=0;u<this.opts.actionButtons.length;u++){function y(n,t){appendEventHandler(n,"click",function(n){t.htmlEvent=n;a.onClickActionButton(t);return stopBubbling(n)})}r=document.createElement("button");r.type="button";r.className=this.opts.cssClasses.actionButton;r.style.backgroundImage="url('"+this.opts.actionButtons[u].imgUrl+"')";CssHandler.addElClass(r,this.opts.actionButtons[u].cssClass);r.title=this.opts.actionButtons[u].tooltip;appendEventHandler(r,"dragstart",function(n){return stopBubbling(n)});v={item:t,buttonId:a.opts.actionButtons[u].id};y(r,v);c.appendChild(r)}}};CHListBox.prototype.setVisible=function(n){var t=document.getElementById(this.pnlContainerName);t.style.display=n?"":"none"};CHListBox.prototype.setReadOnly=function(n){this.isReadOnly=n;var t=document.getElementById(this.pnlContainerName);CssHandler.switchElClass(t,this.opts.cssClasses.containerReadOnly,!!this.isReadOnly)};CHListBox.prototype.getItemIndexByValue=function(n,t){if(typeof t=="undefined")return-1;for(var i=0;i<this.items.length;i++)if(!n&&isIgnoreCaseEqual(this.items[i].text,t)||n&&this.items[i].vals[n]==t)return i;return-1};CHListBox.prototype.getItemByValue=function(n,t){if(typeof t=="undefined")return-1;var i=this.getItemIndexByValue(n,t);return i>-1?this.items[i]:null};CHListBox.prototype.getItems=function(){return this.items};CHListBox.prototype.getSelectedItem=function(){return this.selectedItem};CHListBox.prototype.selectItemByText=function(n,t){this.selectItemInternal(null,n,t)};CHListBox.prototype.selectItemByVal=function(n,t,i){this.selectItemInternal(n,t,i)};
function AutoCompletionBox(n,t){var u,r,f,i;this.pnlContainerName=n.pnlContainerName;this.pnlCompletionsName=n.pnlCompletionsName;this.pnlCompletionsListName=n.pnlCompletionsListName;this.editorName=n.editorName;this.stateName=n.stateName;this.startTypingText=n.startTypingText;this.opts=mergeOptions(AutoCompletionBox.defaults,t);u={isHighlightSelectedItem:!1,templates:{item:this.opts.completionItemTemplate,groupName:"<div class='{{GROUP_NAME_CLASS}}'>{{TEXT}}<\/div>",isAllowItemFocusFromKeyboard:this.opts.isAllowCompletionItemFocusFromKeyboard}};this.listBox=new CHListBox(this.pnlCompletionsListName,u);i=this;this.listBox.onSelectedItemChanging=function(n,t){i.onSelectedCompletionChanging(n,t)};r=window[this.editorName].getMainElement();f={wnd:document.getElementById(this.pnlCompletionsName),target:r,position:"bottom",showAction:"none",hideAction:"none",isEffectAppear:!1,isEffectExpand:!1,isAddShadow:!1};this.popup=new PopupWindow(f);i=this;this.popup.onShowing=function(n,t){i.populateCompletions(n,t)};setTimeout(function(){i.onEditorClick&&appendEventHandler(r,"click",function(){i.onEditorClick(i,{})})},100)}AutoCompletionBox.defaults={isListOnly:!1,completionItemTemplate:"{{TEXT}}",isAllowCompletionItemFocusFromKeyboard:!0};AutoCompletionBox.prototype.getSelectedItem=function(){var n=window[this.stateName].Get("selectedVals"),t=window[this.editorName].getFilterText();return n?{text:t,vals:n}:null};AutoCompletionBox.prototype.setSelectedItem=function(n){var i=null,t,r;if(n)if(this.opts.isListOnly){if(t={completions:[],filter:n},this.onGetCompletions)this.onGetCompletions(this,t);t.completions.length>0&&(t.completions[0].vals=JSON.parse(t.completions[0].valsSerialized),t.completions[0].vals&&(i=t.completions[0]))}else i={text:n};if(i)this.onSelectedCompletionChanging(this,{oldItem:this.getSelectedItem(),newItem:i,isSuppressEvent:!0});else r={isSuppressEvent:!0},window[this.editorName].applyFilter(null,r);return i};AutoCompletionBox.prototype.focus=function(){window[this.editorName].focus()};AutoCompletionBox.prototype.setIsShowCompletionOnFocus=function(n){this.isDontShowCompletion=!n};AutoCompletionBox.prototype.setEnabled=function(n){window[this.editorName].setEnabled(n)};AutoCompletionBox.prototype.setVisible=function(n){window[this.editorName].setVisible(n)};AutoCompletionBox.prototype.getFilterText=function(){return window[this.editorName].getFilterText()};AutoCompletionBox.prototype.setFilterText=function(n){window[this.editorName].setFilterText(n)};AutoCompletionBox.prototype.applyFilter=function(n,t){window[this.editorName].applyFilter(n,t)};AutoCompletionBox.prototype.setProjectId=function(n,t){window[this.editorName].setProjectId(n,t)};AutoCompletionBox.prototype.showCustomFilterDialog=function(){window[this.editorName].showCustomFilterDialog()};AutoCompletionBox.prototype.validate=function(){var n=!0;return window[this.editorName].getFilterText()?!this.opts.isListOnly||window[this.stateName].Get("selectedVals")&&window[this.editorName].getIsCustomFilter()||(n=!1):n=!1,window[window[this.editorName].filterTextBoxName].SetIsValid(n),n};AutoCompletionBox.prototype.hideCompletions=function(){this.popup.hide()};AutoCompletionBox.prototype.showCompletions=function(){this.popup.show()};AutoCompletionBox.prototype.populateCompletions=function(n,t){var i={completions:[],filter:window[this.editorName].getFilterText(),isShowMore:t.isShowMore,isTriggeredByTimer:t.isTriggeredByTimer,startTypingText:t.startTypingText},r;if(this.onGetCompletions)this.onGetCompletions(this,i);r=i.startTypingText||this.startTypingText;i.completions.length<1&&!r?t.isCancel=!0:i.completions.length<1?this.listBox.setItems([{beginGroupText:r,imageUrl:null,text:null,valsSerialized:"null"}]):this.listBox.setItems(i.completions)};AutoCompletionBox.prototype.onChangedFilter=function(n,t){if(t.filter||window[this.editorName].focus(),window[this.stateName].Set("selectedVals",{}),this.populateCompletions(n,t),this.onFilterChanged)this.onFilterChanged(n,t)};AutoCompletionBox.prototype.onSelectedCompletionChanging=function(n,t){var i,r;if(t.newItem&&t.newItem.vals&&t.newItem.vals._isShowMoreItem){t.isShowMore=!0;this.isIgnoreEditorLosingFocus=!0;this.populateCompletions(n,t);this.isIgnoreEditorLosingFocus=!1;t.isCancel=!0;return}if(this.onSelectedItemChanging){i={newItem:t.newItem,isCancel:!1};this.onSelectedItemChanging(this,i);if(i.isCancel)return}if(window[this.stateName].Set("selectedVals",t.newItem&&t.newItem.vals?t.newItem.vals:{}),t.newItem&&(r={isCustom:this.opts.isListOnly,isSuppressEvent:!0},window[this.editorName].applyFilter(t.newItem.text,r)),this.hideCompletions(),!t.isSuppressEvent&&this.onSelectedItemChanged)this.onSelectedItemChanged(this,{})};AutoCompletionBox.prototype.onEditorKeyDown=function(n,t){if(this.onKeyDown)this.onKeyDown(n,t)};AutoCompletionBox.prototype.onEditorButtonClicked=function(n,t){if(this.onButtonClick)this.onButtonClick(this,t)};AutoCompletionBox.prototype.onEditorGotFocus=function(){if(this.onGotFocus){var n={isCancel:!1};this.onGotFocus(this,n);if(n.isCancel)return}this.isDontShowCompletion||this.popup.show()};AutoCompletionBox.prototype.onEditorLosingFocus=function(){if(!this.isIgnoreEditorLosingFocus){var n=this;setTimeout(function(){var t=document.activeElement;getIsChildOf(t,document.getElementById(n.pnlContainerName))||(n.onLostFocus&&n.onLostFocus.call(n,n,{}),setTimeout(function(){n.hideCompletions()},200))},0)}};
function QuickFilterBox(n,t,i,r,u,f,e,o,s){this.filterTextBoxName=n;this.timeout=t;this.isAllowCustomFilters=i;this.popupControlName=r;this.filterControlName=u;this.defaultCustomFilterText=this.customFilterText=f;this.isShowCustomFilterText=e;this.stateName=o;this.ariaLabel=s;var h=this;appendEventHandler(window[this.filterTextBoxName].GetMainElement(),"focusin",function(){setTimeout(function(){if(h.onGotFocus)h.onGotFocus(h,{})},0)});appendEventHandler(window[this.filterTextBoxName].GetMainElement(),"focusout",function(){setTimeout(function(){if(h.onLostFocus)h.onLostFocus(h,{})},0)})}QuickFilterBox.prototype.getMainElement=function(){return window[this.filterTextBoxName].GetMainElement()};QuickFilterBox.prototype.getFilterText=function(){return window[this.filterTextBoxName].GetValue()};QuickFilterBox.prototype.setFilterText=function(n){window[this.filterTextBoxName].SetValue(n)};QuickFilterBox.prototype.getIsCustomFilter=function(){var n=this.getFilterExpressionInfo();return n?n.isCustomExpression:!1};QuickFilterBox.prototype.setProjectId=function(n,t){var i=this.isTransProject!=t;window[this.stateName].Set("projectId",n);i&&this.updateFilterControlData(window[this.filterControlName].GetFilterExpression())};QuickFilterBox.prototype.getHeight=function(){return window[this.filterTextBoxName].GetHeight()};QuickFilterBox.prototype.setEnabled=function(n){var i,t;for(window[this.filterTextBoxName].SetEnabled(n),i=window[this.filterTextBoxName].GetMainElement().querySelectorAll(".QuickFilterBox_button"),t=0;t<i.length;t++)i[t].disabled=!n};QuickFilterBox.prototype.setVisible=function(n){window[this.filterTextBoxName].SetVisible(n)};QuickFilterBox.prototype.focus=function(){window[this.filterTextBoxName].Focus()};QuickFilterBox.prototype.setCaretPosition=function(n){window[this.filterTextBoxName].SetCaretPosition(n)};QuickFilterBox.prototype.applyFilter=function(n,t){n||(n="");t||(t={});this.customFilterText=t.customFilterText?t.customFilterText:this.defaultCustomFilterText;window[this.filterTextBoxName].SetValue(t.isCustom&&n?this.isShowCustomFilterText?n:this.customFilterText:n);var i=this.getFilterExpressionInfo();if(i||(i={}),i.isCustomExpression=t.isCustom,i.isSupportedByFilterControl=t.isSupportedByFilterControl,this.setFilterExpressionInfo(i),window[this.filterTextBoxName].readOnly=t.isCustom&&n,window[this.filterTextBoxName].GetInputElement().readOnly=t.isCustom&&n,this.updateFilterControlData(t.isCustom&&i.isSupportedByFilterControl?n:""),this.onFilterChanged&&!t.isSuppressEvent)this.onFilterChanged(this,{filter:n,isCustom:t.isCustom,isSupportedByFilterControl:t.isSupportedByFilterControl,isTriggeredByTimer:t.isTriggeredByTimer})};QuickFilterBox.prototype.getFilterExpressionInfo=function(){var n=window[this.stateName].Get("filterExpressionInfo");return n?JSON.parse(window[this.stateName].Get("filterExpressionInfo")):null};QuickFilterBox.prototype.setFilterExpressionInfo=function(n){window[this.stateName].Set("filterExpressionInfo",JSON.stringify(n))};QuickFilterBox.prototype.onTextBoxInit=function(n){this.ariaLabel&&n.GetInputElement().setAttribute("aria-label",this.ariaLabel);this.setEnabled(n.GetEnabled())};QuickFilterBox.prototype.onTextBoxButtonClick=function(n,t){if(t.processOnServer=!1,t.buttonType="",t.buttonIndex!=1&&(this.isAllowCustomFilters||t.buttonIndex!=0))t.buttonIndex<2?t.buttonType="dropdown":t.buttonIndex==2&&this.applyFilter(window[this.filterTextBoxName].GetValue());else{t.buttonType="clear";var i=n.GetValue();n.SetValue("");i!=""&&i!=null&&this.applyFilter("")}if(this.onButtonClicked)this.onButtonClicked(n,t)};QuickFilterBox.prototype.onTextBoxKeyDown=function(n,t){if(this.onKeyDown)this.onKeyDown(n,t);switch(t.htmlEvent.keyCode){case 13:return this.applyFilter(window[this.filterTextBoxName].GetValue()),stopBubbling(t.htmlEvent);default:this.oldQuickFilterBoxValue=window[this.filterTextBoxName].GetValue()}};QuickFilterBox.prototype.onTextBoxKeyUp=function(n,t){var r=t.htmlEvent.charCode?t.htmlEvent.charCode:t.htmlEvent.keyCode,u,i;if(this.getIsCustomFilter()&&(r==8||r==46)){this.applyFilter("");return}if(u=window[this.filterTextBoxName].GetInputElement().value,!isIgnoreCaseEqual(u,this.oldQuickFilterBoxValue)){if(!this.timeout)return;this.timer&&clearTimeout(this.timer);i=this;this.timer=setTimeout(function(){i.applyFilter(window[i.filterTextBoxName].GetInputElement().value,{isTriggeredByTimer:!0})},this.timeout)}};QuickFilterBox.prototype.showCustomFilterDialog=function(){this.previousFilter=window[this.filterControlName].GetFilterExpression();window[this.popupControlName].ShowWindow(window[this.popupControlName].GetWindowByName("wndCustomFilter"))};QuickFilterBox.prototype.updateFilterControlData=function(n){window[this.popupControlName]&&window[this.popupControlName].PerformWindowCallback(window[this.popupControlName].GetWindowByName("wndCustomFilter"),n)};QuickFilterBox.prototype.onCustomFilterDialogButtonClick=function(n,t){t.buttonName=="ok"&&(this.previousFilter=null,window[this.filterControlName].Apply())};QuickFilterBox.prototype.onCustomFilterDialogHidden=function(){this.previousFilter&&this.updateFilterControlData(this.previousFilter)};QuickFilterBox.prototype.onCustomFilterApplied=function(n,t){this.applyFilter(t.filterExpression,{isCustom:!0,isSupportedByFilterControl:!0})};
function MainMenu(n){this.menuName=n.menuName;this.pnlProjectsPopupName=n.pnlProjectsPopupName;this.projectsPageLink=n.projectsPageLink;this.triggerItemsLoaded()}MainMenu.prototype.onMainMenuItemAuxClick=function(n,t){t.htmlEvent.button==1&&t.itemId=="menuItemProjects"&&window.open(this.projectsPageLink,"_blank")};MainMenu.prototype.onMainMenuItemClick=function(n,t){switch(t.item.id){case"menuItemProjects":if(this.popupProjects&&this.popupProjects.isShowing)this.popupProjects.hide();else{var i={wnd:document.getElementById(this.pnlProjectsPopupName),position:"right",showAction:"none",hideAction:"click",isEffectAppear:!0,isEffectExpand:!0,isAddShadow:!1,target:t.el};this.popupProjects=new PopupWindow(i);this.popupProjects.show()}break;default:n.getIsMobileView()&&t.item.c&&t.item.c.length>0&&!(t.item.vals&&t.item.vals._url!="javascript:void(0)")&&(n.triggerItemExpanding(t.item),n.getTree(t.item.id).expandNode(t.item.id))}onMasterMainMenuItemClick(n,t)};MainMenu.prototype.onProjectsPopupActionButtonClicked=function(n,t){window[this.pnlProjectsPopupName].InCallback()||window[this.pnlProjectsPopupName].PerformCallback(t.item.vals._docId)};MainMenu.prototype.triggerItemsLoaded=function(){window.GlobalEvents&&GlobalEvents.trigger("MainMenuItemsLoaded",this,{menuItems:window[this.menuName].getItems()})};MainMenu.prototype.onArticlePropertyChanged=function(n,t){var i=t.articleObj||t.readerUiDefaultProps,r;i&&i.mainMenuItems&&(window[this.menuName].setItems(i.mainMenuItems),r=window[this.menuName].getOptions(),r.isShowPopupOnHover=i.isShowMainMenuSubmenuPopupsOnHover,window[this.menuName].setOptions(r),this.triggerItemsLoaded())};
function ProgressLine(n){this.containerCssClass=n.containerCssClass;this.targetElementName=n.targetElementName;this.position=n.position;this.associatedControlName=n.associatedControlName}ProgressLine.prototype.adjustControl=function(){this.pnlProgress&&this.show()};ProgressLine.prototype.show=function(n){var u;n&&(this.associatedControl=n);u=!!this.pnlProgress;u||(this.pnlProgress=document.createElement("div"));this.pnlProgress.className=this.containerCssClass;var t=this.targetElementName?_$("#"+this.targetElementName):this.associatedControlName?window[this.associatedControlName].GetMainElement():this.associatedControl.GetMainElement(),i=getElementPos(t,!1,t.offsetParent),r=getIsAbsPos(t);this.pnlProgress.style.left=(r?0:i[0])+"px";this.pnlProgress.style.right=r||!t.offsetParent?0:t.offsetParent.offsetWidth-(i[0]+t.offsetWidth)+"px";u||(this.pnlBlockerOverlay=document.createElement("div"));u||t.appendChild(this.pnlProgress);switch(this.position){case"top":this.pnlBlockerOverlay.style.top=this.pnlProgress.style.top=(r?0:i[1])+"px";break;case"bottom":this.pnlProgress.style.top=(r?0:i[1])+t.offsetHeight+"px";this.pnlBlockerOverlay.style.top=r?0:i[1]+"px";break;case"manual":if(!this.pnlProgress.offsetParent)return;this.pnlProgress.style.position="absolute";let n=this.manualPositionTop,u=this.manualPositionLeft,f=this.manualPositionRight;if(t.offsetParent!=document.body){let t=getElementPos(this.pnlProgress.offsetParent,!0);n-=t[1];u-=t[0];f-=document.documentElement.offsetWidth-this.pnlProgress.offsetParent.getBoundingClientRect().width-t[0]}this.pnlProgress.style.top=n+"px";this.pnlProgress.style.left=u+"px";this.pnlProgress.style.right=f+"px";this.pnlBlockerOverlay.style.top=r?0:i[1]+"px"}this.pnlBlockerOverlay.style.position="absolute";this.pnlBlockerOverlay.style.left=this.pnlProgress.style.left;this.pnlBlockerOverlay.style.right=this.pnlProgress.style.right;this.pnlBlockerOverlay.style.height=t.offsetHeight+"px";u||t.appendChild(this.pnlBlockerOverlay)};ProgressLine.prototype.setPosition=function(n){this.manualPositionTop=n.top;this.manualPositionLeft=n.left;this.manualPositionRight=n.right;this.adjustControl()};ProgressLine.prototype.hide=function(){if(this.pnlProgress&&this.pnlProgress.parentNode)try{this.pnlBlockerOverlay.parentNode.removeChild(this.pnlBlockerOverlay);this.pnlProgress.parentNode.removeChild(this.pnlProgress);this.pnlProgress=null}catch(n){}};ProgressLine.prototype.onBeginCallback=function(n){this.show(n)};
function ArticleSelector(n){if(this.pnlContainerName=n.pnlContainerName,this.pnlContentsName=n.pnlContentsName,this.pnlIndexName=n.pnlIndexName,this.pnlHeaderName=n.pnlHeaderName,this.pnlFooterName=n.pnlFooterName,this.tocTreeName=n.tocTreeName,this.indexViewerName=n.indexViewerName,this.isAuthor=n.isAuthor=="1",this.curTabName="tabContents",!getIsPortalUiProjectExtIdSynchronizing()){if(!this.isAuthor){var t=this;ArticleSelector.removeScrollHandler&&ArticleSelector.removeScrollHandler();ArticleSelector.removeScrollHandler=appendEventHandler(window,"scroll",function(){requestAnimationFrame(function(){t.onReaderScroll.call(t)})},!0,!0);GlobalEvents.addEventHandler("ArticleEditorHeaderStickyChanged",function(){t.adjustControl.call(t)})}window[this.tocTreeName].setShowIndexLink(!0);this.adjustControl()}}ArticleSelector.prototype.setVisible=function(n){document.getElementById(this.pnlContainerName).style.display=n?"":"none";n&&this.adjustControl()};ArticleSelector.prototype.getVisible=function(){return document.getElementById(this.pnlContainerName).style.display!="none"};ArticleSelector.prototype.resizeContents=function(n,t){switch(this.curTabName){case"tabContents":window[this.tocTreeName]&&window[this.tocTreeName].setHeight(t);break;case"tabIndex":window[this.indexViewerName]&&window[this.indexViewerName].setHeight(t)}};ArticleSelector.prototype.onReaderScroll=function(){var t=getPortalUiProps(),f,e,r,o;if(t.isStickyNavPanel){var n=document.getElementById(this.pnlContainerName).parentNode,u=getScrollTop(),i=!1;t.isStickyAppHeader&&t.isStickyArticleHeader&&!this.appFooterOffsetTop||(f=0,t.isStickyAppHeader&&(e=_$("#pnlBaseMasterReaderPreviewPanel"),f=this.appHeaderHeight+(e?e.offsetHeight:0)),r=!isNaN(parseInt(this.appFooterOffsetTop))&&this.appFooterOffsetTop-u<this.articleSelectorHeight?null:Math.max(f,this.parentOffsetTop-u),i=parseInt(n.style.top)!=r,n.style.top=isNaN(parseInt(r))?"":r+"px");this.appFooterOffsetTop&&(o=parseInt(Math.max(0,u+this.windowClientAreaHeight-this.appFooterOffsetTop)),i=i||parseInt(n.style.bottom)!=o,n.style.bottom=o+"px");i&&this.resizeContents(null,getClientHeight(n)-this.headerHeight-this.footerHeight)}};ArticleSelector.prototype.onArticleEditorHeaderStickyChanged=function(){this.adjustControl()};ArticleSelector.prototype.adjustControl=function(){var u=_$("#"+this.pnlContainerName),n=u.parentNode,t=getPortalUiProps(),i,r;this.isMobileView?(n.style.top="0",n.style.bottom="0"):!this.isAuthor&&t.isStickyNavPanel&&(i=_$("#pnlBaseMasterFooter"),this.parentOffsetTop=getElementPos(n.parentNode,!0)[1],i&&i.offsetHeight&&(this.appFooterOffsetTop=getElementPos(i,!0)[1],this.windowClientAreaHeight=getWindowClientAreaHeight()),CssHandler.addElClass(n,"sticky"),n.style.bottom="0",t.isStickyAppHeader&&t.isStickyArticleHeader?n.style.top=this.parentOffsetTop+"px":this.appHeaderHeight=_$("#pnlBaseMasterMenuContainer").offsetHeight,this.articleSelectorHeight=n.offsetHeight,this.onReaderScroll());this.isAuthor||t.isStickyNavPanel||this.isMobileView?(r=isIgnoreCaseEqual(getStyleValue(u,"flex-direction"),"column"),this.headerHeight=r?_$("#"+this.pnlHeaderName).offsetHeight:0,this.footerHeight=r?_$("#"+this.pnlFooterName).offsetHeight:0,this.resizeContents(null,getClientHeight(n)-this.headerHeight-this.footerHeight)):this.resizeContents(null,null)};ArticleSelector.prototype.onIndexShow=function(){this.selectTab("tabIndex")};ArticleSelector.prototype.onContentsShow=function(){this.selectTab("tabContents")};ArticleSelector.prototype.syncProjectId=function(){switch(this.curTabName){case"tabIndex":window[this.indexViewerName]&&this.getProjectId()&&window[this.indexViewerName].setProjectId(this.getProjectId())}};ArticleSelector.prototype.refreshToc=function(){this.curTabName=="tabContents"&&window[this.tocTreeName]&&window[this.tocTreeName].refresh()};ArticleSelector.prototype.executeTocCommand=function(n,t){this.curTabName=="tabContents"&&window[this.tocTreeName]&&window[this.tocTreeName].executeCommand(n,t)};ArticleSelector.prototype.selectTab=function(n){document.getElementById(this.pnlContentsName).style.display=n=="tabContents"?"":"none";document.getElementById(this.pnlIndexName).style.display=n=="tabIndex"?"":"none";var t=this.curTabName!=n;this.curTabName=n;t&&(this.adjustControl(),this.syncProjectId())};ArticleSelector.prototype.selectArticleByExtId=function(n,t){window[this.tocTreeName].selectArticleByExtId(n,t)};ArticleSelector.prototype.createArticle=function(n,t){this.getVisible()&&(this.selectTab("tabContents"),window[this.tocTreeName].createArticle(null,null,n,t))};ArticleSelector.prototype.onClickedArticle=function(n,t){if(this.onArticleClicked)this.onArticleClicked(n,t)};ArticleSelector.prototype.onCreatedArticle=function(n,t){if(this.onArticleCreated)this.onArticleCreated(n,t)};ArticleSelector.prototype.onSelectedArticleChanged=function(n,t){this.onArticleSelected&&(t.changedFromTabName=n==window[this.tocTreeName]?"tabContents":n==window[this.indexViewerName]?"tabIndex":"tabSearch",typeof t.tocNodeId!="undefined"&&(t.refEntityId=t.tocNodeId),typeof t.keywordId!="undefined"&&(t.refEntityId=t.keywordId),this.onArticleSelected.call(this,this,t))};ArticleSelector.prototype.onArticleEditorCommandRequestedFromTocTree=function(n,t){if(this.onArticleEditorCommandRequested)this.onArticleEditorCommandRequested(this,t)};ArticleSelector.prototype.onFocusedTocNode=function(n,t){if(this.onTocNodeFocused)this.onTocNodeFocused(n,t)};ArticleSelector.prototype.onReviewCommentsShow=function(n,t){if(this.onShowReviewComments)this.onShowReviewComments(n,t)};ArticleSelector.prototype.onToDoItemsShow=function(n,t){if(this.onShowToDoItems)this.onShowToDoItems(n,t)};ArticleSelector.prototype.onImportProjectWizardShow=function(n,t){if(this.onShowImportProjectWizard)this.onShowImportProjectWizard(n,t)};ArticleSelector.prototype.onPropertiesShow=function(n,t){if(this.onShowProperties)this.onShowProperties(n,t)};ArticleSelector.prototype.onTocLoad=function(n,t){if(this.onLoad)this.onLoad(this,t)};ArticleSelector.prototype.getIsMobileView=function(){return this.isMobileView};ArticleSelector.prototype.setIsMobileView=function(n){this.isMobileView=n;window[this.tocTreeName].setIsMobileView(n);window[this.indexViewerName]&&window[this.indexViewerName].setIsMobileView(n)};ArticleSelector.prototype.getProjectId=function(){return window[this.tocTreeName].getProjectId()};ArticleSelector.prototype.getProjectInfo=function(){return window[this.tocTreeName].getProjectInfo()};ArticleSelector.prototype.getProjectExtId=function(){return window[this.tocTreeName].getProjectExtId()};
function TocTreeLight(n){this.stateName=n.stateName;this.pnlShowIndexName=n.pnlShowIndexName;this.pnlCallbackName=n.pnlCallbackName;this.edtFilterName=n.edtFilterName;this.pnlContainerName=n.pnlContainerName;this.pnlHeaderContainerName=n.pnlHeaderContainerName;this.pnlFooterButtonsContainerName=n.pnlFooterButtonsContainerName;this.treeName=n.treeName;this.urlTemplate=n.urlTemplate;this.statusColorTemplate=n.statusColorTemplate;this.nonTocIconTemplate=n.nonTocIconTemplate;this.publishIncludeIconTemplate=n.publishIncludeIconTemplate;this.publishExcludeIconTemplate=n.publishExcludeIconTemplate;this.publishNeverIconTemplate=n.publishNeverIconTemplate;this.toDoCountMarkTemplate=n.toDoCountMarkTemplate;this.toDoChildMarkTemplate=n.toDoChildMarkTemplate;this.reviewCommentCountMarkTemplate=n.reviewCommentCountMarkTemplate;this.reviewCommentChildMarkTemplate=n.reviewCommentChildMarkTemplate;this.popupMenuName=n.popupMenuName;this.popupMenuEmptyAreaName=n.popupMenuEmptyAreaName;this.popupMenuBatchName=n.popupMenuBatchName;this.popupMenuMultiSelectName=n.popupMenuMultiSelectName;this.popupControlName=n.popupControlName;this.cmbNewArticleLocationName=n.cmbNewArticleLocationName;this.cmbItemRootLevelText=n.cmbItemRootLevelText;this.cmbItemSiblingNodeText=n.cmbItemSiblingNodeText;this.cmbItemChildNodeText=n.cmbItemChildNodeText;this.cmbItemAnotherProjectRootText=n.cmbItemAnotherProjectRootText;this.edtNewArticleUrlName=n.edtNewArticleUrlName;this.edtNewArticleTitleName=n.edtNewArticleTitleName;this.newArticleUrl=n.newArticleUrl;this.newArticleTitle=n.newArticleTitle;this.newSnippetUrl=n.newSnippetUrl;this.newSnippetTitle=n.newSnippetTitle;this.newTopicNotificationText=n.newTopicNotificationText;this.createWindowName=n.createWindowName;this.deleteWindowName=n.deleteWindowName;this.lblDeletedTopicTitleName=n.lblDeletedTopicTitleName;this.btnSelectedOkName=n.btnSelectedOkName;this.copySelectedMask=n.copySelectedMask;this.deleteSelectedMask=n.deleteSelectedMask;this.publishSelectedMask=n.publishSelectedMask;this.exportSelectedMask=n.exportSelectedMask;this.btnSelectedOkDefaultText=n.btnSelectedOkDefaultText;this.nSelectedItemsMask=n.nSelectedItemsMask;this.noOutputTagsSpecifiedText=n.noOutputTagsSpecifiedText;this.statusColorsByIds=JSON.parse(n.statusColorsByIds);this.statusCssClassesByNamesBaseLang=n.statusCssClassesByNamesBaseLang?JSON.parse(n.statusCssClassesByNamesBaseLang):[];this.defaultStatusNameBaseLang=n.defaultStatusNameBaseLang;this.statusCssClassesByNamesTranslation=n.statusCssClassesByNamesTranslation?JSON.parse(n.statusCssClassesByNamesTranslation):[];this.defaultStatusNameTranslation=n.defaultStatusNameTranslation;this.cmbSetStatusName=n.cmbSetStatusName;this.isShowMarksOnParentNodes=n.isShowMarksOnParentNodes=="1";this.cmbNewArticleContentName=n.cmbNewArticleContentName;this.formLayoutNewArticleName=n.formLayoutNewArticleName;this.edtSelectSrcArticleName=n.edtSelectSrcArticleName;this.cmbNewArticleOtherProjectName=n.cmbNewArticleOtherProjectName;this.dlgExtenderCreateArticleName=n.dlgExtenderCreateArticleName;this.progressLineNewArticleName=n.progressLineNewArticleName;this.progressLineHeaderName=n.progressLineHeaderName;this.mostRecentlyUsedSrcArticleServiceUrl=n.mostRecentlyUsedSrcArticleServiceUrl;this.fileConflictListNewArticleName=n.fileConflictListNewArticleName;this.portalDashboardUrl=n.portalDashboardUrl;this.cannotFindTocNodeForArticleErrorText=n.cannotFindTocNodeForArticleErrorText;this.createTopicText=n.createTopicText;this.createSnippetText=n.createSnippetText;this.copyTopicText=n.copyTopicText;this.copyNTopicsText=n.copyNTopicsText;this.recentTypeNewArticle=n.recentTypeNewArticle;this.recentTypeCopyArticle=n.recentTypeCopyArticle;this.articleEditorSelectionItemText=n.articleEditorSelectionItemText;this.articleEditorSelectionItemValue=n.articleEditorSelectionItemValue;this.filteredInvisibleParentCssClass=n.filteredInvisibleParentCssClass}function goToProject(){var n=window.location.hash.split("/");n[0]=n[0].replace("#!","");window.location.href=`/helper/articles/${n[0]}/${n[1]}/?action=redirectToProject`}TocTreeLight.prototype.onNodeInit=function(n,t){function u(n,t){for(var r,i=0;i<n.c.length;i++)if(n.c[i].vals[t]&&n.c[i].vals[t]>0||(r=u(n.c[i],t),r))return!0;return!1}function f(n,t){var r=t?"td":"r",f=t?"toDoMark":"reviewCommentMark",e=!1;return n.vals[r]&&n.vals[r]!="0"?(n.vals[f]=(t?i.toDoCountMarkTemplate:i.reviewCommentCountMarkTemplate).replace(/\{\{ID\}\}/g,n.id).replace(/\{\{COUNT\}\}/g,n.vals[r]),e=!0):n.vals[f]=i.isShowMarksOnParentNodes&&u(n,r)?t?i.toDoChildMarkTemplate:i.reviewCommentChildMarkTemplate:"",e}var i=this,r;if(t.node.vals.e&&(t.node.vals._url=this.urlTemplate.replace(/{{PROJECT_EXT_ID}}/g,window[this.pnlCallbackName].cpProjectExtId).replace(/{{ARTICLE_EXT_ID}}/g,t.node.vals.e)),t.node.vals.nonTocIcon=t.node.vals.n&&t.node.vals.n=="1"?this.nonTocIconTemplate:"",t.node.vals.statusColor=t.node.vals.ws&&this.statusColorsByIds[t.node.vals.ws]?this.statusColorTemplate.replace(/\{0\}/g,this.statusColorsByIds[t.node.vals.ws]):"",t.node.vals.p)switch(t.node.vals.p){case"1":t.node.vals.publishIcon=this.publishIncludeIconTemplate.replace(/\{0\}/g,t.node.vals.pt?t.node.vals.pt:this.noOutputTagsSpecifiedText);break;case"2":t.node.vals.publishIcon=this.publishExcludeIconTemplate.replace(/\{0\}/g,t.node.vals.pt?t.node.vals.pt:this.noOutputTagsSpecifiedText);break;case"3":t.node.vals.publishIcon=this.publishNeverIconTemplate;break;default:t.node.vals.publishIcon=""}else t.node.vals.publishIcon="";r=0;f(t.node,!0)&&r++;f(t.node,!1)&&r++;switch(r){case 1:t.node.vals._customCssClass="TocTreeLight_nodeWithOneMark";break;case 2:t.node.vals._customCssClass="TocTreeLight_nodeWithTwoMarks"}};TocTreeLight.prototype.syncBtnSelectedOkState=function(){var n=window[this.treeName].getSelectedNodeIds().length;window[this.btnSelectedOkName].SetEnabled(n>0);window[this.btnSelectedOkName].SetText(this.curMultiActionBtnMask?this.curMultiActionBtnMask.replace("{0}",n):this.btnSelectedOkDefaultText)};TocTreeLight.prototype.onNodeSelected=function(){this.syncBtnSelectedOkState()};TocTreeLight.prototype.onNodeDropping=function(n,t){window[this.pnlCallbackName].PerformCallback("drag\t"+t.srcNode.id+"\t"+t.destNode.id+"\t"+t.dropType);t.isCancel=!0};TocTreeLight.prototype.onActionButtonClick=function(n,t){var i,r;window[this.treeName].setFocusedNode(t.nodeId);t.buttonId!="menuItemMore"?this.executeCommand(t.buttonId,{nodeId:t.nodeId}):(i=this.curMultiActionType?window[this.popupMenuMultiSelectName]:window[this.popupMenuName],i&&(this.isMobileView?(r=window[this.treeName].getNodeContentPanel(t.nodeId),i.ShowAtElement(r)):i.ShowAtPos(ASPxClientUtils.GetEventX(t.htmlEvent)+window.scrollX,ASPxClientUtils.GetEventY(t.htmlEvent)+window.scrollY)))};TocTreeLight.prototype.onToDoMarkClick=function(n){if(this.onShowToDoItems)this.onShowToDoItems(this,{node:window[this.treeName].getNode(n)})};TocTreeLight.prototype.onReviewCommentMarkClick=function(n,t){if(this.onShowReviewComments){var i={isStopBubbling:!1,node:window[this.treeName].getNode(t)};this.onShowReviewComments(this,i);i.isStopBubbling&&stopBubbling(n)}};TocTreeLight.prototype.setShowIndexLink=function(n){var r,i,t;this.isShowIndexLink=n;r=document.getElementById(this.pnlContainerName);CssHandler.switchElClass(r,"TocTreeLight_withShowIndex",!!(this.isShowIndexLink&&this.isHasIndex));window.baseMasterMobileMenu&&(i=baseMasterMobileMenu.getItems(),t=i.menuItemIndex,t&&(t.vals||(t.vals={}),t.vals._customCssClass=CssHandler.switchClass(t.vals._customCssClass,"TocTreeLight_hideIndexFromMobileMenu",!this.isShowIndexLink||!this.isHasIndex),baseMasterMobileMenu.setItems(i[""].c)));this.setHeight(this.curHeight)};TocTreeLight.prototype.setIsShowFilter=function(n){var t=document.getElementById(this.pnlContainerName);CssHandler.switchElClass(t,"TocTreeLight_withFilter",n)};TocTreeLight.prototype.setIsMobileView=function(n){window[this.treeName].setIsMobileView(n);this.setShowIndexLink(this.isShowIndexLink);this.isMobileView=n};TocTreeLight.prototype.setHasIndex=function(n){this.isHasIndex=n;this.setShowIndexLink(this.isShowIndexLink)};TocTreeLight.prototype.onFilterChanged=function(n,t){if(t.isCustom)window[this.pnlCallbackName].PerformCallback("filter\t"+t.filter+"\t"+(t.isCustom?"true":"false")+"\t"+(t.isSupportedByFilterControl?"true":"false")+"\t"+(window[this.treeName].getFocusedNodeId()?window[this.treeName].getFocusedNodeId():""));else{let n=window[this.treeName],i=this;n.applyFilter(function(r){r.vals&&(r.vals._customCssClass=CssHandler.removeClass(r.vals._customCssClass,i.filteredInvisibleParentCssClass));let u={},f=n.getFocusedNodeId();if(t.filter){let u=r.t.toLowerCase().indexOf(t.filter.toLowerCase())>-1;if(u){r.vals&&r.vals._customCssClass&&(r.vals._customCssClass=CssHandler.removeClass(r.vals._customCssClass,i.filteredInvisibleParentCssClass));let t=r;while(t.parentId)t=n.getNode(t.parentId),t.e=1,t.isHidden&&(t.vals||(t.vals={_customCssClass:""}),t.vals._customCssClass||(t.vals._customCssClass=""),t.vals._customCssClass=CssHandler.addClass(t.vals._customCssClass,i.filteredInvisibleParentCssClass),t.isHidden=!1)}return u}if(f&&r.id==f){r.e=0;let t=r;while(n.getNode(t.parentId))u[t.parentId]=!0,t=n.getNode(t.parentId),t.e=1}else u[r.id]||(r.e=0);return!0});t.filter||n.setFocusedNode(n.getFocusedNodeId(),!0)}};TocTreeLight.prototype.onChangingFocusedNode=function(n,t){if(this.onFocusedNodeChanging)this.onFocusedNodeChanging(n,{tocNodeId:t.newId,tocNodeProjectId:this.getProjectId()});document.documentElement.click();var i=window[this.treeName].getNode(t.newId);i.vals.e&&this.onArticleSelected&&this.onArticleSelected.call(this,this,{externalId:i.vals.e,tocNodeId:i.id});window[this.treeName].getIsMobileView()?i.vals.e||window[this.treeName].expandNode(i.id):t.isSwitchNodeState&&(i.e?window[this.treeName].collapseNode(i.id):window[this.treeName].expandNode(i.id))};TocTreeLight.prototype.onNodeClick=function(n,t){if(this.onArticleClicked){this.onArticleClicked(this,{externalId:t.node&&t.node.vals.e?t.node.vals.e:null});getMouseBtn(t.htmlEvent)!="left"&&getMouseBtn(t.htmlEvent)!="right"||t.htmlEvent.altKey||t.htmlEvent.ctrlKey||t.htmlEvent.metaKey||t.htmlEvent.shiftKey||(stopBubbling(t.htmlEvent),document.documentElement.click())}};TocTreeLight.prototype.createArticle=function(n,t,i,r){var u,o,e,s;if(window[this.pnlCallbackName].cpIsAllowNodeCreate){n||(n="Root");t||(t=null);u=t=="sel";u||this.setIsMultiSelectMode(null);var h=window[this.treeName].getNode(window[this.treeName].getFocusedNodeId()),c=h.t,f=window[this.cmbNewArticleLocationName];f.ClearItems();f.AddItem(this.cmbItemRootLevelText,"Root");h&&!u&&(f.AddItem(this.cmbItemSiblingNodeText.replace("{0}",c),"Sibling"),f.AddItem(this.cmbItemChildNodeText.replace("{0}",c),"Child"));(t||r)&&f.AddItem(this.cmbItemAnotherProjectRootText,"OtherProjectRoot");f.SetValue(n);window[this.formLayoutNewArticleName].GetItemByName("Title").SetVisible(!u);window[this.formLayoutNewArticleName].GetItemByName("ExternalID").SetVisible(!u);window[this.edtNewArticleUrlName].setId(r?this.newSnippetUrl:this.newArticleUrl);window[this.edtNewArticleTitleName].SetValue(r?this.newSnippetTitle:this.newArticleTitle);this.isSyncUrlWithTitle=!0;this.srcArticleHtml=!t&&i?i:null;this.isCreatingSnippetFromArticleEditor=r;window[this.formLayoutNewArticleName].GetItemByName("Content").SetVisible(!t||r);o=window[this.cmbNewArticleContentName].FindItemByValue(this.articleEditorSelectionItemValue);o&&window[this.cmbNewArticleContentName].RemoveItem(o.index);r&&window[this.cmbNewArticleContentName].AddItem(this.articleEditorSelectionItemText,this.articleEditorSelectionItemValue);window[this.cmbNewArticleContentName].SetEnabled(!r);window[this.cmbNewArticleContentName].SetValue(t?"CopyArticle":r?this.articleEditorSelectionItemValue:"GlobalTemplate");window[this.formLayoutNewArticleName].GetItemByName("ContentSourceArticle").SetVisible(!1);window[this.edtSelectSrcArticleName].setVisible(!t);window[this.edtSelectSrcArticleName].setRecentArticlesType(t?this.recentTypeCopyArticle:this.recentTypeNewArticle);window[this.edtSelectSrcArticleName].setArticleUrl(u?null:t);window[this.edtSelectSrcArticleName].setProjectId(this.getProjectId());window[this.formLayoutNewArticleName].GetItemByName("LocationOtherProject").SetVisible(n=="OtherProjectRoot");window[this.cmbNewArticleOtherProjectName].setProjectExtId(null);this.syncFileNameConflictsVisibility();e=window[this.popupControlName].GetWindowByName(this.createWindowName);e.SetHeaderText(t?u?this.copyNTopicsText.replace("{0}",window[this.treeName].getSelectedNodeIds().length):this.copyTopicText:r?this.createSnippetText:this.createTopicText);t?window[this.popupControlName].ShowWindow(e):(s=this,sendRequest("GET",this.mostRecentlyUsedSrcArticleServiceUrl,null,!0,function(n){var t=n.responseText?JSON.parse(n.responseText):null;t&&window[s.edtSelectSrcArticleName].setArticleUrl(t.fullUrl);window[s.popupControlName].ShowWindow(e)}))}};TocTreeLight.prototype.onBtnCreateArticleClick=function(){this.createArticle()};TocTreeLight.prototype.onBtnImportArticleClick=function(){if(this.onShowImportProjectWizard)this.onShowImportProjectWizard(this,{inputProjectId:this.getProjectId()})};TocTreeLight.prototype.onMenuItemClick=function(n,t){t.item.name!=""&&t.item.name!=null&&this.executeCommand(t.item.name)};TocTreeLight.prototype.onCallbackPanelRightClick=function(n,t){var u=window[this.treeName].getNodeId(t.target||t.srcElement),i=!1,r;return u?(window[this.treeName].setFocusedNode(u),r=this.curMultiActionType?window[this.popupMenuMultiSelectName]:window[this.popupMenuName],r&&(r.ShowAtPos(ASPxClientUtils.GetEventX(t)+window.scrollX,ASPxClientUtils.GetEventY(t)+window.scrollY),i=!0)):window[this.popupMenuEmptyAreaName]&&(window[this.popupMenuEmptyAreaName].ShowAtPos(ASPxClientUtils.GetEventX(t)+window.scrollX,ASPxClientUtils.GetEventY(t)=window.scrollY),i=!0),i?(document.documentElement.click(),stopBubbling(t)):void 0};TocTreeLight.prototype.onPopupMenuPopUp=function(){var i=window[this.treeName].getFocusedNodeId(),t=window[this.treeName].getNode(i),n=t.vals.isAutoDocsArticle&&t.vals.isAutoDocsArticle=="1"?!0:!1,r=t.vals.isAutoDocsMountPoint&&t.vals.isAutoDocsMountPoint=="1"?!0:!1;window[this.popupMenuName]&&(window[this.popupMenuName].GetItemByName("menuItemNewChildArticle").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeCreate&&!n&&!r),window[this.popupMenuName].GetItemByName("menuItemNewSiblingArticle").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeCreate&&!n),window[this.popupMenuName].GetItemByName("menuItemCopy").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeCreate&&!n),window[this.popupMenuName].GetItemByName("menuItemCopyMultiple").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeCreate&&!n),window[this.popupMenuName].GetItemByName("menuItemDelete").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeDelete&&!n),window[this.popupMenuName].GetItemByName("menuItemDeleteMultiple").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeDelete&&!n),window[this.popupMenuName].GetItemByName("menuItemEditCaption").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeEdit&&!n),window[this.popupMenuName].GetItemByName("menuItemMoveUp").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeMove&&!n),window[this.popupMenuName].GetItemByName("menuItemMoveDown").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeMove&&!n),window[this.popupMenuName].GetItemByName("menuItemOutdent").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeMove&&!n),window[this.popupMenuName].GetItemByName("menuItemIndent").SetVisible(window[this.pnlCallbackName].cpIsAllowNodeMove&&!n))};TocTreeLight.prototype.onShowIndexClick=function(){if(this.onShowIndex)this.onShowIndex(this,{})};TocTreeLight.prototype.onBeginCallback=function(){window[this.treeName].removeResizeHandler();this.setIsMultiSelectMode(null);this.oldScrollPos=window[this.pnlCallbackName].GetMainElement().scrollTop};TocTreeLight.prototype.onEndCallback=function(n){var i,u,e,o,t,f,s,r;if(typeof n.cpHasIndex=="boolean"&&(this.setHasIndex(n.cpHasIndex),n.cpHasIndex=null),typeof n.cpIsShowFilter=="boolean"&&(this.setIsShowFilter(n.cpIsShowFilter),n.cpIsShowTocHeader=null),window[this.progressLineNewArticleName]&&window[this.progressLineNewArticleName].hide(),window[this.progressLineHeaderName]&&window[this.progressLineHeaderName].hide(),window[this.dlgExtenderCreateArticleName]&&window[this.dlgExtenderCreateArticleName].getDefaultButton().SetEnabled(!0),i=this,(this.oldScrollPos>0||n.cpIsScrollToFocusedNodeAfterCallback)&&(u=this.oldScrollPos,e=n.cpIsScrollToFocusedNodeAfterCallback,setTimeout(function(){u&&(window[i.pnlCallbackName].GetMainElement().scrollTop=u);e&&window[i.treeName].setFocusedNode(window[i.treeName].getFocusedNodeId(),!0,!0)},0),this.oldScrollPos=null,n.cpIsScrollToFocusedNodeAfterCallback=null),typeof this.isMobileView!="undefined"&&this.setIsMobileView(this.isMobileView),typeof n.cpIsAllowNodeCreate=="boolean"&&(n.cpIsAllowNodeCreate?CssHandler.addElClass(_$("#"+this.pnlContainerName),"TocTreeLight_containerNewNodesAllowed"):CssHandler.removeElClass(_$("#"+this.pnlContainerName),"TocTreeLight_containerNewNodesAllowed"),this.setHeight(this.curHeight),window[this.popupMenuEmptyAreaName]&&window[this.popupMenuEmptyAreaName].GetItemByName("menuItemNewRootArticle").SetVisible(n.cpIsAllowNodeCreate),window[this.popupMenuBatchName]&&(window[this.popupMenuBatchName].GetItemByName("menuItemCopyMultiple").SetVisible(n.cpIsAllowNodeCreate),window[this.popupMenuBatchName].GetItemByName("menuItemDeleteMultiple").SetVisible(n.cpIsAllowNodeDelete))),n.cpIsNewArticleCreated){if(o=window[this.popupControlName].GetWindowByName(this.createWindowName),window[this.popupControlName].HideWindow(o),showNotification(this.newTopicNotificationText,!1,!1,!0,3e3),n.cpIsNewArticleCreated=!1,this.isCreatingSnippetFromArticleEditor&&this.onArticleCreated)this.onArticleCreated(this,{articleId:n.cpNewArticleCreatedInternalId,articleTitle:n.cpNewArticleCreatedTitle,articleUrl:n.cpNewArticleCreatedUrl,articleUrlPreview:n.cpNewArticleCreatedUrlPreview,isCreatingSnippetFromArticleEditor:this.isCreatingSnippetFromArticleEditor});n.cpNewArticleCreatedInternalId=null;n.cpNewArticleCreatedTitle=null;n.cpNewArticleCreatedUrl=null;n.cpNewArticleCreatedUrlPreview=null;this.isCreatingSnippetFromArticleEditor=!1}if(n.cpIsOpenFocusedNodeAfterCallback||n.cpIsOpenFocusedNodeAfterCallbackForceRefresh){if(t=window[this.treeName].getNode(window[this.treeName].getFocusedNodeId()),this.onFocusedNodeChanging)this.onFocusedNodeChanging(this,{tocNodeId:t.id});t.vals.e&&this.onArticleSelected&&this.onArticleSelected.call(this,this,{externalId:t.vals.e,tocNodeId:t.id,isForceArticleRefresh:n.cpIsOpenFocusedNodeAfterCallbackForceRefresh});n.cpIsOpenFocusedNodeAfterCallback=null;n.cpIsOpenFocusedNodeAfterCallbackForcedRefresh=null}if(n.cpNotificationWarningHtml&&(showNotification(n.cpNotificationWarningHtml,!0,!1,!0),n.cpNotificationWarningHtml=null),n.cpNewArticleUrl&&(this.newArticleUrl=n.cpNewArticleUrl,n.cpNewArticleUrl=null),n.cpNewSnippetUrl&&(this.newSnippetUrl=n.cpNewSnippetUrl,n.cpNewSnippetUrl=null),n.cpNewArticleUrlPrefix&&window[this.edtNewArticleUrlName]&&(window[this.edtNewArticleUrlName].setUrlMask(n.cpNewArticleUrlPrefix),n.cpNewArticleUrlPrefix=null),n.cpNewArticleUrlError&&window[this.edtNewArticleUrlName]&&(window[this.edtNewArticleUrlName].setErrorText(n.cpNewArticleUrlError),alert(n.cpNewArticleUrlError),n.cpNewArticleUrlError=null),typeof n.cpIsTranslationProject=="boolean"&&(this.isTransProject=n.cpIsTranslationProject,n.cpIsTranslationProject=null,window[this.cmbSetStatusName])){f=this.isTransProject?this.statusCssClassesByNamesTranslation:this.statusCssClassesByNamesBaseLang;s=this.isTransProject?this.defaultStatusNameTranslation:this.defaultStatusNameBaseLang;window[this.cmbSetStatusName].ClearItems();for(r in f)window[this.cmbSetStatusName].AddItem(r,r),window[this.cmbSetStatusName].AddItemCssClass(window[this.cmbSetStatusName].GetItemCount()-1,f[r]);window[this.cmbSetStatusName].SetValue(s)}if(getCurrentUserInfo().isInternalUser&&window[this.edtFilterName].setProjectId(this.getProjectId(),this.isTransProject),this.onLoad)this.onLoad(this,{})};TocTreeLight.prototype.selectArticleByExtId=function(n,t){var i,r;if(!isIgnoreCaseEqual(window[this.stateName].Get("projectExtId"),n)){window[this.pnlCallbackName].PerformCallback("selectext\t"+n+"\t"+t);return}if(window[this.treeName]){if(i=window[this.treeName].getNode(window[this.treeName].getFocusedNodeId()),i&&i.vals&&isIgnoreCaseEqual(i.vals.e,t))return;if(r=window[this.treeName].getNodeByVal("e",t),r){window[this.treeName].setFocusedNode(r.id,!0,!0);return}}window[this.pnlCallbackName].PerformCallback("selectext\t"+n+"\t"+t)};TocTreeLight.prototype.refresh=function(){window[this.pnlCallbackName].PerformCallback("")};TocTreeLight.prototype.setHeight=function(n){if(typeof n=="number"){var t=_$("#"+this.pnlFooterButtonsContainerName);window[this.pnlCallbackName].SetHeight(n-_$("#"+this.pnlHeaderContainerName).offsetHeight-(t?t.offsetHeight:0))}else window[this.pnlCallbackName].GetMainElement().style.height=null;this.curHeight=n};TocTreeLight.prototype.getProjectId=function(){return this.getProjectInfo().id};TocTreeLight.prototype.getProjectInfo=function(){return{id:window[this.stateName].Get("projectId"),extId:window[this.stateName].Get("projectExtId")}};TocTreeLight.prototype.getProjectExtId=function(){return this.getProjectInfo().extId};TocTreeLight.prototype.executeCommand=function(n,t){var f,i,r,u;switch(n){case"menuItemDelete":if(!window[this.pnlCallbackName].cpIsAllowNodeDelete)return;if(this.processedNodeId=window[this.treeName].getFocusedNodeId(),!this.processedNodeId)return;document.getElementById(this.lblDeletedTopicTitleName).innerHTML=escapeMarkup(window[this.treeName].getNode(this.processedNodeId).t).trim();f=window[this.popupControlName].GetWindowByName(this.deleteWindowName);window[this.popupControlName].ShowWindow(f);break;case"menuItemExpandAll":window[this.treeName].expandLevels(-1);break;case"menuItemCollapseAll":window[this.treeName].collapseAll();break;case"menuItemSelectAll":window[this.treeName].setAllNodesSelected(!0);this.syncBtnSelectedOkState();break;case"menuItemUnselectAll":window[this.treeName].setAllNodesSelected(!1);this.syncBtnSelectedOkState();break;case"menuItemSelectChildren":window[this.treeName].setNodeSelected(window[this.treeName].getFocusedNodeId(),!0,"recursive");this.syncBtnSelectedOkState();break;case"menuItemUnselectChildren":window[this.treeName].setNodeSelected(window[this.treeName].getFocusedNodeId(),!1,"recursive");this.syncBtnSelectedOkState();break;case"menuItemPublishProject":this.getProjectId()&&(createCookie("__ch_actiontype","publish_export"),createCookie("__ch_projectid",this.getProjectId()),window.location.href=this.portalDashboardUrl);break;case"menuItemPublishArticle":if(i=null,isIgnoreCaseEqual(window[this.stateName].Get("projectExtId"),t.projectExtId)&&(r=window[this.treeName].getNode(window[this.treeName].getFocusedNodeId()),r&&r.vals&&isIgnoreCaseEqual(r.vals.e,t.externalId)?i=r.id:(u=window[this.treeName].getNodeByVal("e",t.externalId),u&&(i=u.id))),i==null){alert(this.cannotFindTocNodeForArticleErrorText);return}createCookie("__ch_actiontype","publish_export");createCookie("__ch_projectid",this.getProjectId());localStorage.__ch_tocnodeids=i;window.location.href=this.portalDashboardUrl;break;case"menuItemPublishMultiple":case"menuItemSetAssignedToMultiple":case"menuItemSetOwnerMultiple":case"menuItemSetStatusMultiple":case"menuItemCopyMultiple":case"menuItemDeleteMultiple":case"menuItemDownloadTransMultiple":this.setIsMultiSelectMode(n);break;case"menuItemEditCaption":case"menuItemProperties":if(n=="menuItemEditCaption"&&!window[this.pnlCallbackName].cpIsAllowNodeEdit||n=="menuItemProperties"&&!window[this.pnlCallbackName].cpIsAllowNodePropertiesView)return;if(this.processedNodeId=window[this.treeName].getFocusedNodeId(),!this.processedNodeId)return;if(this.onShowProperties)this.onShowProperties(this,{tocNodeId:this.processedNodeId,tocNodeProjectId:this.getProjectId()});break;case"menuItemNewRootArticle":this.createArticle();break;case"menuItemNewChildArticle":this.createArticle("Child");break;case"menuItemNewSiblingArticle":this.createArticle("Sibling");break;case"menuItemCopy":u=window[this.treeName].getNode(window[this.treeName].getFocusedNodeId());this.createArticle("Root",u.vals._url);break;case"menuItemNewArticle":case"menuItemBatchActions":break;case"menuItemUpdateAutoDocs":if(this.onArticleEditorCommandRequested)this.onArticleEditorCommandRequested(this,{commandId:"menuItemUpdateAutoDocs",param:{mountPointNodeId:t.nodeId}});break;case"selectAndRefresh":window[this.treeName].setFocusedNode(t.selNodeId);window[this.pnlCallbackName].PerformCallback(n+"\t"+t.selNodeId);break;case"getFocusedNodeId":t.nodeId=window[this.treeName].getFocusedNodeId();break;case"menuItemRefresh":default:window[this.pnlCallbackName].PerformCallback(n+"\t"+window[this.treeName].getFocusedNodeId())}};TocTreeLight.prototype.onConfirmDialogButtonClick=function(n,t){t.buttonName=="ok"&&(window[this.pnlCallbackName].PerformCallback("erase\t"+this.processedNodeId),this.setIsMultiSelectMode(null))};TocTreeLight.prototype.syncFileNameConflictsVisibility=function(){window[this.formLayoutNewArticleName].GetItemByName("FileNameConflicts").SetVisible(window[this.cmbNewArticleContentName].GetValue()=="CopyArticle"&&(window[this.cmbNewArticleLocationName].GetValue()=="OtherProjectRoot"||window[this.edtSelectSrcArticleName].getArticleProjectId()&&window[this.edtSelectSrcArticleName].getArticleProjectId()!=this.getProjectId()))};TocTreeLight.prototype.onCreateDialogShown=function(){window[this.edtNewArticleTitleName].SelectAll();window[this.edtNewArticleTitleName].Focus()};TocTreeLight.prototype.onCreateDialogButtonClick=function(n,t){var i,u,r,f,e;if(t.buttonName=="ok"){if(window[this.edtNewArticleTitleName].Validate(),(!window[this.formLayoutNewArticleName].GetItemByName("Title").GetVisible()||window[this.edtNewArticleUrlName].validate())&&(!window[this.formLayoutNewArticleName].GetItemByName("ExternalID").GetVisible()||window[this.edtNewArticleTitleName].GetIsValid())){if(i=window[this.cmbNewArticleLocationName].GetValue(),i=="OtherProjectRoot"&&!window[this.cmbNewArticleOtherProjectName].validate()){t.cancel=!0;return}u=window[this.cmbNewArticleContentName].GetValue();r=null;switch(u){case"CopyArticle":case"ReuseArticle":if(window[this.formLayoutNewArticleName].GetItemByName("ContentSourceArticle").GetVisible()&&!window[this.edtSelectSrcArticleName].validate()){t.cancel=!0;return}r=window[this.edtSelectSrcArticleName].getArticleId()}f="create\t"+(this.processedNodeId=="sel"?"sel":window[this.treeName].getFocusedNodeId());e={locationType:i,contentType:u,srcArticleId:r?r:null,srcArticleHtml:this.srcArticleHtml?this.srcArticleHtml:null,isCreateSnippet:!!this.isCreatingSnippetFromArticleEditor,targetProjectId:i=="OtherProjectRoot"&&window[this.cmbNewArticleOtherProjectName].getProjectId()?window[this.cmbNewArticleOtherProjectName].getProjectId():null,fileNameConflictResolutionType:window[this.fileConflictListNewArticleName].getValue()};window[this.pnlCallbackName].PerformCallback(f+"\t"+JSON.stringify(e));window[this.dlgExtenderCreateArticleName].getDefaultButton().SetEnabled(!1)}t.cancel=!0}this.setIsMultiSelectMode(null)};TocTreeLight.prototype.onNewArticleTitleKeyUp=function(n){this.isSyncUrlWithTitle&&window[this.edtNewArticleUrlName].setId(n.GetText())};TocTreeLight.prototype.onNewArticleUrlChanged=function(){this.isSyncUrlWithTitle=!1};TocTreeLight.prototype.onNewArticleContentChanged=function(n){switch(n.GetValue()){case"GlobalTemplate":case"ArticleEditorSelection":window[this.formLayoutNewArticleName].GetItemByName("ContentSourceArticle").SetVisible(!1);break;case"CopyArticle":case"ReuseArticle":window[this.formLayoutNewArticleName].GetItemByName("ContentSourceArticle").SetVisible(!0);window[this.edtSelectSrcArticleName].setRecentArticlesType(n.GetValue()=="CopyArticle"?this.recentTypeCopyArticle:this.recentTypeNewArticle)}this.syncFileNameConflictsVisibility()};TocTreeLight.prototype.onNewArticleLocationChanged=function(n){switch(n.GetValue()){case"OtherProjectRoot":window[this.formLayoutNewArticleName].GetItemByName("LocationOtherProject").SetVisible(!0);break;default:window[this.formLayoutNewArticleName].GetItemByName("LocationOtherProject").SetVisible(!1)}this.syncFileNameConflictsVisibility()};TocTreeLight.prototype.onNewArticleSrcArticleChanged=function(){this.syncFileNameConflictsVisibility()};TocTreeLight.prototype.onBtnBatchClick=function(n){if(this.isMobileView)window[this.popupMenuBatchName].ShowAtElement(n);else{var t=getElementPos(n,!0);window[this.popupMenuBatchName].ShowAtPos(t[0],t[1]+n.offsetHeight)}};TocTreeLight.prototype.setIsMultiSelectMode=function(n){var i={menuItemSetStatusMultiple:"TocTreeLight_containerMultiSetStatusMode",menuItemSetAssignedToMultiple:"TocTreeLight_containerMultiSetUserMode",menuItemSetOwnerMultiple:"TocTreeLight_containerMultiSetUserMode"},e=i[n]?i[n]:"",u=document.getElementById(this.pnlContainerName),t,f,r,o;if(n){CssHandler.addElClass(u,"TocTreeLight_containerMultiSelectMode"+(e?" "+e:""));t=window[this.treeName].getOptions();this.treeOptsOriginal=JSON.parse(JSON.stringify(t));t.expandLevels=0;this.treeOptsOriginal.expandLevels=0;switch(n){case"menuItemCopyMultiple":t.multiSelectMode="explicit";this.curMultiActionBtnMask=this.copySelectedMask;break;case"menuItemDeleteMultiple":t.multiSelectMode="recursive";this.curMultiActionBtnMask=this.deleteSelectedMask;break;case"menuItemPublishMultiple":t.multiSelectMode="explicit";this.curMultiActionBtnMask=this.publishSelectedMask;break;case"menuItemDownloadTransMultiple":t.multiSelectMode="explicit";this.curMultiActionBtnMask=this.exportSelectedMask;break;case"menuItemSetAssignedToMultiple":case"menuItemSetOwnerMultiple":case"menuItemSetStatusMultiple":t.multiSelectMode="explicit"}for(t.actionButtons=this.treeOptsOriginal.actionButtons.length?[this.treeOptsOriginal.actionButtons[this.treeOptsOriginal.actionButtons.length-1]]:[],t.isDragAndDrop=!1,window[this.treeName].setOptions(t,!0),f=window[this.treeName].getSelectedNodeIds(),r=0;r<f.length;r++)window[this.treeName].setNodeSelected(f[r],!1);this.onNodeSelected(window[this.treeName]);this.curMultiActionType=n}else{CssHandler.removeElClass(u,"TocTreeLight_containerMultiSelectMode");for(o in i)CssHandler.removeElClass(u,i[o]);this.treeOptsOriginal&&(window[this.treeName].setOptions(this.treeOptsOriginal,!0),this.treeOptsOriginal=null);this.curMultiActionType=null;this.curMultiActionBtnMask=null;this.processedNodeId=null}};TocTreeLight.prototype.onBtnSelectedOkClick=function(){var n=window[this.treeName].getSelectedNodeIds(),t;if(n.length<1){this.setIsMultiSelectMode(null);return}this.processedNodeId="sel";switch(this.curMultiActionType){case"menuItemPublishMultiple":createCookie("__ch_actiontype","publish_export");createCookie("__ch_projectid",this.getProjectId());localStorage.__ch_tocnodeids=window[this.treeName].getSelectedNodeIds().join("\t");window.location.href=this.portalDashboardUrl;return;case"menuItemSetAssignedToMultiple":window[this.pnlCallbackName].PerformCallback("set\tassignedto");break;case"menuItemSetOwnerMultiple":window[this.pnlCallbackName].PerformCallback("set\towner");break;case"menuItemSetStatusMultiple":window[this.pnlCallbackName].PerformCallback("set\tstatus");break;case"menuItemCopyMultiple":this.createArticle(null,"sel");break;case"menuItemDeleteMultiple":document.getElementById(this.lblDeletedTopicTitleName).innerHTML=escapeMarkup(this.nSelectedItemsMask.replace("{0}",n.length));t=window[this.popupControlName].GetWindowByName(this.deleteWindowName);window[this.popupControlName].ShowWindow(t);break;case"menuItemDownloadTransMultiple":if(this.onArticleEditorCommandRequested)this.onArticleEditorCommandRequested(this,{commandId:"startDownloadTrans",param:{ids:n,idType:"TOC",transProjectId:this.getProjectId()}})}};TocTreeLight.prototype.onBtnSelectedCancelClick=function(){this.setIsMultiSelectMode(null)};
function ArticlesFilter(n){this.quickFilterName=n.quickFilterName;this.filterTextMask=n.filterTextMask;n.completions&&(this.completions=JSON.parse(n.completions))}ArticlesFilter.prototype.onGetCompletions=function(n,t){var i,r;if(!this.isForceCompletion){n.hideCompletions();this.isDontShowCompletion=!1;return}for(i=0;i<this.completions.length;i++)r=JSON.parse(this.completions[i].vals.isForTranslations),(!r||r&&this.isTranslationProject)&&t.completions.push(this.completions[i]);this.isForceCompletion=!1};ArticlesFilter.prototype.onCompletionSelecting=function(n,t){if(t.isCancel=!0,t.newItem&&t.newItem.vals)if(t.newItem.vals.filter){var i={isCustom:!0,isSupportedByFilterControl:JSON.parse(t.newItem.vals.isSupportedByFilterControl),customFilterText:this.filterTextMask.replace("{0}",t.newItem.text)};window[this.quickFilterName].applyFilter(t.newItem.vals.filter,i)}else window[this.quickFilterName].hideCompletions(),window[this.quickFilterName].showCustomFilterDialog()};ArticlesFilter.prototype.onButtonClick=function(n,t){switch(t.buttonType){case"dropdown":window[this.quickFilterName].setIsShowCompletionOnFocus(!1);window[this.quickFilterName].focus();this.isForceCompletion=!0;window[this.quickFilterName].showCompletions()}};ArticlesFilter.prototype.onChangedFilter=function(n,t){if(this.onFilterChanged)this.onFilterChanged(n,t)};ArticlesFilter.prototype.setProjectId=function(n,t){this.isTranslationProject=t;window[this.quickFilterName].setProjectId(n,t)};
function LoadingPlaceholder(n){var t,i;this.pnlContentName=n.pnlContentName;this.pnlCallbackName=n.pnlCallbackName;t=_$("#"+this.pnlContentName);t&&(i=_$("#"+this.pnlCallbackName),t.parentNode!=i.parentNode&&i.parentNode.appendChild(t),this.adjustControl())}LoadingPlaceholder.prototype.getIsVisible=function(){return _$("#"+this.pnlContentName)!=null};LoadingPlaceholder.prototype.adjustControl=function(){var n=_$("#"+this.pnlContentName),t,i;n&&(t=_$("#"+this.pnlCallbackName),i=getElementPos(t),n.style.left=i[0]+"px",n.style.top=i[1]+"px",n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px")};LoadingPlaceholder.prototype.onEndCallback=function(){this.hide()};LoadingPlaceholder.prototype.hide=function(n){var t=_$("#"+this.pnlContentName),i;if(t){if(n){t.parentNode.removeChild(t);return}CssHandler.addElClass(t,"LoadingPlaceholder_hidden");i=this;setTimeout(function(){var n=_$("#"+i.pnlContentName);n&&n.parentNode&&n.parentNode.removeChild(n)},1e3)}};
function CHQuickFilter(n,t){this.editorId=n;this.opts=mergeOptions(CHQuickFilter.defaults,t);var i=this;appendEventHandler(document.getElementById(this.editorId),"keydown",function(n){return i.onKeyDown(n||window.event)});appendEventHandler(document.getElementById(this.editorId),"keyup",function(n){return i.onKeyUp(n||window.event)})}CHQuickFilter.defaults={timeout:600};CHQuickFilter.prototype.applyFilter=function(n){if(this.onFilterChanged)this.onFilterChanged(this,{filter:n})};CHQuickFilter.prototype.onKeyDown=function(n){var t=document.getElementById(this.editorId).value;switch(n.keyCode){case 13:return this.applyFilter(t),stopBubbling(n);default:this.oldQuickFilterBoxValue=t}return!0};CHQuickFilter.prototype.onKeyUp=function(n){var r=n.charCode?n.charCode:n.keyCode,i=document.getElementById(this.editorId).value,t;return isIgnoreCaseEqual(i,this.oldQuickFilterBoxValue)||(this.timer&&clearTimeout(this.timer),t=this,this.timer=setTimeout(function(){t.applyFilter(document.getElementById(t.editorId).value)},this.timeout)),!0};
function IndexViewerLight(n){var i,r,u,t;this.pnlIndexContainerName=n.pnlIndexContainerName;this.pnlMenuContainerName=n.pnlMenuContainerName;this.pnlCallbackName=n.pnlCallbackName;this.pnlTreeContainerName=n.pnlTreeContainerName;i=this;this.tree=new CHTree(this.pnlTreeContainerName,{expandLevels:-1,mobileViewWidthThreshold:parseInt(n.treeMobileWidthBreakpoint),isExpandCollapseEffects:!1,cssClasses:{node:n.treeNodeCssClass},fontAwesomeVersion:n.fontAwesomeVersion},eval(n.treeNodes));this.tree.onNodeClick=function(n,t){i.onKeywordNodeClick(n,t)};r=document.getElementById(n.pnlPopupName);u=document.createElement("div");this.pnlListName=u.id=n.pnlPopupName+"_lst";r.appendChild(u);this.lst=new CHListBox(this.pnlListName,{isHighlightSelectedItem:!1});this.lst.onSelectedItemChanging=function(n,t){i.onPopupItemChanging(n,t)};t={};t.wnd=r;t.showAction="none";t.hideAction="click";t.width=300;t.isEffectExpand=!1;t.isEffectAppear=!1;this.popup=new PopupWindow(t);this.quickFilter=new CHQuickFilter(n.edtQuickFindName,{});this.quickFilter.onFilterChanged=function(n,t){i.onFilterChanged(n,t)}}IndexViewerLight.prototype.setHeight=function(n){_$("#"+this.pnlIndexContainerName).style.height=typeof n=="number"?n-_$("#"+this.pnlMenuContainerName).offsetHeight+"px":null;window[this.pnlCallbackName].cpCurHeight=n};IndexViewerLight.prototype.onKeywordNodeClick=function(n,t){var u=t.node,i=u.vals.i.split("|"),o=u.vals.a.split("\t"),f,r,e;if(i.length==1){if(this.onArticleSelected)this.onArticleSelected(this,{externalId:i[0],keywordId:u.vals.k})}else if(i.length>1){for(f=[],r=0;r<i.length;r++)e={text:o[r],valsSerialized:JSON.stringify({id:i[r]})},f.push(e);this.lst.setItems(f);this.popup.setTarget(n.getNodeElement(u.id));this.popup.show();this.popup.setWindowSize(null,Math.min(400,document.getElementById(this.pnlListName).offsetHeight))}};IndexViewerLight.prototype.onPopupItemChanging=function(n,t){if(this.onArticleSelected)this.onArticleSelected(this,{externalId:t.newItem.vals.id});this.popup.hide()};IndexViewerLight.prototype.onFilterChanged=function(n,t){var u=t.filter.toLowerCase(),i,r,f;for(i in this.tree.nodes)if(r=this.tree.getNode(i),!r.parentId&&r.t&&r.t.toLowerCase().indexOf(u)==0){f=this.tree.getNodeElement(i);this.tree.setFocusedNode(i,!0,!0);return}};IndexViewerLight.prototype.setShowContentsLink=function(n){if(window[this.pnlCallbackName]){var t=window[this.pnlCallbackName].GetMainElement();n&&t.className.indexOf("IndexViewerLight_withShowContents")<0?t.className+=" IndexViewerLight_withShowContents":n||(t.className=t.className.replace(/ IndexViewerLight_withShowContents/g,""))}};IndexViewerLight.prototype.onEndCallback=function(){typeof this.getIsMobileView()!="undefined"&&this.setIsMobileView(this.getIsMobileView());this.setHeight(window[this.pnlCallbackName].cpCurHeight)};IndexViewerLight.prototype.getIsMobileView=function(){return window[this.pnlTreeContainerName+"_IVL_isMobileView"]};IndexViewerLight.prototype.setIsMobileView=function(n){this.tree.setIsMobileView(n);this.setShowContentsLink(!n);window[this.pnlTreeContainerName+"_IVL_isMobileView"]=n};IndexViewerLight.prototype.setProjectId=function(n){window[this.pnlCallbackName].PerformCallback(n)};
(function(){function n(){this.effectRelThresholdY=60;this.effectsMinWidth=767;this.cssClassLazyImagesContainer="lazyImagesContainer";this.cssClassLazyImg="lazyImg";this.cssClassLazyVideo="lazyVideo";this.effects={effectPullDown:"pullDown",effectHidden:"show",effectSticky:"sticky",effectFadeIn:"fadeIn",effectSlideDown:"slideDown"};this.init()}n.prototype.getAnimatedItemsList=function(){var n=[],r,i,t;arrayPushAll(n,_$$("img."+this.cssClassLazyImg));arrayPushAll(n,_$$("video."+this.cssClassLazyVideo));arrayPushAll(n,_$$("*[data-dl-class]"));arrayPushAll(n,_$$("*[data-dl-onaddeffect]"));for(r in this.effects)arrayPushAll(n,_$$("*."+r));for(i=[],t=0;t<n.length;t++)arrayContains(i,n[t])||i.push(n[t]);return i};n.prototype.stopListening=function(){this.removeScrollHandler&&(this.removeScrollHandler(),this.removeScrollHandler=null)};n.prototype.init=function(){if(this.animatedItems=this.getAnimatedItemsList(),this.animatedItems.length&&!this.removeScrollHandler){var n=this;this.removeScrollHandler=appendEventHandler(window,"scroll",function(){var t=n;requestAnimationFrame(function(){t.handleScroll.call(t)})},!0,!1);this.handleScroll()}this.animatedItems.length||this.stopListening()};n.prototype.handleScroll=function(){for(var t,r,u=getScrollTop(),i=[],n=0;n<this.animatedItems.length;n++){if(t=this.animatedItems[n],!t||!t.parentNode){i.push(n);continue}r=this.getAction(t,u);r&&(this.loadIfNeeded(t),this.switchEffects(t,r))}for(n=i.length-1;n>=0;n--)this.animatedItems.splice(i[n],1)};n.prototype.applyEffect=function(n,t){switch(this.effects[t]){case"show":n.style.opacity=1;break;case"pullDown":n.style.maxHeight="400px";break;case"slideDown":n.style.visibility="visible";case"fadeIn":case"sticky":n.className=n.className.replace(t,this.effects[t])}};n.prototype.removeEffect=function(n,t){switch(this.effects[t]){case"show":n.style.opacity=0;break;case"slideDown":n.style.visibility="hidden";n.className=n.className.replace(this.effects[t],t);break;case"sticky":n.className=n.className.replace(this.effects[t],t)}};n.prototype.switchEffects=function(n,t){function u(n){n&&eval(n)}var f=n.getAttribute("data-dl-onaddeffect"),e=n.getAttribute("data-dl-onremoveeffect"),i,r,o;for(i in this.effects)t.isApply&&CssHandler.getIsElHasClass(n,i)?(this.applyEffect(n,i),u(f)):!t.isApply&&CssHandler.getIsElHasClass(n,this.effects[i])&&(this.removeEffect(n,i),u(e));r=n.getAttribute("data-dl-class");r&&(o=CssHandler.getIsElHasClass(n,r)&&!t.isApply||!CssHandler.getIsElHasClass(n,r)&&t.isApply,CssHandler.switchElClass(n,r,t.isApply));o&&(t.isApply?u(f):u(e))};n.prototype.loadIfNeeded=function(n){var t,i;switch(n.tagName.toLowerCase()){case"img":if(n.getAttribute("data-dl-src")&&n.getAttribute("data-dl-src").toLowerCase()!=n.src.toLowerCase())return n.src=n.getAttribute("data-dl-src"),!0;break;case"video":if(n.getAttribute("data-dl-src")&&!n.getElementsByTagName("source").length)return t=document.createElement("source"),t.setAttribute("src",n.getAttribute("data-dl-src")),t.setAttribute("type","video/mp4"),n.appendChild(t),n.getAttribute("data-dl-video-class")&&(CssHandler.addElClass(n,n.getAttribute("data-dl-video-class")),function(){appendEventHandler(n,isIos?"loadedmetadata":"canplaythrough",function(){n.play()})}()),!0;break;default:return i=CssHandler.getIsElHasClass(n,this.cssClassLazyImagesContainer),CssHandler.removeElClass(n,this.cssClassLazyImagesContainer),i}};n.prototype.getAction=function(n,t){function h(n,t){var f=t+getWindowClientAreaHeight(),r,u,i;return n.getAttribute("data-dl-video-start-position")?(r=0,u=n.getAttribute("data-dl-video-start-position"),/^[\d.]+$/.test(u)&&(r=getElementPos(n,!0)[1]+getClientHeight(n)*parseFloat(u)),r<=f):(i=parseInt(n.getAttribute("data-dl-effect-rel-threshold-y")),isNaN(i)&&(i=s.effectRelThresholdY),f-getElementPos(n,!0)[1]>i)}var s=this,f=parseInt(n.getAttribute("data-dl-mobile-width"))||this.effectsMinWidth,i=parseInt(n.getAttribute("data-dl-mobile-height")),c=isIgnoreCaseEqual(n.getAttribute("data-dl-mobile-enabled"),"true"),l=!isIgnoreCaseEqual(n.getAttribute("data-dl-desktop-enabled"),"false"),r,e,o,u;if((c||!(document.documentElement.offsetWidth<=f||i&&document.documentElement.offsetHeight<=i))&&(l||!(document.documentElement.offsetWidth>f)||!i||!(document.documentElement.offsetHeight>i))){if(r=parseInt(n.getAttribute("data-dl-effect-threshold-y"))||0,e=n.getAttribute("data-dl-effect-threshold-type")||"top",r)switch(e){case"top":return{triggerType:"threshold",isApply:t>=r};case"bottom":return{triggerType:"threshold",isApply:t+getWindowClientAreaHeight()>=getScrollHeight()-r}}return o=!n.getAttribute("data-dl-apply-once")||isIgnoreCaseEqual(n.getAttribute("data-dl-apply-once"),"true"),u=h(n,t),u||!o?{triggerType:"visible",isApply:u}:null}};window.DynamicLoading||(window.DynamicLoading=new n)})();
function CHFullSizeImgPopup(n){this.initWindow(n?n.options:null)}CHFullSizeImgPopup.defaults={templates:{wndContent:"<div class='CHFullSizeImgPopup_content'><div class='CHFullSizeImgPopup_header'><button type='button' class='CHFullSizeImgPopup_btnBack' title='{{closeText}}'><\/button><div><a target='_blank' id='{{lnkId}}' title='{{openInNewWindowText}}' class='CHFullSizeImgPopup_lnkOpenInNewWindow'>{{openInNewWindowText}}<\/a><\/div><\/div><div class='CHFullSizeImgPopup_img'><img id='{{imgId}}'/><\/div><\/div>"},text:{close:"Close",openInNewWindow:"Open in new window"}};CHFullSizeImgPopup.prototype.onWindowClick=function(n){isIgnoreCaseEqual(n.target.id,this.imgId)||this.popup.hide()};CHFullSizeImgPopup.prototype.initWindow=function(n){this.opts=mergeOptions(CHFullSizeImgPopup.defaults,n);this.render()};CHFullSizeImgPopup.prototype.render=function(){var t="CHFullSizeImgPopup_popup",n=_$("#"+t),i,r;n&&n.parentNode.removeChild(n);n=document.createElement("div");n.id=t;n.className="CHFullSizeImgPopup_container";this.lnkId=t+"_lnk";this.imgId=t+"_img";n.innerHTML=this.opts.templates.wndContent.replace(/{{closeText}}/g,this.opts.text.close).replace(/{{openInNewWindowText}}/g,this.opts.text.openInNewWindow).replace(/{{lnkId}}/g,this.lnkId).replace(/{{imgId}}/g,this.imgId);document.body.appendChild(n);i=this;appendEventHandler(n,"click",function(n){i.onWindowClick(n)});r={wnd:n,position:"center",showAction:"none",hideAction:"escape",isEffectAppear:!0,isEffectExpand:!1,isAddShadow:!1,isModal:!0};this.popup=new PopupWindow(r)};CHFullSizeImgPopup.prototype.show=function(n,t){t&&this.initWindow(t);_$("#"+this.imgId).src=n;_$("#"+this.lnkId).href=n;this.popup.show()};CHFullSizeImgPopup.prototype.getIsPopupShowing=function(){return this.popup.getIsShowing()};
function ArticleEditor(n){if(this.stateName=n.stateName,this.callbackPanelName=n.callbackPanelName,this.headerPanelName=n.headerPanelName,this.htmlEditorName=n.htmlEditorName,this.contentFrameName=n.contentFrameName,this.keywordsCssClassName=n.keywordsCssClassName,this.lockingPanelName=n.lockingPanelName,this.savingText=n.savingText,this.hashHandlerName=n.hashHandlerName,this.htmlEditorContainerPanelName=n.htmlEditorContainerPanelName,this.ratingCallbackName=n.ratingCallbackName,this.articlesServiceUrl=n.articlesServiceUrl,this.articlesServiceDisqusMarker=n.articlesServiceDisqusMarker,this.articlesServiceGraphCommentMarker=n.articlesServiceGraphCommentMarker,this.articlesServiceChMasterPageMarker=n.articlesServiceChMasterPageMarker,this.popupControlForElementName=n.popupControlForElementName,this.popupsContainerName=n.popupsContainerName,this.popupControlCenteredName=n.popupControlCenteredName,this.popupControlIntroName=n.popupControlIntroName,this.edtVersionLabelName=n.edtVersionLabelName,this.edtVersionDescriptionName=n.edtVersionDescriptionName,this.menuHeaderName=n.menuHeaderName,this.toDoItemsNMaskText=n.toDoItemsNMaskText,this.toDoText=n.toDoText,this.lblToDoMarkName=n.lblToDoMarkName,this.pnlContentFrameContainerName=n.pnlContentFrameContainerName,this.pnlWasItHelpfulName=n.pnlWasItHelpfulName,this.btnWasItHelpfulCloseName=n.btnWasItHelpfulCloseName,this.wasItHelpfulMobileWidth=767,this.wasItHelpfulRatedClass="ArticleEditor_pnlWasItHelpfulRated",this.wasItHelpfulVisible="ArticleEditor_pnlWasItHelpfulVisible",this.wasItHelpfulDetailedFeedbackTextVisible="ArticleEditor_pnlWasItHelpfulDetailedFeedbackTextVisible",this.wasItHelpfulUserEmailVisible="ArticleEditor_pnlWasItHelpfulUserEmailVisible",this.btnHeaderMenuName=n.btnHeaderMenuName,this.pnlHeaderMenuName=n.pnlHeaderMenuName,this.pnlHeaderMenuPopupName=n.pnlHeaderMenuPopupName,this.pnlHeaderButtonsName=n.pnlHeaderButtonsName,this.cmbProjectNameName=n.cmbProjectNameName,this.pnlCreateArticleInPubTextName=n.pnlCreateArticleInPubTextName,this.pnlUpdateAutoDocInPubTextName=n.pnlUpdateAutoDocInPubTextName,this.pnlUpdateAutoDocInTransProjectTextName=n.pnlUpdateAutoDocInTransProjectTextName,this.pnlToDoItemsContainerName=n.pnlToDoItemsContainerName,this.pnlHeaderPlaceholderName=n.pnlHeaderPlaceholderName,this.pnlContentPlaceholderName=n.pnlContentPlaceholderName,this.btnEditName=n.btnEditName,this.btnEditLoaderImgUrl=n.btnEditLoaderImgUrl,this.progressLineHeaderName=n.progressLineHeaderName,this.cmbStatusName=n.cmbStatusName,this.userSelectorAssignedToName=n.userSelectorAssignedToName,this.userSelectorOwnerName=n.userSelectorOwnerName,this.statusColorCssClassNameMask=n.statusColorCssClassNameMask,this.articleNotFoundPageTitle=n.articleNotFoundPageTitle,this.maxItemCountInMark=parseInt(n.maxItemCountInMark),this.maxItemCountMarkMaskText=n.maxItemCountMarkMaskText,this.lblReviewCommentsMarkName=n.lblReviewCommentsMarkName,this.btnReviewCommentsName=n.btnReviewCommentsName,this.pnlReviewCommentsDropdownName=n.pnlReviewCommentsDropdownName,this.multiCommentThreadEditorName=n.multiCommentThreadEditorName,this.articleMetricsInHeaderName=n.articleMetricsInHeaderName,this.pnlTemplateHeaderName=n.pnlTemplateHeaderName,this.pnlContentFrameSpacerName=n.pnlContentFrameSpacerName,this.btnEditEditText=n.btnEditEditText,this.btnEditViewText=n.btnEditViewText,this.btnEditEditImgUrl=n.btnEditEditImgUrl,this.btnEditViewImgUrl=n.btnEditViewImgUrl,this.btnEditUpdateText=n.btnEditUpdateText,this.btnEditUpdateImgUrl=n.btnEditUpdateImgUrl,this.transEditorName=n.transEditorName,this.gaCodeUniversal=n.gaCodeUniversal,this.gaCodeLegacy=n.gaCodeLegacy,this.gaCodeGA4MeasurementIdN=n.gaCodeGA4MeasurementIdN,this.gaDefaultProps=JSON.parse(n.gaDefaultPropsStr),this.readerUiDefaultProps=JSON.parse(n.readerUiDefaultPropsStr),this.edtFeedbackMessageName=n.edtFeedbackMessageName,this.edtUserEmailName=n.edtUserEmailName,this.updateAutoDocsWizardName=n.updateAutoDocsWizardName,this.isAutoDocsLicensed=n.isAutoDocsLicensed=="1",this.curAutoDocsSourceFileId=null,ArticleEditor.headerPanelName=n.headerPanelName,this.isTransProject=!1,this.isShowFeedbackWidget=!1,this.isAllowDetailedFeedack=!1,this.isAllowReaderEmail=!1,!getIsPortalUiProjectExtIdSynchronizing()){this.popupFullSizeImg=new CHFullSizeImgPopup;var t=this;appendEventHandler(window,"load",function(){setTimeout(function(){t.readerPageBodyOverflow=null;t.adjustControl.call(t)},0)});appendEventHandler(window,"unload",function(){if(window[t.stateName].Get("isEditing")){var n=window[t.hashHandlerName].getHashObj(),i="/helper/articles/"+n.projectId+"/"+n.externalId+"/?action=unload-unlock";navigator.sendBeacon(i)}});appendEventHandler(window,"message",function(n){if(n.data){var i=null;try{i=JSON.parse(n.data)}catch(r){}i&&i.ch_nav&&!window[t.hashHandlerName].setHash(i.ch_nav)&&window[t.hashHandlerName].strToObj(i.ch_nav).anchor&&t.navigateToCurAnchor();i&&i.isAutoDocsArticleLoaded&&(t.adjustControl(),t.navigateToCurAnchor());i&&i.isDisqusLoaded&&t.adjustControl();i&&i.isGraphCommentLoaded&&t.adjustControl();i&&i.fullSizeImgData&&!t.popupFullSizeImg.getIsPopupShowing()&&t.popupFullSizeImg.show(i.fullSizeImgData.imgUrl,i.fullSizeImgData.options)}});window[this.stateName].Get("isAuthor")||(ArticleEditor.removeScrollHandler&&ArticleEditor.removeScrollHandler(),ArticleEditor.removeScrollHandler=appendEventHandler(window,"scroll",function(){requestAnimationFrame(function(){t.onReaderScroll.call(t)})},!0,!0),GlobalEvents.addEventHandler("ArticleEditorHeaderStickyChanged",function(n,i){t.onArticleEditorHeaderStickyChanged.call(t,n,i)}));DynamicLoading.init();this.popupControlIntroName&&setTimeout(function(){window[t.popupControlIntroName].ShowWindowAtElementByID(window[t.popupControlIntroName].GetWindowByName("wndIntroVideo"),"pnlBaseMasterMenuContainer")},2e3)}}(function(){var n=window.location.hash.replace("#!","").match(/^[^\/]+/),t;n&&n.length&&(t=n[0],t&&setPortalUiProjectExtId(t))})();ArticleEditor.prototype.onHtmlEditorContainerEndCallback=function(){this.delayedHeaderCallbackType=="header-plus-editor"&&(this.delayedHeaderCallbackType=null,this.performHeaderPlusEditorCallback(this.delayedHeaderHashChangedEventArgs,this.delayedHeaderTransSaveParams),this.delayedHeaderHashChangedEventArgs=null,this.delayedHeaderTransSaveParams=null)};ArticleEditor.prototype.performHeaderPlusEditorCallback=function(n,t){var r,i,u;window[this.btnEditName]&&window[this.btnEditName].SetImageUrl(this.btnEditLoaderImgUrl);window[this.progressLineHeaderName].show();window[this.transEditorName]&&window[this.transEditorName].showProgressLine();this.onBeginCallback();r=window[this.hashHandlerName].getHashObj();i={curUrl:window.location.href,editorState:{isSavingRequired:!1,isGoingReadOnly:window[this.stateName].Get("isGoingReadOnly")}};n.oldObj&&n.oldObj.externalId&&(i.prevArticleExtId=n.oldObj.externalId,i.prevProjectExtId=n.oldObj.projectId,window[this.htmlEditorName]&&(i.editorState.editorViewType=window[this.htmlEditorName].getActiveViewName(),n.oldObj.isEditing&&(i.editorState.isSavingRequired=!0,i.editorState.body=window[this.htmlEditorName].getHtml(),i.editorState.transEditorSaveParam=t)));window[this.stateName].Set("isEditing",r.isEditing);i.articleChangedFromTabName="nostats";u=this;sendRequest("POST","/helper/articles/"+r.projectId+"/"+r.externalId+"/?action="+(n.newObj.isEditing?"lock":"unlock"),i,!0,function(n){u.onArticleRetrievedViaApi(n)})};ArticleEditor.prototype.getCurFrameDoc=function(){var n=null;if(window[this.stateName].Get("isEditing")){if(window[this.htmlEditorName].getDesignViewDocument())return window[this.htmlEditorName].getDesignViewDocument();n=window[this.htmlEditorName].getPreviewFrame()}else n=this.getContentFrame();return n?n.contentDocument||n.contentWindow.document:null};ArticleEditor.prototype.scheduleWasItHelpful=function(){var n=this,t=this.getArticleId();this.wasItHelpfulPopupTimer=setTimeout(function(){n.getArticleId()==t&&n.showWasItHelpful()},5e3)};ArticleEditor.prototype.showWasItHelpful=function(n){if(_$("#"+this.pnlWasItHelpfulName)&&(n||document.documentElement.offsetWidth>this.wasItHelpfulMobileWidth)){var t={wndId:this.pnlWasItHelpfulName,btnClose:_$("#"+this.btnWasItHelpfulCloseName),fixedPosition:{right:"15px",bottom:"15px"},isEffectAppear:!0,isEffectExpand:!0,isAddShadow:!1};this.wasItHelpfulPopup=new PopupWindow(t)}};ArticleEditor.prototype.print=function(){var n=this.getContentWindow();return n.focus(),n.print(),!1};ArticleEditor.prototype.downloadPdf=function(){var n={commandId:"getFocusedNodeId",param:{}};if(this.onTocCommandRequested)this.onTocCommandRequested(this,n);window.location.href="/helper/export?format=pdf&tocNodeIds="+n.param.nodeId};ArticleEditor.prototype.getArticleId=function(){return window[this.stateName].Get("internalId")};ArticleEditor.prototype.saveArticleChangedEventArg=function(n){window[this.stateName].Set("articleChangedFromTabName",n.changedFromTabName);window[this.stateName].Set("articleChangedRefEntityId",typeof n.refEntityId!="undefined"?n.refEntityId.toString():null)};ArticleEditor.prototype.navigateToCurAnchor=function(){var t=window[this.hashHandlerName].getHashObj(),n,i;if(this.isTransProject){window[this.transEditorName].scrollToAnchor(t.anchor);return}if(n=this.getContentWindow(),n&&n.navigateToAnchor){if(this.curAutoDocsSourceFileId?n.navigateToAnchorAutoDocs(t.anchor):n.navigateToAnchor(t.anchor),window[this.stateName].Get("isAuthor"))return;i=getScrollTop(n);(!isIos||isIos&&i!=0)&&(this.getIsPageBodyNonScrollable()?setScrollTop(t.anchor?getScrollTop(n)+(typeof this.articleContentYOffset=="number"?this.articleContentYOffset:0):0,this.getIsPageBodyNonScrollable()?this.getContentDocument():null):setScrollTop(t.anchor?getScrollTop(n)+this.getScrollableHeadersHeight()+(typeof this.articleContentYOffset=="number"?this.articleContentYOffset:0):0))}};ArticleEditor.prototype.navigateToCurTransUnit=function(){var n=window[this.hashHandlerName].getHashObj();n.transUnitId&&window[this.stateName].Get("isEditing")&&window[this.transEditorName]&&window[this.transEditorName].scrollToTransUnit(n.transUnitId)};ArticleEditor.prototype.navigateToCurReviewComment=function(){var n=window[this.hashHandlerName].getHashObj();n.reviewCommentId&&this.popupReviewComments?(this.popupReviewComments.show(),window[this.multiCommentThreadEditorName].highlightThread(n.reviewCommentId)):this.popupReviewComments&&this.popupReviewComments.hide()};ArticleEditor.prototype.refreshFrameUrl=function(){var t,n;getIsPortalUiProjectExtIdSynchronizing()||getIsInFullPageCallback()||(t=this.getContentWindow(),t&&(this.savedScrollPos&&!window[this.stateName].Get("isInternalIdChanged")&&(this.removeFrameLoadScrollHandler&&this.removeFrameLoadScrollHandler(),n=this,this.removeFrameLoadScrollHandler=appendEventHandler(this.getContentFrame(),"load",function(){var t=n.getContentDocument();setScrollTop(getScrollHeight(t)*n.savedScrollPos,t);n.savedScrollPos=0},!0)),t.location.replace("/"+this.articlesServiceUrl+"/"+window.location.hash.replace("#!","")+(window.location.search?window.location.search+"&":"?")+this.articlesServiceChMasterPageMarker+"&"+this.articlesServiceDisqusMarker+"&"+this.articlesServiceGraphCommentMarker),window[this.progressLineHeaderName].show(),window[this.transEditorName]&&window[this.transEditorName].showProgressLine()))};ArticleEditor.prototype.onArticleRetrievedViaApi=function(n){var t,i,u,r;this.startCallbackTimestamp&&(this.isNoProgressLineNeeded=new Date-this.startCallbackTimestamp<500,this.startCallbackTimestamp=null);n.status==202;n.status>=400&&(console.error("Helper service API call failed. The response code is "+n.status+", see response text below."),console.error(n.responseText));t=null;try{t=n.status==200?JSON.parse(n.responseText):null}catch(f){}if(t&&t.redirectUrl){this.setBeforeUnloadConfirmEnabled(!1);window.location.href=t.redirectUrl;return}(!t&&window[this.stateName].Get("isEditing")||t&&t.propsForInternalUsers&&t.propsForInternalUsers.editModeProps&&t.propsForInternalUsers.editModeProps.isSwitchToViewMode)&&(this.isSyncingEditingState=!0,window[this.stateName].Set("isEditing",!1),i=window[this.hashHandlerName].getHashObj(),i.isEditing=!1,window[this.hashHandlerName].setHashObj(i));u=window[this.stateName].Get("internalId")!=(t?t.internalId:null);t?(CssHandler.removeElClass(document.documentElement,"Articles_page_404"),this.updateHeaderFields(t)):(this.initArticleNotFound(),CssHandler.addElClass(document.documentElement,"Articles_page_404"));window[this.progressLineHeaderName].hide();window[this.transEditorName]&&window[this.transEditorName].hideProgressLine();window[this.stateName].Get("isAuthor")||window[this.pnlHeaderPlaceholderName].hide(!0);this.renderContent(!t,t?t.gaProps:null);t&&t.propsForInternalUsers&&t.propsForInternalUsers.editModeProps&&t.propsForInternalUsers.editModeProps.showNotificationHtml&&(r=t.propsForInternalUsers.editModeProps.isNotificationWarning,showNotification(t.propsForInternalUsers.editModeProps.showNotificationHtml,r,!1,!0,r?null:3e3));window[this.headerPanelName].SetVisible(t!=null);this.adjustControl();window[this.lockingPanelName]&&t&&t.propsForInternalUsers&&window[this.lockingPanelName].endUpdate(t.propsForInternalUsers.lockingPanelInfo);t&&t.propsForInternalUsers&&window[this.stateName].Get("isEditing")&&(window[this.htmlEditorName].setHtml(t.propsForInternalUsers.editModeProps.editorSrcForCurView,{curArticleLink:t.curArticleLink,curArticleExtId:t.externalId,curArticleId:this.getArticleId()}),window[this.htmlEditorName].setPreviewFrameUrl(t.propsForInternalUsers.editModeProps.previewFrameUrl));this.onEndCallbackCommon(null,{articleObj:t,isInternalIdChanged:u});!window[this.headerPanelName].InCallback()&&this.isNavigateToReviewCommentAfterCallback&&this.navigateToCurReviewComment();!window[this.headerPanelName].InCallback()&&this.isNavigateToTransUnitAfterCallback&&this.navigateToCurTransUnit()};ArticleEditor.prototype.onRequestedAllMetricsPage=function(){if(this.onAllMetricsPageRequested)this.onAllMetricsPageRequested(this,{})};ArticleEditor.prototype.onFrameLoad=function(){var u=this.getContentWindow(),i,n,r,t;if(this.getCurFrameDoc().getElementById("graphcomment")&&u.initGraphComment(),!getIsPortalUiProjectExtIdSynchronizing()&&!getIsInFullPageCallback()){this.syncFrameHtmlClasses();window[this.stateName].Get("isAuthor")||(this.adjustControl(),i=window[this.hashHandlerName].getHashObj(),i.anchor&&this.navigateToCurAnchor());try{n=this.getContentWindow();window[this.stateName].Get("isAuthor")||(t=this,isFirefox&&appendEventHandler(n,"keydown",function(n){var t=!1;t=arrayContains([33,34,35,36,37,38,39,40],n.keyCode||n.which);t&&document.documentElement.focus()}),appendEventHandler(n,"click",function(){t.adjustControl()}));n&&/\/login\//i.test(n.location.pathname)||window[this.pnlContentPlaceholderName].hide()}catch(f){}if(!this.delayedHeaderCallbackType){window[this.progressLineHeaderName].hide();window[this.transEditorName]&&window[this.transEditorName].hideProgressLine();return}if(r=window[this.callbackPanelName].InCallback()||window[this.headerPanelName].InCallback(),r){this.headerCallbackTimer&&(clearTimeout(this.headerCallbackTimer),this.headerCallbackTimer=null);t=this;this.headerCallbackTimer=setTimeout(function(){t.onFrameLoad()},50);return}window[this.stateName].Set("curHash",window.location.hash);window[this.btnEditName]&&(this.delayedHeaderCallbackType=="header-full"||this.delayedHeaderCallbackType=="header-plus-editor")&&window[this.btnEditName].SetImageUrl(this.btnEditLoaderImgUrl);this.delayedHeaderCallbackType=="header-full"&&(window[this.headerPanelName].PerformCallback(""),this.delayedHeaderCallbackType=null)}};ArticleEditor.prototype.onHashChanged=function(n,t){var i=this.handleParams(t),u,r;window[this.stateName].Set("curHash",window.location.hash);u=window[this.callbackPanelName].InCallback()||window[this.headerPanelName].InCallback();r=null;i!="none"&&!u&&window[this.stateName].Get("isEditing")&&(window[this.htmlEditorName]&&window[this.htmlEditorName].flushEditorData(),this.isTransProject&&window[this.transEditorName]&&(r=window[this.transEditorName].getUnsavedContentChanges(),window[this.transEditorName].endInPlaceEditing()));i!="none"&&setScrollTop(0);window[this.stateName].Get("isEditing")&&window[this.htmlEditorName]&&(i=="all"||i=="header-plus-editor")&&window[this.htmlEditorName].clickInDesignView();switch(i){case"all":u?t.handled=!1:(window[this.htmlEditorName]&&window[this.htmlEditorName].kill(),window[this.stateName].Set("transSaveParam",JSON.stringify(r)),window[this.callbackPanelName].PerformCallback(""));break;case"header-full":t.newObj.mainPart?(t.oldObj||this.adjustControl(),this.delayedHeaderCallbackType=i,this.refreshFrameUrl()):(window[this.stateName].Set("transSaveParam",JSON.stringify(r)),window[this.headerPanelName].PerformCallback(""));break;case"header":var e=hashHandler.getHashObj(),o=this,f={curUrl:window.location.href};f.articleChangedFromTabName=window[this.stateName].Get("articleChangedFromTabName")?window[this.stateName].Get("articleChangedFromTabName"):null;f.articleChangedRefEntityId=isNaN(window[this.stateName].Get("articleChangedRefEntityId"))?null:parseInt(window[this.stateName].Get("articleChangedRefEntityId"));window[this.stateName].Set("articleChangedFromTabName",null);window[this.stateName].Set("articleChangedRefEntityId",null);this.onBeginCallback();this.isNoProgressLineNeeded||(window[this.progressLineHeaderName].show(),window[this.transEditorName]&&window[this.transEditorName].showProgressLine());this.startCallbackTimestamp=new Date;sendRequest("POST","/helper/articles/"+e.projectId+"/"+e.externalId+"/",f,!0,function(n){o.onArticleRetrievedViaApi(n)});break;case"header-plus-editor-after-htmleditor-load":this.delayedHeaderCallbackType="header-plus-editor";this.delayedHeaderHashChangedEventArgs=t;this.delayedHeaderTransSaveParams=r;break;case"header-plus-editor":this.performHeaderPlusEditorCallback(t,r)}};ArticleEditor.prototype.triggerInternalIdChanged=function(n){this.onInternalIdChanged&&this.onInternalIdChanged.call(this,this,{internalId:n})};ArticleEditor.prototype.handleParams=function(n){var t,r,i;return n.oldObj&&!isIgnoreCaseEqual(n.oldObj.projectId,n.newObj.projectId)&&redirectToReaderUiPreviewIfNeeded(n.newObj.projectId,!0)?"none":!window[this.stateName].Get("isAuthor")&&!isIgnoreCaseEqual(getPortalUiProjectExtId(),n.newObj.projectId)&&setPortalUiProjectExtId(n.newObj.projectId)?(this.onBeginCallback(),"none"):(t="all",!arrayContains(n.changedParts,"mainPart")&&arrayContains(n.changedParts,"anchor")&&(t="none",this.navigateToCurAnchor()),arrayContains(n.changedParts,"mainPart")&&(document.documentElement.className&&(document.documentElement.className=CssHandler.removeClass(document.documentElement.className,"projectExtId_\\S+",!0)),n.newObj.projectId&&CssHandler.addElClass(document.documentElement,"projectExtId_"+n.newObj.projectId)),arrayContains(n.changedParts,"reviewCommentId")&&n.newObj.reviewCommentId&&(this.isNavigateToReviewCommentAfterCallback=!0),!arrayContains(n.changedParts,"mainPart")&&arrayContains(n.changedParts,"reviewCommentId")&&(t="none",this.navigateToCurReviewComment(),this.isNavigateToReviewCommentAfterCallback=!1),arrayContains(n.changedParts,"transUnitId")&&n.newObj.transUnitId&&(this.isNavigateToTransUnitAfterCallback=!0),!arrayContains(n.changedParts,"mainPart")&&arrayContains(n.changedParts,"transUnitId")&&(t="none",this.navigateToCurTransUnit(),this.isNavigateToTransUnitAfterCallback=!1),!arrayContains(n.changedParts,"mainPart")&&arrayContains(n.changedParts,"searchQuery")&&(t="none",r=this.getContentDocument(),r&&(i=getStyleByName(this.keywordsCssClassName,r),n.newObj.searchQuery?this.keywordsBackgColor&&(i.style.backgroundColor=this.keywordsBackgColor):(this.keywordsBackgColor=i.style.backgroundColor,i.style.backgroundColor=""),GlobalEvents.trigger("ArticleHighlighted",this,{isHighlighted:!!n.newObj.searchQuery}))),(!window[this.stateName].Get("isAuthor")||window[this.stateName].Get("isAuthor")&&!window[this.stateName].Get("isEditing")&&!arrayContains(n.changedParts,"isEditing"))&&arrayContains(n.changedParts,"mainPart"))?arrayContains(n.changedParts,"projectId")?n.oldObj||!n.newObj.externalId||window[this.stateName].Get("isAuthor")?"header-full":"header":n.oldObj&&!window[this.stateName].Get("internalId")?"all":"header":!n.oldObj&&!window[this.stateName].Get("isEditing")&&!n.newObj.isEditing&&n.newObj.externalId?"header-full":n.oldObj&&(!arrayContains(n.changedParts,"projectId")&&arrayContains(n.changedParts,"isEditing")||!arrayContains(n.changedParts,"projectId")&&window[this.stateName].Get("isEditing")&&arrayContains(n.changedParts,"externalId"))?this.isSyncingEditingState?(this.isSyncingEditingState=!1,"none"):this.isTransProject&&!arrayContains(n.changedParts,"externalId")?(window[this.stateName].Set("isEditing",n.newObj.isEditing),window[this.transEditorName].setIsEditing(n.newObj.isEditing),"none"):!this.isTransProject&&window[this.htmlEditorName]||this.isTransProject&&window[this.transEditorName]?"header-plus-editor":"header-plus-editor-after-htmleditor-load":t};ArticleEditor.prototype.onBeginCallback=function(){if(window[this.htmlEditorName]&&window[this.htmlEditorName].stopAutosaveTimer(),this.wasItHelpfulPopupTimer&&clearTimeout(this.wasItHelpfulPopupTimer),this.wasItHelpfulPopup&&this.wasItHelpfulPopup.wnd){var n=_$("#"+this.pnlWasItHelpfulName);n.style.display="none";CssHandler.removeElClass(n,this.wasItHelpfulRatedClass);this.setDetailedFeedbackTextVisible(!1)}this.unfocusBtnEdit();showFullPageTransparentOverlay()};ArticleEditor.prototype.unfocusBtnEdit=function(){var n=document.activeElement;n&&window[this.btnEditName]&&getIsChildOf(document.activeElement,window[this.btnEditName].GetMainElement())&&n.blur()};ArticleEditor.prototype.refreshTitle=function(n){n&&(document.title=n)};ArticleEditor.prototype.onHtmlEditorLoad=function(){var t=this,n=window[this.stateName];window[this.htmlEditorName].setReadOnly=function(i){i&&n.Get("isEditing")&&(n.Set("isGoingReadOnly",!0),t.switchIsEditing())}};ArticleEditor.prototype.onEndCallbackCommon=function(n,t){function s(n){var t=document.getElementById(":2.container"),i;return t?(i=t.contentDocument||frameElement.contentWindow.document,i.getElementById(n?":2.restore":":2.confirm")):null}var u,h,c,i,f,l,r,e,a,v,o;if(hideFullPageTransparentOverlay(),u=t.articleObj&&t.articleObj.viewFrameHtml,h=window[this.callbackPanelName].GetMainElement(),this.syncEditModeUi(u,t.articleObj&&t.articleObj.isAutoDocs),c=this.isTransProject,this.isTransProject=t.articleObj&&t.articleObj.propsForInternalUsers&&t.articleObj.propsForInternalUsers.isTransProject,CssHandler.switchElClass(h,"ArticleEditor_callbackPanel_transProject",this.isTransProject),document.documentElement.className=CssHandler.removeClass(document.documentElement.className,"projectVis_\\S+",!0),t.articleObj&&CssHandler.addElClass(document.documentElement,"projectVis_"+t.articleObj.projectVisibilityType),this.isTransProject&&t.articleObj.propsForInternalUsers.transEditorInput.editorState.isEditing==null&&(t.articleObj.propsForInternalUsers.transEditorInput.editorState.isEditing=window[this.stateName].Get("isEditing")),window[this.transEditorName]&&(window[this.transEditorName].setVisible(this.isTransProject),window[this.pnlHeaderPlaceholderName].hide(!0),window[this.transEditorName].setData(this.isTransProject?t.articleObj.propsForInternalUsers.transEditorInput:null),!this.isTransProject&&c&&window[this.stateName].Get("isEditing")&&this.adjustControl()),!this.isTransProject&&u&&(isIe?(i=this.getContentDocument(),i&&(i.open(),i.write(t.articleObj.viewFrameHtml),i.close())):(f=this.getContentFrame(),f&&(l=this.curAutoDocsSourceFileId,this.curAutoDocsSourceFileId=t.articleObj.autoDocsSourceFileId,!this.curAutoDocsSourceFileId||l!=this.curAutoDocsSourceFileId||t.articleObj.autoDocsGeneratorType!==0||t.articleObj.isNoOptimizationCacheAutoDoc?f.srcdoc=t.articleObj.viewFrameHtml:(r=this.getContentWindow(),r&&r.loadAutoDocArticleFromSameSourceFile&&r.loadAutoDocArticleFromSameSourceFile(t.articleObj.autoDocsDomNodesSelectionInfo)),e=s(!0),e&&(e.click(),a=setInterval(function(){var n=s(!1);n&&(n.click(),clearInterval(a))},50))))),v=window[this.hashHandlerName].getHashObj(),GlobalEvents.trigger("ArticleHighlighted",this,{isHighlighted:t.articleObj&&!!v.searchQuery&&!t.articleObj.isAutoDocs}),!this.isTransProject&&window[this.stateName].Get("isEditing")&&window[this.htmlEditorName]&&(window[this.htmlEditorName].startAutosaveTimer(),t.isInternalIdChanged&&(this.savedScrollPos=0),window[this.htmlEditorName].setScrollPosInWysiwygAfterLoad(this.savedScrollPos)),t.isInternalIdChanged&&(window[this.popupControlForElementName]&&(o=window[this.popupControlForElementName].GetWindowByName("wndToDo"),window[this.popupControlForElementName].IsWindowVisible(o)&&window[this.popupControlForElementName].PerformWindowCallback(o)),this.isShowFeedbackWidget=t.articleObj&&t.articleObj.isShowReaderFeedbackWidget&&!t.articleObj.isAlreadyRated,this.isAllowDetailedFeedack=t.articleObj&&t.articleObj.isAllowDetailedFeedack,this.isAllowReaderEmail=t.articleObj&&t.articleObj.isAllowReaderEmail,this.isShowFeedbackWidget&&!t.articleObj.isCustomReaderFeedbackWidget?this.scheduleWasItHelpful():(CssHandler.removeElClass(document.documentElement,this.wasItHelpfulRatedClass),CssHandler.switchElClass(document.documentElement,this.wasItHelpfulVisible,this.isShowFeedbackWidget)),this.triggerInternalIdChanged(t.articleObj?t.articleObj.internalId:null)),window[this.cmbStatusName]&&window[this.stateName].Set("originalStatus",window[this.cmbStatusName].GetValue()),t.articleObj&&t.articleObj.propsForInternalUsers&&t.articleObj.propsForInternalUsers.editModeProps)this.triggerSavingCompleteEvents(t.articleObj.propsForInternalUsers.editModeProps.isRaiseTocRefreshRequested,!0);else if(window[this.stateName].Get("headerSaveRes")){this.onSavingComplete(n,{result:window[this.stateName].Get("headerSaveRes")});window[this.stateName].Set("headerSaveRes",null)}if(this.afterCallbackRedirectUrl){window.location.replace(this.afterCallbackRedirectUrl);this.afterCallbackRedirectUrl=null;return}};ArticleEditor.prototype.initArticleNotFound=function(){if(this.refreshTitle(this.articleNotFoundPageTitle),CssHandler.switchElClass(document.documentElement,"Articles_page_404"),this.onArticlePropertyChanged)this.onArticlePropertyChanged(this,{articleObj:null,readerUiDefaultProps:this.readerUiDefaultProps})};ArticleEditor.prototype.setBtnEditType=function(n){var t=window[this.btnEditName];this.curBtnEditType=n;t.SetEnabled(!0);switch(n){case"edit":t.SetImageUrl(this.btnEditEditImgUrl);t.SetText(this.btnEditEditText);t.SetWidth(110);break;case"view":t.SetImageUrl(this.btnEditViewImgUrl);t.SetText(this.btnEditViewText);t.SetWidth(150);break;case"update":t.SetImageUrl(this.btnEditUpdateImgUrl);t.SetText(this.btnEditUpdateText);t.SetWidth(110);t.SetEnabled(this.isAutoDocsLicensed)}};ArticleEditor.prototype.onEndCallback=function(n){var s,r,u,i,t,f,e,o;if(DynamicLoading.init(),window[this.transEditorName]&&window[this.transEditorName].hideProgressLine(),window[this.stateName].Get("redirectUrl")){s=window[this.stateName].Get("redirectUrl");window[this.stateName].Set("redirectUrl",null);this.setBeforeUnloadConfirmEnabled(!1);window.location.href=s;return}if(this.isFirstEndCallbackHappened=!0,window[this.stateName].Get("showNotificationHtml")&&(window[this.stateName].Get("isNotificationWarning")?showNotification(window[this.stateName].Get("showNotificationHtml"),!0,!1,!0):showNotification(window[this.stateName].Get("showNotificationHtml"),!1,!1,!0,3e3),window[this.stateName].Set("showNotificationHtml",null),window[this.stateName].Set("isNotificationWarning",null)),window[this.stateName].Get("editTopicInPubWarningHtml")&&_$("#"+this.pnlCreateArticleInPubTextName)&&(_$("#"+this.pnlCreateArticleInPubTextName).innerHTML=window[this.stateName].Get("editTopicInPubWarningHtml"),window[this.stateName].Set("editTopicInPubWarningHtml",null)),window[this.stateName].Get("updateAutoDocsInPubWarningHtml")&&_$("#"+this.pnlUpdateAutoDocInPubTextName)&&(_$("#"+this.pnlUpdateAutoDocInPubTextName).innerHTML=window[this.stateName].Get("updateAutoDocsInPubWarningHtml"),window[this.stateName].Set("updateAutoDocsInPubWarningHtml",null)),window[this.stateName].Get("updateAutoDocsInTransProjectWarningHtml")&&!window[this.stateName].Get("updateAutoDocsInPubWarningHtml")&&_$("#"+this.pnlUpdateAutoDocInPubTextName)&&(_$("#"+this.pnlUpdateAutoDocInTransProjectTextName).innerHTML=window[this.stateName].Get("updateAutoDocsInTransProjectWarningHtml"),window[this.stateName].Set("updateAutoDocsInTransProjectWarningHtml",null)),window[this.stateName].Set("articleChangedFromTabName",null),window[this.stateName].Set("articleChangedRefEntityId",null),this.renderContent(n==window[this.callbackPanelName]),r=window[this.hashHandlerName].getHashObj(),!window[this.stateName].Get("isEditing")&&r.isEditing&&(r.isEditing=!1,window[this.hashHandlerName].setHashObj(r)),u=window[this.stateName].Get("internalId")!=null,u||window[this.pnlHeaderPlaceholderName].hide(!0),window[this.headerPanelName].SetVisible(u),i=this,t=null,window[this.stateName].Get("newArticleHelper")?(CssHandler.removeElClass(document.documentElement,"Articles_page_404"),t=JSON.parse(window[this.stateName].Get("newArticleHelper")),this.refreshTitle(t.pageTitle),this.curAutoDocsSourceFileId=t.autoDocsSourceFileId,t.propsForInternalUsers&&window[this.lockingPanelName].endUpdate(t.propsForInternalUsers.lockingPanelInfo)):(this.initArticleNotFound(),CssHandler.addElClass(document.documentElement,"Articles_page_404")),this.onArticlePropertyChanged)this.onArticlePropertyChanged(this,{articleObj:t});window[this.stateName].Set("newArticleHelper",null);this.onEndCallbackCommon(n,{articleObj:t,isInternalIdChanged:window[this.stateName].Get("isInternalIdChanged")});window[this.stateName].Set("isInternalIdChanged",!1);f=_$("#"+this.btnReviewCommentsName);f&&(this.popupReviewComments=new PopupWindow({wnd:_$("#"+this.pnlReviewCommentsDropdownName),target:f,position:"bottom",showAction:"click",hideAction:"click",isEffectAppear:!0,isEffectExpand:!0,isAddShadow:!0,isRenderBeak:!0}),this.popupReviewComments.onShowing=function(){window[i.multiCommentThreadEditorName].setArticleId(window[i.stateName].Get("internalId"));var n=i.getCurFrameDoc();!n||window[this.htmlEditorName]&&n==window[this.htmlEditorName].getDesignViewDocument()||CssHandler.addElClass(n.body,"Article_showReviewComments")},this.popupReviewComments.onHiding=function(){window[i.multiCommentThreadEditorName].saveState();var n=i.getCurFrameDoc();!n||window[this.htmlEditorName]&&n==window[this.htmlEditorName].getDesignViewDocument()||CssHandler.removeElClass(n.body,"Article_showReviewComments")});this.setIsMobileView(this.isMobileView);e=_$("#"+this.pnlHeaderMenuPopupName);o=_$("#"+this.btnHeaderMenuName);e&&o&&(this.popupHeaderMenu=new PopupWindow({wnd:e,target:o,position:"bottom",showAction:"click",hideAction:"click",isEffectAppear:!0,isEffectExpand:!0,isRenderBeak:!0}));this.isNavigateToReviewCommentAfterCallback&&(this.navigateToCurReviewComment(),this.isNavigateToReviewCommentAfterCallback=!1);this.isNavigateToTransUnitAfterCallback&&(this.navigateToCurTransUnit(),this.isNavigateToTransUnitAfterCallback=!1);setTimeout(function(){i.adjustControl()},0)};ArticleEditor.prototype.onBtnRemoveHliteClick=function(){var n=window[this.hashHandlerName].getHashObj();n.searchQuery="";window[this.hashHandlerName].setHashObj(n)};ArticleEditor.prototype.showTopicRated=function(){if(CssHandler.removeElClass(this.getContentDocument().documentElement,this.wasItHelpfulVisible),CssHandler.removeElClass(document.documentElement,this.wasItHelpfulVisible),CssHandler.addElClass(this.getContentDocument().documentElement,this.wasItHelpfulRatedClass),CssHandler.addElClass(document.documentElement,this.wasItHelpfulRatedClass),this.wasItHelpfulPopup){var n=this;this.wasItHelpfulPopupTimer=setTimeout(function(){n.wasItHelpfulPopup.hide()},1e3)}};ArticleEditor.prototype.rate=function(n){window[this.ratingCallbackName].PerformCallback(n?2:1);!n&&this.isAllowDetailedFeedack?this.setDetailedFeedbackTextVisible(!0):this.showTopicRated()};ArticleEditor.prototype.setDetailedFeedbackTextVisible=function(n){CssHandler.switchElClass(_$("#"+this.pnlWasItHelpfulName),this.wasItHelpfulDetailedFeedbackTextVisible,n);CssHandler.switchElClass(_$("#"+this.pnlWasItHelpfulName),this.wasItHelpfulUserEmailVisible,this.isAllowReaderEmail);n&&(window[this.edtFeedbackMessageName].SetText(""),window[this.edtFeedbackMessageName].SetIsValid(!0),window[this.edtUserEmailName].SetText(""),window[this.edtUserEmailName].SetIsValid(!0),this.showWasItHelpful(!0),window[this.edtFeedbackMessageName].Focus())};ArticleEditor.prototype.onBtnSendDetailedFeedbackClick=function(){if(window[this.edtFeedbackMessageName].Validate(),window[this.edtUserEmailName].Validate(),window[this.edtFeedbackMessageName].GetIsValid()&&window[this.edtUserEmailName].GetIsValid()){var t={readerEmail:window[this.edtUserEmailName].GetText(),feedbackText:window[this.edtFeedbackMessageName].GetText()},n=window[this.hashHandlerName].getHashObj();sendRequest("POST","/helper/articles/"+n.projectId+"/"+n.externalId+"/?action=sendFeedback",t,!0);this.showTopicRated()}};ArticleEditor.prototype.onArticleStatusChanged=function(n,t){t.isSupressSaving||this.save("Status")};ArticleEditor.prototype.onArticleAssignedToChanged=function(n,t){t.isSupressSaving||this.save("AssignedTo")};ArticleEditor.prototype.onArticleOwnerChanged=function(n,t){t.isSupressSaving||this.save("Owner")};ArticleEditor.prototype.updateHeaderFields=function(n){function f(n){return e.statusColorCssClassNameMask.replace("{0}",toCamelCase(n))}var e=this,t,i,r,u;if(this.refreshTitle(n.pageTitle),window[this.stateName].Set("internalId",n.internalId),n.propsForInternalUsers){if(t=n.propsForInternalUsers,window[this.cmbStatusName]){for(window[this.cmbStatusName].BeginUpdate(),window[this.cmbStatusName].ClearItems(),i=0;i<t.availableStatuses.length;i++)window[this.cmbStatusName].AddItem(t.availableStatuses[i],t.availableStatuses[i]),window[this.cmbStatusName].AddItemCssClass(i,f(t.availableStatuses[i]));window[this.cmbStatusName].EndUpdate();window[this.cmbStatusName].SetValue(t.curStatus);r=window[this.cmbStatusName].GetMainElement();r.className=r.className.replace(f("[^ ]+"),"");CssHandler.addElClass(r,f(window[this.cmbStatusName].GetValue()));window[this.userSelectorAssignedToName].setSelectedUser(t.assignedTo.userName,t.assignedTo.userFullName,t.assignedTo.avatarImgUrl);window[this.userSelectorOwnerName].setSelectedUser(t.owner.userName,t.owner.userFullName,t.owner.avatarImgUrl)}this.updateToDoCountMark(t.toDoItemsCountMark);u=_$("#"+this.lblReviewCommentsMarkName);u&&(u.innerHTML=t.reviewCommentCountMark,u.style.display=t.reviewCommentCountMark?"":"none");window[this.articleMetricsInHeaderName].setItems(t.metrics)}if(this.onArticlePropertyChanged)this.onArticlePropertyChanged(this,{articleObj:n})};ArticleEditor.prototype.setIsSavingIndicator=function(n){n?(this.btnEditOriginalImgUrl=window[this.btnEditName].GetImageUrl(),this.btnEditOriginalText=window[this.btnEditName].GetText(),window[this.btnEditName].SetImageUrl(this.btnEditLoaderImgUrl),window[this.btnEditName].SetText(this.savingText)):this.btnEditOriginalText&&(window[this.btnEditName].SetImageUrl(this.btnEditOriginalImgUrl),window[this.btnEditName].SetText(this.btnEditOriginalText),this.btnEditOriginalImgUrl=null,this.btnEditOriginalText=null)};ArticleEditor.prototype.save=function(n){var t,i;window[this.lockingPanelName].getIsUiLocked()||(window[this.lockingPanelName].updatesInProgressCount<1?(t="save-workflow"+(n?"\t"+n:""),this.setIsSavingIndicator(!0),window[this.lockingPanelName].beginUpdate(),window[this.headerPanelName].PerformCallback(t)):(i=this,setTimeout(function(){i.save(n)},500)))};ArticleEditor.prototype.triggerSavingCompleteEvents=function(n,t){if(n&&this.onTocCommandRequested)this.onTocCommandRequested(this,{commandId:"menuItemRefresh"});t&&this.popupReviewComments.getIsShowing()&&window[this.multiCommentThreadEditorName].refresh()};ArticleEditor.prototype.onSavingComplete=function(n,t){var i=JSON.parse(t.result);n!=window[this.headerPanelName]&&(window[this.lockingPanelName].endUpdate(i.lockingPanelInfo),this.setIsSavingIndicator(!1));i.articleHelper&&this.updateHeaderFields(JSON.parse(i.articleHelper));this.triggerSavingCompleteEvents(i.isRaiseTocRefreshRequested,i.isRefreshReviewCommentsDropdown)};ArticleEditor.prototype.onHtmlEditorProjectIdRequested=function(n,t){t.projectId=window[this.stateName].Get("curProjectId");t.projectExtId=window[this.stateName].Get("curProjectExtId");t.filesFolder=window[this.stateName].Get("curProjectFilesFolder")};ArticleEditor.prototype.onHtmlEditorBeforeCustomCommandExecuted=function(n,t){function r(n){window[i.lockingPanelName].updatesInProgressCount<1?(window[i.lockingPanelName].beginUpdate(),i.setIsSavingIndicator(!0)):n.isCancel=!0;return}var i=this;switch(t.commandName){case HtmlEditorCommandConsts.SAVE_COMMAND:case HtmlEditorCommandConsts.SET_ASSIGNEDTO:case HtmlEditorCommandConsts.SET_OWNER:case HtmlEditorCommandConsts.SET_STATUS:case HtmlEditorCommandConsts.SET_OUT_TAG:case HtmlEditorCommandConsts.REFRESH_COMMAND:r(t);break;default:window.SourceEditorCommandConsts&&t.commandName==SourceEditorCommandConsts.SAVE&&r(t)}};ArticleEditor.prototype.onHtmlEditorCustomCommandExecuted=function(n,t){switch(t.commandName){case HtmlEditorCommandConsts.SAVE_COMMAND:case HtmlEditorCommandConsts.SET_ASSIGNEDTO:case HtmlEditorCommandConsts.SET_OWNER:case HtmlEditorCommandConsts.SET_STATUS:case HtmlEditorCommandConsts.SET_OUT_TAG:case HtmlEditorCommandConsts.REFRESH_COMMAND:this.onSavingComplete(n,t);break;default:if(window.SourceEditorCommandConsts&&t.commandName==SourceEditorCommandConsts.SAVE)this.onSavingComplete(n,t)}};ArticleEditor.prototype.setVisible=function(n){window[this.callbackPanelName].SetVisible(n);this.adjustControl()};ArticleEditor.prototype.getVisible=function(){return window[this.callbackPanelName].GetVisible()};ArticleEditor.prototype.showReviewCommentsWindow=function(){this.popupReviewComments&&this.popupReviewComments.show()};ArticleEditor.prototype.showToDoItems=function(){this.showPopupWindowForElement("wndToDo",!0)};ArticleEditor.prototype.onMultiCommentThreadEditorKeyDown=function(n,t){var i=t.keyCode||t.which;i==27&&(this.popupReviewComments.hide(),stopBubbling(t))};ArticleEditor.prototype.onMultiCommentThreadClick=function(n,t){var f=this.getCurFrameDoc(),i,r,u;f&&(i=f.querySelector("*[data-comment-hotspot='"+t.threadId+"']"),i&&(i.scrollIntoView(!1),r=this.popupReviewComments.wnd,u=getIsElementsIntersect(r,i),u&&(r.style.opacity=.3),highlightEl(i,{hliterId:this.callbackPanelName+"_commentHotspotHliter",hliterCssClass:"ArticleEditor_commentHotspotHliter",hliterParentId:window[this.htmlEditorContainerPanelName].id,effectTimeout:300}),u&&setTimeout(function(){r.style.opacity=1},1e3)))};ArticleEditor.prototype.onBtnEditTitleClick=function(){if(this.onBtnPropertiesClick)this.onBtnPropertiesClick(this,{isFocusTopicTitle:!0,internalId:window[this.stateName].Get("internalId"),pageName:"visibility"})};ArticleEditor.prototype.onTransEditorTransUnitUrlRequested=function(n,t){var i=window[this.hashHandlerName].getHashObj();i.isEditing=!0;i.transUnitId=t.idStr;t.url=window.location.href.replace(/#.+/,"")+window[this.hashHandlerName].objToStr(i)};ArticleEditor.prototype.onTransEditorArticleEditorCommandRequested=function(n,t){this.executeCommand(t.commandId,t.param)};ArticleEditor.prototype.onTransEditorTransSaved=function(n,t){if(t.isIdUnit){var i=window[this.hashHandlerName].getHashObj();i.externalId=t.value;window[this.hashHandlerName].setHashObj(i)}if((t.isTitleUnit||t.isIdUnit||t.isWorkflowStatus)&&this.onTocCommandRequested)this.onTocCommandRequested(this,{commandId:"menuItemRefresh"})};ArticleEditor.prototype.onHeaderMenuClick=function(n,t){this.executeCommand(t.item.id);StatsWriter.registerEvent(EventTypes.articleEditor.headerMenuItemClick,{itemName:t.item.id})};ArticleEditor.prototype.getWindowForElementSize=function(){var n=this.popupsContainerName?document.getElementById(this.popupsContainerName):null;return n&&n.offsetWidth>0&&n.offsetHeight>0?{width:n.offsetWidth,height:n.offsetHeight}:null};ArticleEditor.prototype.updateToDoCountMark=function(n){var r=typeof n=="string"?n:n>this.maxItemCountInMark?this.maxItemCountMarkMaskText.replace("{0}",this.maxItemCountInMark):n,t=window[this.menuHeaderName].getItem("todo"),i;t&&(i=r?this.toDoItemsNMaskText.replace("{0}",r):this.toDoText,i!=t.t&&(t.t=i,window[this.menuHeaderName].setItem(t)))};ArticleEditor.prototype.onToDoItemDoneChanged=function(n,t){if(this.updateToDoCountMark(t.notDoneItemsCount),this.onTocCommandRequested)this.onTocCommandRequested(this,{commandId:"menuItemRefresh"})};ArticleEditor.prototype.showPopupWindowForElement=function(n,t){var i=window[this.popupControlForElementName].GetWindowByName(n),u,r;n=="wndToDo"&&window[this.popupControlForElementName].PerformWindowCallback(i);u=this.popupsContainerName?document.getElementById(this.popupsContainerName):null;r=this.getWindowForElementSize();r?(t&&window[this.popupControlForElementName].SetWindowSize(i,r.width,r.height),window[this.popupControlForElementName].ShowWindowAtElement(i,u)):window[this.popupControlForElementName].ShowWindowAtPos(i,document.documentElement.offsetWidth-window[this.popupControlForElementName].GetWindowWidth(i)-10,document.documentElement.offsetHeight-window[this.popupControlForElementName].GetWindowHeight(i))};ArticleEditor.prototype.onHtmlEditorCreateVersionRequested=function(){window[this.popupControlCenteredName].ShowWindow(window[this.popupControlCenteredName].GetWindowByName("wndCreateVersion"))};ArticleEditor.prototype.onHtmlEditorVersionHistoryRequested=function(n,t){if(this.onVersionHistoryRequested)this.onVersionHistoryRequested(n,t)};ArticleEditor.prototype.onHtmlEditorLinkViewerRequested=function(n,t){if(this.onLinkViewerRequested)this.onLinkViewerRequested(n,t)};ArticleEditor.prototype.onHtmlEditorCreateSnippetRequested=function(n,t){if(this.onCreateSnippetRequested)this.onCreateSnippetRequested(n,t)};ArticleEditor.prototype.onArticleCreated=function(n,t){if(window[this.htmlEditorName])window[this.htmlEditorName].onArticleCreated(n,t)};ArticleEditor.prototype.onDlgCreateVersionBtnClick=function(n,t){t.buttonName=="ok"&&(window[this.popupControlCenteredName].HideWindow(window[this.popupControlCenteredName].GetWindowByName("wndCreateVersion")),window[this.headerPanelName].PerformCallback("ver\t"+JSON.stringify({label:window[this.edtVersionLabelName].GetValue(),description:window[this.edtVersionDescriptionName].GetValue()})))};ArticleEditor.prototype.onDlgEditArticleInPubBtnClick=function(n,t){switch(t.buttonName){case"ok":var i=window[this.hashHandlerName].getHashObj();window.location.href=`/helper/articles/${i.projectId}/${i.externalId}/?action=redirectToProject`;break;case"additional":window[this.popupControlCenteredName].HideWindow(window[this.popupControlCenteredName].GetWindowByName("wndEditArticleInPub"));this.switchIsEditing(!0)}};ArticleEditor.prototype.onRedirectToReaderPreview=function(n,t){this.lockAndRedirect(t.readerPreviewUrl)};ArticleEditor.prototype.lockAndRedirect=function(n){if(window[this.stateName].Get("isEditing"))this.afterCallbackRedirectUrl=n,this.switchIsEditing();else if(n){window.location.replace(n);return}};ArticleEditor.prototype.onDlgUpdateAutoDocsInPubBtnClick=function(n,t){switch(t.buttonName){case"ok":window.location.href=window[this.stateName].Get("curProjectParentUrl")}};ArticleEditor.prototype.onDlgUpdateAutoDocsInTransProjectBtnClick=function(n,t){switch(t.buttonName){case"ok":window.location.href=window[this.stateName].Get("curProjectBaseLangProjectUrl")}};ArticleEditor.prototype.setIsEditing=function(n){window[this.stateName].Get("isEditing")!=n&&this.switchIsEditing()};ArticleEditor.prototype.switchIsEditing=function(n){var t,r,i;if(n||!window[this.stateName].Get("curProjectParentUrl")||window[this.stateName].Get("isEditing"))this.isTransProject||(this.savedScrollPos=0,window[this.stateName].Get("isEditing")&&window[this.htmlEditorName]?this.savedScrollPos=window[this.htmlEditorName].getScrollPosInWysiwyg():(t=this.getContentDocument(),t&&t.body&&(r=this.getContentWindow(),this.savedScrollPos=getScrollTop(r)/getScrollHeight(t)))),i=window[this.hashHandlerName].getHashObj(),i.isEditing=!i.isEditing,window[this.hashHandlerName].setHashObj(i),window[this.btnEditName].SetImageUrl(this.btnEditLoaderImgUrl);else{window[this.popupControlCenteredName].ShowWindow(window[this.popupControlCenteredName].GetWindowByName("wndEditArticleInPub"));return}};ArticleEditor.prototype.onTransEditorEditingChanged=function(n,t){if(this.setIsEditing(t.isEditing),this.afterCallbackRedirectUrl){window[this.transEditorName].setBeforeUnloadConfirmEnabled(t.isEditing);window.location.replace(this.afterCallbackRedirectUrl);this.afterCallbackRedirectUrl=null;return}};ArticleEditor.prototype.onBtnEditClick=function(){isIgnoreCaseEqual(this.curBtnEditType,"edit")||isIgnoreCaseEqual(this.curBtnEditType,"view")?this.switchIsEditing():this.showUpdateAutoDocsDialog(this.getArticleId(),"Article")};ArticleEditor.prototype.showUpdateAutoDocsDialog=function(n,t){if(window[this.stateName].Get("curProjectParentUrl")){window[this.popupControlCenteredName].ShowWindow(window[this.popupControlCenteredName].GetWindowByName("wndUpdateAutoDocsInPub"));return}if(this.isTransProject){window[this.popupControlCenteredName].ShowWindow(window[this.popupControlCenteredName].GetWindowByName("wndUpdateAutoDocsInTransProject"));return}window[this.updateAutoDocsWizardName].showDialog(n,t,window[this.stateName].Get("curProjectId"))};ArticleEditor.prototype.onUpdateAutoDocsWizardClosing=function(n,t){if(t.isTaskEnded)if(t.redirectUrl)this.setBeforeUnloadConfirmEnabled(!1),window.location.href=t.redirectUrl;else if(t.selNodeId)this.onTocCommandRequested(this,{commandId:"selectAndRefresh",param:{selNodeId:t.selNodeId}})};ArticleEditor.prototype.onPopupWindowForElementResized=function(){this.adjustControl()};ArticleEditor.prototype.onPopupWindowForElementBeginCallback=function(){_$("#"+this.pnlToDoItemsContainerName).style.display="none"};ArticleEditor.prototype.onPopupWindowForElementEndCallback=function(){_$("#"+this.pnlToDoItemsContainerName).style.display=""};ArticleEditor.prototype.getScrollableHeadersHeight=function(n){return n||(n=getPortalUiProps()),(n.isStickyAppHeader?0:this.appHeaderHeight)+(n.isStickyArticleHeader?0:this.articleHeaderHeight)};ArticleEditor.prototype.onReaderScroll=function(){var i=getPortalUiProps(),r=0,u=getScrollTop(this.getIsPageBodyNonScrollable()?this.getContentWindow():null),f=document.getElementById(this.pnlContentFrameContainerName),e,h;if(i.isStickyAppHeader&&i.isStickyArticleHeader&&!this.isShortTopic||(i.isStickyAppHeader?r=this.appHeaderHeight:i.isStickyArticleHeader&&(r=this.articleHeaderHeight),this.articleContentYOffset!=0&&(r+=this.articleContentYOffset),e=this.getIsPageBodyNonScrollable()?this.spacerOffsetTop:this.spacerOffsetTop-u,f.style.top=this.isShortTopic&&e<0?Math.min(r,e)+"px":Math.max(r,e)+"px"),this.appFooterOffsetTop&&(f.style.bottom=Math.max(0,u+this.windowClientAreaHeight-this.appFooterOffsetTop)+"px"),isIos){var n=this.getContentDocument(),t=this.getContentFrame(),c=t.offsetHeight-getClientHeight(t),l=t.offsetWidth-getClientWidth(t),o=isIgnoreCaseEqual(getComputedStyle(t).boxSizing,"border-box"),a=f.offsetHeight-(o?0:c)-getMarginsHeight(t),v=f.offsetWidth-(o?0:l)-getMarginsWidth(t),y=n.documentElement.offsetHeight-getClientHeight(n.documentElement),p=n.documentElement.offsetWidth-getClientWidth(n.documentElement),s=isIgnoreCaseEqual(getComputedStyle(n.documentElement).boxSizing,"border-box"),w=a-(s?0:y)-getMarginsHeight(n.documentElement)-(o?c:0),b=v-(s?0:p)-getMarginsWidth(n.documentElement)-(o?l:0),d=n.body.offsetHeight-getClientHeight(n.body),g=n.body.offsetWidth-getClientWidth(n.body),k=isIgnoreCaseEqual(getComputedStyle(n.body).boxSizing,"border-box"),nt=w-(k?0:d)-getMarginsHeight(n.body)-(s?y:0),tt=b-(k?0:g)-getMarginsWidth(n.body)-(s?p:0);t.style.height=a+"px";t.style.width=v+"px";n.documentElement.style.height=w+"px";n.documentElement.style.width=b+"px";n.body.style.height=nt+"px";n.body.style.width=tt+"px"}h=this.getContentDocument();!h||!h.documentElement||u==0&&this.getIsPageBodyNonScrollable()||setScrollTop(this.getIsPageBodyNonScrollable()?u:u-this.getScrollableHeadersHeight(i),h)};ArticleEditor.getPnlHeader=function(){return window[ArticleEditor.headerPanelName]?window[ArticleEditor.headerPanelName].GetMainElement():null};ArticleEditor.prototype.onArticleEditorHeaderStickyChanged=function(){this.adjustControl(!0)};ArticleEditor.prototype.adjustControl=function(n){var i=document.getElementById(this.pnlContentFrameContainerName),t=window[this.headerPanelName]?window[this.headerPanelName].GetMainElement():null,h=0,k=window[this.callbackPanelName].GetMainElement(),c=k.parentNode,a,nt,tt,w,e,u,o,s,b;if(window[this.stateName].Get("isAuthor"))h=getAdjustedElementHeight(c,t);else{var r=getPortalUiProps(),l=_$("#"+this.pnlContentFrameSpacerName),it=document.getElementById("pnlBaseMasterMenuContainer"),d=document.getElementById("pnlBaseMasterFooter");this.appHeaderHeight=it.offsetHeight;a=d.offsetHeight;this.windowClientAreaHeight=getWindowClientAreaHeight();this.articleHeaderHeight=t.offsetHeight;this.articleContentYOffset=getElementPos(c,!1,c.parentNode)[1];i.style.height="0";var f=0,v=null,g=null,y=null,p=null;r.isStickyArticleHeader&&(g=r.isStickyAppHeader?0:this.appHeaderHeight,v=r.isStickyAppHeader?this.appHeaderHeight:0,nt=CssHandler.getIsElHasClass(t,"sticky"),r.isStickyNavPanel&&(p=nt?this.articleHeaderHeight:0));r.isStickyAppHeader&&r.isStickyArticleHeader&&(y=this.appHeaderHeight+this.articleHeaderHeight)}if(window[this.stateName].Get("isEditing")&&window[this.htmlEditorName]?(window[this.htmlEditorContainerPanelName].GetMainElement().style.height=h+"px",window[this.htmlEditorName].adjustControl()):i&&(window[this.stateName].Get("isAuthor")?(i.style.height=h+"px",i.style.width=getClientWidth(window[this.callbackPanelName].GetMainElement())+"px"):(r.isStickyArticleHeader&&(tt=!t.getAttribute("data-dl-class"),t.setAttribute("data-dl-class","sticky"),t.setAttribute("data-dl-mobile-enabled","true"),t.setAttribute("data-dl-effect-threshold-y",g),t.setAttribute("data-dl-onaddeffect","GlobalEvents.trigger('ArticleEditorHeaderStickyChanged',ArticleEditor.getPnlHeader(),{isSticky:true})"),t.setAttribute("data-dl-onremoveeffect","GlobalEvents.trigger('ArticleEditorHeaderStickyChanged',ArticleEditor.getPnlHeader(),{isSticky:false})"),tt&&DynamicLoading.init(),n||DynamicLoading.handleScroll()),t.style.top=v==null?"":v+"px",CssHandler.addElClass(i,"sticky"),i.style.height="",i.style.bottom="0",i.style.top=y!=null?y+"px":"",i.style.width=getClientWidth(window[this.callbackPanelName].GetMainElement())+"px",w=Math.max(0,getMarginsHeight(_$("#pnlBaseMasterContainer"))),isIos?(e=this.getContentFrame(),e.style.height="auto",e.style.width="auto",e.style.overflow="hidden",e.setAttribute("scrolling","no"),u=this.getContentDocument(),u.body.style.width="auto",this.getIsPageBodyNonScrollable()||(u.body.style.height="auto",u.documentElement.style.height="auto"),u.documentElement.style.width="auto",u.documentElement.style.overflow="hidden",u.body.style.overflow="hidden",f=this.getContentDocument()&&this.getContentDocument().documentElement?getScrollHeight(this.getContentDocument())+a+w:0):f=this.getContentDocument()&&this.getContentDocument().documentElement?getScrollHeight(this.getContentDocument())+w:0,l.style.marginTop=p!=null?p+"px":"",this.spacerOffsetTop=getElementPos(l,!0)[1],this.isShortTopic=f<this.windowClientAreaHeight-this.spacerOffsetTop,f=Math.max(f,this.windowClientAreaHeight-this.spacerOffsetTop),l.style.height=f+"px",this.appFooterOffsetTop=a>0?getElementPos(d,!0)[1]:null,this.onReaderScroll())),o=this.getWindowForElementSize(),o&&window[this.popupControlForElementName])for(s=0;s<window[this.popupControlForElementName].GetWindowCount();s++)b=window[this.popupControlForElementName].GetWindow(s),window[this.popupControlForElementName].IsWindowVisible(b)&&window[this.popupControlForElementName].SetWindowSize(b,o.width,o.height);if(this.isTransProject&&window[this.transEditorName].setHeight(getClientHeight(k.parentNode)),window[this.pnlContentPlaceholderName].adjustControl(),window[this.pnlHeaderPlaceholderName].adjustControl(),window[this.progressLineHeaderName].adjustControl(),window[this.cmbProjectNameName]&&window[this.cmbProjectNameName].adjustControl(),this.onResized)this.onResized(this,{})};ArticleEditor.prototype.refresh=function(){window[this.callbackPanelName].InCallback()||window[this.callbackPanelName].PerformCallback("lockingpanel-refresh")};ArticleEditor.prototype.onHeaderMenuViewSwitched=function(n,t){this.setIsMobileView(t.isMobileView)};ArticleEditor.prototype.syncEditModeUi=function(n,t){var i,u,r,e,f;if(window[this.stateName].Get("isAuthor")){if(CssHandler.switchElClass(pnlContainer,"ArticleEditor_callbackPanel_autoDocs",t),t&&this.setIsEditing(!1),i=window[this.stateName].Get("isEditing"),u=window[this.callbackPanelName].GetMainElement(),CssHandler.switchElClass(document.documentElement,"ArticleEditor_editing",i),CssHandler.getIsElHasClass(u,"ArticleEditor_callbackPanel_editing")!=i){if(!n&&!i){for(r=this.getContentDocument().documentElement;r.firstChild;)r.removeChild(r.firstChild);this.refreshFrameUrl();isFrameUrlRefreshed=!0}CssHandler.switchElClass(u,"ArticleEditor_callbackPanel_editing",i);this.adjustControl()}this.setBeforeUnloadConfirmEnabled(i);e=window[this.btnEditName];e&&(f=i?"view":"edit",t&&(f="update"),this.setBtnEditType(f))}};ArticleEditor.prototype.setBeforeUnloadConfirmEnabled=function(n){if(this.isTransProject){window.removeEventListener("beforeunload",this.onbeforeunload);return}n?window.addEventListener("beforeunload",this.onbeforeunload):window.removeEventListener("beforeunload",this.onbeforeunload)};ArticleEditor.prototype.syncFrameHtmlClasses=function(){if(!window[this.stateName].Get("isEditing")){var n=this.getContentDocument()?this.getContentDocument().documentElement:null;n&&(CssHandler.switchElClass(n,"desktopView",!this.isMobileView),CssHandler.switchElClass(n,"mobileView",this.isMobileView),CssHandler.removeElClass(this.getContentDocument().documentElement,this.wasItHelpfulRatedClass),CssHandler.switchElClass(this.getContentDocument().documentElement,this.wasItHelpfulVisible,this.isShowFeedbackWidget))}};ArticleEditor.prototype.setIsMobileView=function(n){var i=" ArticleEditor_callbackPanelMobile",r=window[this.callbackPanelName].GetMainElement(),t=_$("#"+this.pnlHeaderMenuName),u=_$("#"+this.pnlHeaderMenuPopupName),f=_$("#"+this.pnlHeaderButtonsName);n?(t&&u.appendChild(t),CssHandler.addElClass(r,i)):n||(t&&f.appendChild(t),CssHandler.removeElClass(r,i));window[this.transEditorName]&&window[this.transEditorName].setIsMobileView(n);this.isMobileView=n;this.syncFrameHtmlClasses()};ArticleEditor.prototype.getContentWindow=function(){var n=this.getContentFrame();return n!=null?n.contentWindow:null};ArticleEditor.prototype.getContentDocument=function(){var n=this.getContentFrame();return n?n.contentDocument?n.contentDocument:n.contentWindow.document:null};ArticleEditor.prototype.getContentFrame=function(){return window[this.stateName].Get("isEditing")?null:document.getElementById(this.contentFrameName)};ArticleEditor.prototype.reportGaConversions=function(n){if(!window[this.stateName].Get("isReaderUiPreviewMode")&&(n||this.getArticleId()||(n=this.gaDefaultProps),n&&n.isEnabled)){var i=hashHandler.getHashObj(),t=endNotWithPathSeparator(location.pathname)+"/"+i.projectId+"/"+i.externalId,r=document.title;n.propertyId&&(n.isUniversalAnalytics?(window.ga||(eval(this.gaCodeUniversal),ga("create",n.propertyId),ga("require","linkid","linkid.js")),ga("send","pageview",t)):(window._gaq||(eval(this.gaCodeLegacy),_gaq.push(["_setAccount",n.propertyId])),_gaq.push(["_trackPageview",t])));n.ga4MeasurementId&&(typeof gtag!="function"?(eval(this.gaCodeGA4MeasurementIdN.replace("{{measurementId}}",n.ga4MeasurementId)),gtag("js",new Date),gtag("config",n.ga4MeasurementId)):gtag("event","page_view",{page_title:r,page_location:t,send_to:n.ga4MeasurementId}))}};ArticleEditor.prototype.renderContent=function(n,t){var i=this;window[this.stateName].Get("isEditing")||(n&&this.refreshFrameUrl(),this.reportGaConversions(t))};ArticleEditor.prototype.getIsPageBodyNonScrollable=function(){return this.readerPageBodyOverflow||(this.readerPageBodyOverflow=getComputedStyle(document.body).overflow),isIgnoreCaseEqual(this.readerPageBodyOverflow,"hidden")};ArticleEditor.prototype.getIsEditingState=function(){return window[this.stateName].Get("isEditing")};ArticleEditor.prototype.loadHtmlEditorIfNeeded=function(){!window[this.htmlEditorName]&&!window[this.callbackPanelName].InCallback()&&window[this.stateName].Get("isAuthor")&&window[this.stateName].Get("internalId")&&window[this.htmlEditorContainerPanelName].PerformCallback()};ArticleEditor.prototype.onbeforeunload=function(n){n.returnValue="The article will remain locked if you close the editor without switching to View mode. All unsaved changes will also be lost..";n.preventDefault()};ArticleEditor.prototype.executeCommand=function(n,t){switch(n){case"more":break;case"todo":this.showPopupWindowForElement("wndToDo",!0);break;case"menuItemPublishArticle":case"menuItemPublishMultiple":case"menuItemPublishProject":case"menuItemDownloadTransMultiple":if(this.onTocCommandRequested){var i=hashHandler.getHashObj();this.onTocCommandRequested(this,{commandId:n,param:{projectExtId:i.projectId,externalId:i.externalId}})}break;case"menuItemUpdateAutoDocs":t&&t.mountPointNodeId?this.showUpdateAutoDocsDialog(t.mountPointNodeId,"MountPointTocNode"):this.showUpdateAutoDocsDialog(this.getArticleId(),"Article");break;case"startDownloadTrans":window[this.transEditorName].executeCommand(n,t);break;default:if(this.onBtnPropertiesClick)this.onBtnPropertiesClick(this,{internalId:window[this.stateName].Get("internalId"),pageName:n})}};ArticleEditor.prototype.clearState=function(){window[this.stateName].Clear()};
function PrecompiledElement(n){this.elHashCode=n.elHashCode;this.curEls=[_$("#"+n.lblHtmlName)]}PrecompiledElement.prototype.onArticlePropertyChanged=function(n,t){var r=[],f,u,e,i;if(t.articleObj&&t.articleObj.precompiledElements&&t.articleObj.precompiledElements[this.elHashCode])for(f=t.articleObj.precompiledElements[this.elHashCode],u=document.createElement("div"),u.innerHTML=f,i=0;i<u.childNodes.length;i++)r.push(u.childNodes[i]);for(r.length||(r=[document.createElement("span")]),e=this.curEls[0].parentNode,i=0;i<r.length;i++)e.insertBefore(r[i],this.curEls[0]);for(i=0;i<this.curEls.length;i++)this.curEls[i].parentNode.removeChild(this.curEls[i]);this.curEls=r};
function UpdatedOn(n){this.lblModifiedOnValueName=n.lblModifiedOnValueName;this.pnlContainerName=n.pnlContainerName}UpdatedOn.prototype.onArticlePropertyChanged=function(n,t){if(t.articleObj){var i=_$("#"+this.lblModifiedOnValueName);i.innerHTML=t.articleObj.modifiedOnHtml;i.title=t.articleObj.modifiedOnToolTip}_$("#"+this.pnlContainerName).style.display=!t.articleObj?"none":""};
function TimeToRead(n){this.lblValueName=n.lblValueName;this.pnlContainerName=n.pnlContainerName;this.nMinReadMask=n.nMinReadMask}TimeToRead.prototype.onArticlePropertyChanged=function(n,t){if(t.articleObj){var i=_$("#"+this.lblValueName);i.innerHTML=this.nMinReadMask.replace("{{MIN}}",Math.ceil(t.articleObj.timeToRead/60))}_$("#"+this.pnlContainerName).style.display=!t.articleObj?"none":""};
function ArticleTitle(n){this.lblTitleName=n.lblTitleName}ArticleTitle.prototype.onArticlePropertyChanged=function(n,t){var i=_$("#"+this.lblTitleName);t.articleObj&&(i.innerHTML=escapeMarkup(t.articleObj.title?t.articleObj.title:t.articleObj.pageTitle?t.articleObj.pageTitle:""));i.style.display=t.articleObj?"":"none"};
function ButtonArticleLink(n){this.btnArticleLinkName=n.btnArticleLinkName;this.pnlArticleLinkDropdownName=n.pnlArticleLinkDropdownName;this.copiedToClipboardText=n.copiedToClipboardText;this.btnArticleLinkDropdownCloseName=n.btnArticleLinkDropdownCloseName;this.edtArticleLinkInPubName=n.edtArticleLinkInPubName;this.edtSmartLinkName=n.edtSmartLinkName;this.cmbArticleLinkPubName=n.cmbArticleLinkPubName;this.pnlArticleLinkForAuthorsName=n.pnlArticleLinkForAuthorsName;this.lblSmartLinkName=n.lblSmartLinkName;this.directLinkToTopicHtml=n.directLinkToTopicHtml;this.smartLinkToTopicHtml=n.smartLinkToTopicHtml;this.edtArticleLinkAriaLabel=n.edtArticleLinkAriaLabel;this.popupArticleLink=new PopupWindow({wnd:_$("#"+this.pnlArticleLinkDropdownName),btnClose:_$("#"+this.btnArticleLinkDropdownCloseName),target:_$("#"+this.btnArticleLinkName),position:"bottom",showAction:"click",hideAction:"click",isEffectAppear:!0,isEffectExpand:!0,isAddShadow:!0,isRenderBeak:!0})}ButtonArticleLink.prototype.onArticleLinkClick=function(n){n.GetText()&&(n.SelectAll(),copyToClipboard(n.GetText())&&(this.popupArticleLink.hide(),showNotification(this.copiedToClipboardText,!1,!1,!0,2e3)))};ButtonArticleLink.prototype.edtLinkInit=function(n){var t=n.GetInputElement(),i=this;t.setAttribute("aria-label",this.edtArticleLinkAriaLabel);appendEventHandler(t,"click",function(){i.onArticleLinkClick(n,{})})};ButtonArticleLink.prototype.onClick=function(){GlobalEvents.trigger("ArticleLink",this,{})};ButtonArticleLink.prototype.updateArticleUrlInPub=function(n){window[this.edtArticleLinkInPubName]&&window[this.edtArticleLinkInPubName].GetMainElement()&&window[this.edtArticleLinkInPubName].SetText(n?this.curArticleUrlInPubMask.replace("{0}",n):"")};ButtonArticleLink.prototype.onArticleLinkPubSelected=function(n,t){t.projectNode&&this.updateArticleUrlInPub(t.projectNode.vals.externalId)};ButtonArticleLink.prototype.onArticlePropertyChanged=function(n,t){_$("#"+this.btnArticleLinkName).style.display=!t.articleObj?"none":"";_$("#"+this.pnlArticleLinkForAuthorsName)&&(_$("#"+this.pnlArticleLinkForAuthorsName).style.display=t.articleObj&&!t.articleObj.isInPublication?"":"none");_$("#"+this.lblSmartLinkName).innerHTML=t.articleObj&&t.articleObj.isInPublication?this.directLinkToTopicHtml:this.smartLinkToTopicHtml;window[this.edtSmartLinkName].SetText(t.articleObj?t.articleObj.curArticleLink:"");this.curArticleUrlInPubMask=t.articleObj?t.articleObj.curArticleUrlInPubMask:null;t.articleObj&&t.articleObj.propsForInternalUsers&&window[this.cmbArticleLinkPubName]&&(window[this.cmbArticleLinkPubName].setFilterByProjectId(t.articleObj.propsForInternalUsers.projectId),window[this.cmbArticleLinkPubName].setProjectId(t.articleObj.propsForInternalUsers.projectLatestPublicationId),this.updateArticleUrlInPub(window[this.cmbArticleLinkPubName].getProjectExtId()))};
function ButtonPrint(n){this.btnName=n.btnName}ButtonPrint.prototype.onClick=function(){GlobalEvents.trigger("ArticlePrint",this,{})};ButtonPrint.prototype.onArticlePropertyChanged=function(n,t){var i=_$("#"+this.btnName);i&&(i.style.display=!t.articleObj?"none":"")};
function ButtonRemoveHighlight(n){this.btnName=n.btnName}ButtonRemoveHighlight.prototype.onClick=function(){GlobalEvents.trigger("ArticleRemoveHighlight",this,{})};ButtonRemoveHighlight.prototype.onArticlePropertyChanged=function(){};ButtonRemoveHighlight.prototype.onArticleHighlighted=function(n,t){var i=_$("#"+this.btnName);i&&(i.style.display=t.isHighlighted?"":"none")};
function HashHandler(n,t,i){this.syntaxType=n;this.syntaxInfo=t;this.oldHash=window.location.hash;var r=this;this.removeHandler=appendEventHandler(window,"hashchange",function(){r.handleHash()},!0);typeof hashHandlerInstanceOnThisPage!="undefined"&&hashHandlerInstanceOnThisPage.stopListening();hashHandlerInstanceOnThisPage=this;i&&(this.oldHash=null,setTimeout(function(){r.handleHash()},0))}HashHandler.prototype.stopListening=function(){this.removeHandler()};HashHandler.prototype.triggerHashChanged=function(){this.oldHash=null;this.handleHash()};HashHandler.prototype.handleHash=function(){if(window.location.hash==this.oldHash)return!1;var n={changedParts:[],handled:!0},i=this.strToObj(window.location.hash),t=this.strToObj(this.oldHash);switch(this.syntaxType){case"ArticleEditorPage":t==null?n.changedParts=["anchor","reviewCommentId","transUnitId","searchQuery","mainPart","externalId","isEditing","projectId"]:(i.externalId!=t.externalId&&n.changedParts.push("externalId"),i.isEditing!=t.isEditing&&n.changedParts.push("isEditing"),i.projectId!=t.projectId&&n.changedParts.push("projectId"),isIgnoreCaseEqual(t.anchor,i.anchor)||n.changedParts.push("anchor"),i.searchQuery!=t.searchQuery&&n.changedParts.push("searchQuery"),i.reviewCommentId!=t.reviewCommentId&&n.changedParts.push("reviewCommentId"),isIgnoreCaseEqual(i.transUnitId,t.transUnitId)||n.changedParts.push("transUnitId"),i.mainPart!=t.mainPart&&n.changedParts.push("mainPart"));break;case"WebHelpPage":t==null?n.changedParts=["anchor","externalId"]:(i.externalId!=t.externalId&&n.changedParts.push("externalId"),isIgnoreCaseEqual(t.anchor,i.anchor)||n.changedParts.push("anchor"));break;case"SearchPage":t==null?n.changedParts=["searchQuery","projectId"]:(i.searchQuery!=t.searchQuery&&n.changedParts.push("searchQuery"),i.projectId!=t.projectId&&n.changedParts.push("projectId"));break;case"VirtualFileEditorPage":t==null?n.changedParts=["fileName"]:isIgnoreCaseEqual(t.fileName,i.fileName)||n.changedParts.push("fileName");break;case"LogViewerPage":t==null?n.changedParts=["fileName"]:isIgnoreCaseEqual(t.fileName,i.fileName)||n.changedParts.push("fileName");break;case"VersionsViewerPage":t==null?n.changedParts=["entityId1Parts","entityId2Parts","versionId1","versionId2"]:(isIgnoreCaseEqual(t.entityId1,i.entityId1)||n.changedParts.push("entityId1Parts"),isIgnoreCaseEqual(t.entityId2,i.entityId2)||n.changedParts.push("entityId2Parts"),i.versionId1!=t.versionId1&&n.changedParts.push("versionId1"),i.versionId2!=t.versionId2&&n.changedParts.push("versionId2"));break;case"ProjectReportsPage":t==null?n.changedParts=["start","end","range"]:(t.start!=i.start&&n.changedParts.push("start"),t.end!=i.end&&n.changedParts.push("end"),t.range!=i.range&&n.changedParts.push("range"));break;default:throw"The hash syntax type is not supported!";}if(this.onHashChanged){n.oldObj=t;n.newObj=i;try{this.onHashChanged.call(this,this,n)}catch(r){n.handled=!0;console.warn(r)}}return n.handled&&(this.oldHash=window.location.hash),!0};HashHandler.prototype.strToObj=function(n){var t={},h,c,s,u,l,a,v,f,o,e,i,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,r;if(!n||n==""||n=="#")return null;switch(this.syntaxType){case"ArticleEditorPage":if(h=this.syntaxInfo.isEditingMarker,t.isEditing=n.indexOf(h)>-1,n=n.replace(new RegExp("#!","g"),""),c=new RegExp("^[^/]+/[^/]+").exec(n),t.mainPart=c!=null?c[0]:null,t.mainPart)for(s=t.mainPart.split("/"),u=0;u<s.length;u++)t.projectId?t.externalId=decodeURI(s[u].replace(h,"")):t.projectId=s[u];var f="/"+this.syntaxInfo.anchorMarker+"/",et="/"+this.syntaxInfo.reviewCommentIdMarker+"/",ot="/"+this.syntaxInfo.transUnitIdMarker+"/",e="/"+this.syntaxInfo.searchQueryMarker+"/",o=new RegExp(f+"[^?/]+").exec(n);t.anchor=o!=null?decodeURI(o[0].replace(f,"")):null;l=new RegExp(et+"[^?/]+").exec(n);t.reviewCommentId=l!=null?l[0].replace(et,""):null;a=new RegExp(ot+"[^?/]+").exec(n);t.transUnitId=a!=null?a[0].replace(ot,""):null;i=new RegExp(e+"[^?/]+").exec(n);t.searchQuery=i!=null?i[0].replace(e,""):null;break;case"WebHelpPage":n=n.replace(new RegExp("#","g"),"");v=new RegExp("^[^/]+").exec(n);t.externalId=v!=null?v[0]:null;f="/"+this.syntaxInfo.anchorMarker+"/";o=new RegExp(f+"[^?/]+").exec(n);t.anchor=o!=null?o[0].replace(f,""):null;break;case"SearchPage":e="#"+this.syntaxInfo.searchQueryMarker+"/";i=new RegExp(e+"[^?/]+").exec(n);t.searchQuery=i!=null?i[0].replace(e,""):null;y="/"+this.syntaxInfo.projectIdMarker+"/";p=new RegExp(y+"[^?/]+").exec(n);t.projectId=p!=null?p[0].replace(y,""):null;break;case"LogViewerPage":case"VirtualFileEditorPage":t.fileName=n.replace("#","");break;case"VersionsViewerPage":n=n.replace(new RegExp("#","g"),"");w=new RegExp("^[^/]+").exec(n);t.entityId1=w!=null?w[0]:null;t.entityId1Parts=t.entityId1?t.entityId1.split(this.syntaxInfo.idSeparator):[];b="/"+this.syntaxInfo.id2Marker+"/";k=new RegExp(b+"[^?/]+").exec(n);t.entityId2=k!=null?k[0].replace(b,""):null;t.entityId2Parts=t.entityId2?t.entityId2.split(this.syntaxInfo.idSeparator):[];d="/"+this.syntaxInfo.v1Marker+"/";g=new RegExp(d+"[^?/]+").exec(n);t.versionId1=g!=null?g[0].replace(d,""):null;nt="/"+this.syntaxInfo.v2Marker+"/";tt=new RegExp(nt+"[^?/]+").exec(n);t.versionId2=tt!=null?tt[0].replace(nt,""):null;break;case"ProjectReportsPage":if(n=n.replace(new RegExp("#","g"),""),t.start=null,it="/"+this.syntaxInfo.startMarker+"/",rt=new RegExp(it+"[^?/]+").exec(n),rt!=null){let n=rt[0].replace(it,"").split("-");t.start=new Date(n[0],n[1]-1,n[2])}if(t.end=null,ut="/"+this.syntaxInfo.endMarker+"/",r=new RegExp(ut+"[^?/]+").exec(n),r!=null){let n=r[0].replace(ut,"").split("-");t.end=new Date(n[0],n[1]-1,n[2])}ft="/"+this.syntaxInfo.rangeMarker+"/";r=new RegExp(ft+"[^?/]+").exec(n);t.range=r!=null?parseInt(r[0].replace(ft,"")):null;break;default:throw"The hash syntax type is not supported!";}return t};HashHandler.prototype.objToStr=function(n){var t="#";switch(this.syntaxType){case"ArticleEditorPage":t+="!";t+=n.projectId+"/";t+=n.isEditing?this.syntaxInfo.isEditingMarker:"";t+=n.externalId;t+=n.anchor?"/"+this.syntaxInfo.anchorMarker+"/"+n.anchor:"";t+=n.reviewCommentId?"/"+this.syntaxInfo.reviewCommentIdMarker+"/"+n.reviewCommentId:"";t+=n.transUnitId?"/"+this.syntaxInfo.transUnitIdMarker+"/"+n.transUnitId:"";t+=n.searchQuery?"/"+this.syntaxInfo.searchQueryMarker+"/"+n.searchQuery:"";break;case"WebHelpPage":t+=n.externalId;t+=n.anchor?"/"+this.syntaxInfo.anchorMarker+"/"+n.anchor:"";break;case"SearchPage":n.searchQuery&&(t+=this.syntaxInfo.searchQueryMarker+"/",t+=n.searchQuery);n.projectId&&(t+="/"+this.syntaxInfo.projectIdMarker+"/",t+=n.projectId);break;case"LogViewerPage":case"VirtualFileEditorPage":t+=n.fileName;break;case"VersionsViewerPage":t+=n.entityId1Parts.join(this.syntaxInfo.idSeparator);t+=n.versionId1?"/"+this.syntaxInfo.v1Marker+"/"+n.versionId1:"";t+=n.entityId2Parts&&n.entityId2Parts.length>0?"/"+this.syntaxInfo.id2Marker+"/"+n.entityId2Parts.join(this.syntaxInfo.idSeparator):"";t+=n.versionId2?"/"+this.syntaxInfo.v2Marker+"/"+n.versionId2:"";break;case"ProjectReportsPage":function i(n){return n.getFullYear()+"-"+("00"+(n.getMonth()+1)).substr(-2)+"-"+("00"+n.getDate()).substr(-2)}n.range?(t+="/"+this.syntaxInfo.rangeMarker+"/",t+=n.range):n.start&&n.end&&(t+="/"+this.syntaxInfo.startMarker+"/",t+=i(n.start),t+="/"+this.syntaxInfo.endMarker+"/",t+=i(n.end));break;default:throw"The hash syntax type is not supported!";}return t};HashHandler.prototype.getHashObj=function(){return this.strToObj(window.location.hash)};HashHandler.prototype.setHash=function(n){var t=!isIgnoreCaseEqual(window.location.hash?decodeURI(window.location.hash.replace("#","")):null,decodeURI(n));return window.location.hash=n,t};HashHandler.prototype.setHashObj=function(n){var t=this.objToStr(n),i=!isIgnoreCaseEqual(window.location.hash,t);return window.location.hash=t,i};
function SearchPopupComplex(n){var i,t;this.pnlSearchPopupName=n.pnlSearchPopupName;this.searchControlName=n.searchControlName;i={wnd:document.getElementById(this.pnlSearchPopupName),position:"center",showAction:"none",hideAction:"escape",isEffectAppear:!0,isEffectExpand:!1,isAddShadow:!1,isModal:!0};this.popupSearch=new PopupWindow(i);t=this;this.popupSearch.onShown=function(n,i){t.onPopupSearchShown(n,i)};this.popupSearch.onHiding=function(n,i){t.onPopupSearchHiding(n,i)}}SearchPopupComplex.prototype.onPopupSearchShown=function(){window[this.searchControlName].focus()};SearchPopupComplex.prototype.onSearchResultClick=function(){this.closePopup()};SearchPopupComplex.prototype.onPopupSearchHiding=function(){CssHandler.removeElClass(document.documentElement,"noscrollBody");window[this.searchControlName].clear()};SearchPopupComplex.prototype.openPopup=function(){this.popupSearch.show();CssHandler.switchElClass(document.documentElement,"noscrollBody",!0)};SearchPopupComplex.prototype.onBtnCloseClick=function(){this.closePopup()};SearchPopupComplex.prototype.closePopup=function(){this.popupSearch.hide()};
function SearchControl(n){this.stateName=n.stateName;this.pnlCallbackName=n.pnlCallbackName;this.searchBoxName=n.searchBoxName;this.treeSuggestedSearchName=n.treeSuggestedSearchName;this.pnlContainerName=n.pnlContainerName;this.edtProjectsName=n.edtProjectsName;this.searchResultsTextMask=n.searchResultsTextMask;this.searchResultsTextNoQuery=n.searchResultsTextNoQuery;this.isPopupMode=n.isPopupMode;this.titleName=n.titleName;this.frameFeaturedSnippetName=n.frameFeaturedSnippetName;this.featuredSnippetMaxHeight=n.featuredSnippetMaxHeight;this.pnlFrameFeaturedSnippetContainerName=n.pnlFrameFeaturedSnippetContainerName;this.searchQueryIdMarker=n.searchQueryIdMarker;this.internalSourceName=n.internalSourceName;this.progressLineName=n.progressLineName;this.pnlSearchBoxName=n.pnlSearchBoxName;this.pnlFilterByName=n.pnlFilterByName;var t=this;window.addEventListener("beforeunload",function(){t.sendScheduledStatsRequest()})}SearchControl.prototype.adjustProgressLine=function(){var r=CssHandler.getIsElHasClass(document.documentElement,"mobileView"),u=_$("#"+this.pnlSearchBoxName),n=u.getBoundingClientRect(),i=document.documentElement.offsetWidth-n.right,t;r||(t=_$("#"+this.pnlFilterByName),t&&t.getBoundingClientRect().width>0&&(i=document.documentElement.offsetWidth-t.getBoundingClientRect().right));window[this.progressLineName].setPosition({top:n.top+n.height,left:n.left,right:i})};SearchControl.prototype.scheduleStatsRequest=function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=null);var n=this;this.timerId=setTimeout(function(){n.sendScheduledStatsRequest()},2e3)};SearchControl.prototype.sendScheduledStatsRequest=function(){var n=this,t;n.requestBodyObj&&(t=JSON.parse(n.requestBodyObj),t.searchQuery&&sendRequest("POST","/stats/fts-queries/",t,!0,function(t){n.onActionReported(t)}),n.requestBodyObj=null)};SearchControl.prototype.onActionReported=function(n){var t,r,i;if(n.status!=202){if(n.status>=400){console.error("Stats service API call failed. The response code is "+n.status+", see response text below.");console.error(n.responseText);return}if(t=isNaN(n.responseText)?null:n.responseText,window[this.stateName].Set("curStatEventId",t),t)for(r=_$$("#"+this.pnlContainerName+" .SearchControl_itemSearchRes[data-source-name='"+this.internalSourceName+"']  .SearchControl_searchResultLink"),i=0;i<r.length;i++)r[i].href+="/"+this.searchQueryIdMarker+"/"+t;GlobalEvents.trigger("SearchReported",this,this.getSearchParams())}};SearchControl.prototype.focus=function(){window[this.searchBoxName].focus()};SearchControl.prototype.searchResultOnClick=function(){if(this.onSearchResultClick)this.onSearchResultClick(this,{})};SearchControl.prototype.setProjectExtId=function(n,t){this.isProjectIdSyncing=t;window[this.edtProjectsName].setProjectExtId(n?n:"-2");this.isProjectIdSyncing=!1};SearchControl.prototype.getProjectExtId=function(){return window[this.edtProjectsName].getProjectExtId()};SearchControl.prototype.setQuery=function(n){window[this.searchBoxName].setQuery(n)};SearchControl.prototype.clear=function(){this.setQuery("");this.search()};SearchControl.prototype.search=function(){var n=this.getSearchParams();this.isPopupMode||(document.title=n.q?this.searchResultsTextMask.replace("{0}",n.q):this.searchResultsTextNoQuery);this.performCallback(n.q?n.q:"",n.projectExtId,this.isDelayedReport?"SearchReportDelayed":"SearchReportImmediately");this.isDelayedReport||GlobalEvents.trigger("SearchReported",this,this.getSearchParams());this.isDelayedReport=null};SearchControl.prototype.onGlobalDoSearch=function(n,t){t.targetControl==this&&(this.setQuery(t.q),this.setProjectExtId(t.projectExtId,!0),this.search())};SearchControl.prototype.trySearching=function(n){var t=this.getSearchParams();if(!t.q){this.clear();return}t.isCancel=!1;GlobalEvents.trigger("Searching",this,t);this.setProjectExtId(t.projectExtId,!0);this.isDelayedReport=n;t.isCancel||this.search()};SearchControl.prototype.onSearchBoxDoSearch=function(n,t){this.trySearching(t.isTriggeredByTimer)};SearchControl.prototype.onSuggestedSearchNodeClick=function(n,t){t.node&&(this.setQuery(t.node.t),this.trySearching())};SearchControl.prototype.onProjectSelected=function(){this.isProjectIdSyncing||this.trySearching()};SearchControl.prototype.getSearchParams=function(){var n=window[this.searchBoxName].getQuery();return{q:n?n:"",projectExtId:this.getProjectExtId()}};SearchControl.prototype.onSearchBoxLostFocus=function(){this.sendScheduledStatsRequest()};SearchControl.prototype.onCmbSortResultsByValueChanged=function(){var n=this.getSearchParams();this.performCallback(n.q,n.projectExtId,"ChangeSortOrder")};SearchControl.prototype.prepareTreeContainer=function(n){var t=_$("#"+n),i=document.createElement("div"),r;i.id=t.id;i.className=t.className;r=t.parentNode;r.removeChild(t);r.appendChild(i)};SearchControl.prototype.onShowAll=function(){var n=this.getSearchParams();this.performCallback(n.q,n.projectExtId,"ShowAll")};SearchControl.prototype.onSearchBoxClick=function(){this.focus()};SearchControl.prototype.performCallback=function(n,t,i){this.adjustProgressLine();window[this.pnlCallbackName].PerformCallback(n+"\t"+t+"\t"+i)};SearchControl.prototype.onCallbackEnd=function(){var n,t,i;if(this.requestBodyObj=window[this.pnlCallbackName].cpRequestBodyObj,window[this.pnlCallbackName].cpRequestBodyObj=null,window[this.titleName].innerHTML=window[this.pnlCallbackName].cpTitleHtml,window[this.pnlCallbackName].cpTitleHtml=null,n=_$("#"+this.pnlContainerName),CssHandler.switchElClass(n,"SearchControl_suggestedSearchContainerWithoutResults",!window[this.pnlCallbackName].cpIsHasSuggestedSearchItems),window[this.pnlCallbackName].cpIsHasSuggestedSearchItems=null,t=_$("#"+this.frameFeaturedSnippetName),t&&(i=this,appendEventHandler(_$("#"+this.frameFeaturedSnippetName),"load",function(){i.onFeaturedSnippetLoad()})),this.scheduleStatsRequest(),this.onEndCallback)this.onEndCallback(this,{})};SearchControl.prototype.onFeaturedSnippetLoad=function(){var t=_$("#"+this.frameFeaturedSnippetName),n=t.contentDocument?t.contentDocument:t.contentWindow.document,i=n.documentElement.offsetHeight;t.style.height=Math.min(i,this.featuredSnippetMaxHeight)+"px";n.documentElement.style.overflow="hidden";n.documentElement.style["overflow-wrap"]="break-word";n.documentElement.style.cursor="pointer";n.documentElement.style["-moz-user-select"]="none";n.documentElement.style["-khtml-user-select"]="none";n.documentElement.style["user-select"]="none";appendEventHandler(n.documentElement,"click",function(){t.parentElement.click()});CssHandler.switchElClass(_$("#"+this.pnlFrameFeaturedSnippetContainerName),"SearchControl_pnlFrameFeaturedSnippetContainerWithOverflow",i>this.featuredSnippetMaxHeight)};
function ProjectsTreeDropdown(n){this.editorName=n.editorName;this.projectsTreeName=n.projectsTreeName;this.pnlWidthTesterName=n.pnlWidthTesterName;this.editorAriaLabel=n.editorAriaLabel;this.nSelectedText=n.nSelectedText;this.isUseDynamicWidthCalculation=n.isUseDynamicWidthCalculation=="1"?!0:!1;this.adjustControl()}ProjectsTreeDropdown.prototype.onChangingFocusedProject=function(n,t){if(this.isSelector||(window[this.editorName].SetValue(t.newProjectNode?t.newProjectNode.t:null),window[this.editorName].HideDropDown()),this.onFocusedProjectChanging)this.onFocusedProjectChanging(this,{projectNode:t.newProjectNode});this.isSelector||window[this.projectsTreeName].setSelectedProjectIds(t.newProjectNode?[t.newProjectNode.id]:[]);!window[this.editorName].GetIsValid()&&t.newProjectNode&&this.validate();this.adjustControl()};ProjectsTreeDropdown.prototype.onChangedFocusedProject=function(n,t){if(this.onFocusedProjectChanged)this.onFocusedProjectChanged(this,{projectNode:t.newProjectNode,focusedNode:t.focusedNode})};ProjectsTreeDropdown.prototype.onChangedSelectedProjects=function(n,t){var i=window[this.projectsTreeName].getSelectedProjectIds().length;if(window[this.editorName].SetValue(i?this.nSelectedText.replace("{0}",i):""),this.onSelectedProjectsChanged)this.onSelectedProjectsChanged(this,t);this.isSelector=!0};ProjectsTreeDropdown.prototype.onProjectAuxClick=function(n,t){if(this.onProjAuxClick)this.onProjAuxClick(this,t)};ProjectsTreeDropdown.prototype.onLanguageChanged=function(n,t){if(this.onLangChanged)this.onLangChanged(this,t)};ProjectsTreeDropdown.prototype.onEditorInit=function(n){n.GetInputElement().setAttribute("aria-label",this.editorAriaLabel)};ProjectsTreeDropdown.prototype.onEditorKeyDown=function(n,t){(t.htmlEvent.keyCode==13||t.htmlEvent.keyCode==32)&&window[this.editorName].ShowDropDown()};ProjectsTreeDropdown.prototype.getSelectedLangCode=function(){return window[this.projectsTreeName].getSelectedLangCode()};ProjectsTreeDropdown.prototype.getProjectNode=function(n){return window[this.projectsTreeName].getProjectNode(n)};ProjectsTreeDropdown.prototype.setProjectNode=function(n){window[this.projectsTreeName].setProjectNode(n)};ProjectsTreeDropdown.prototype.getProjectId=function(){return window[this.projectsTreeName].getProjectId()};ProjectsTreeDropdown.prototype.setProjectId=function(n){var t=window[this.projectsTreeName].setFocusedProjectNode(n);window[this.editorName].SetValue(t?t.t:null)};ProjectsTreeDropdown.prototype.getProjectExtId=function(){return window[this.projectsTreeName].getProjectExtId()};ProjectsTreeDropdown.prototype.setProjectExtId=function(n){var t=window[this.projectsTreeName].setProjectExtId(n);window[this.editorName].SetValue(t?t.t:null)};ProjectsTreeDropdown.prototype.getProjectExtId=function(){return window[this.projectsTreeName].getProjectExtId()};ProjectsTreeDropdown.prototype.validate=function(){return window[this.editorName].Validate(),window[this.editorName].GetIsValid()};ProjectsTreeDropdown.prototype.setFilterByProjectId=function(n){window[this.projectsTreeName].setFilterByProjectId(n);var t=window[this.projectsTreeName].getProjectNode(this.getProjectId());window[this.editorName].SetValue(t?t.t:null)};ProjectsTreeDropdown.prototype.getIsPublication=function(){return window[this.projectsTreeName].getIsPublication()};ProjectsTreeDropdown.prototype.adjustControl=function(){var t,f,o,s;if(this.isUseDynamicWidthCalculation){var r=window[this.editorName].GetInputElement(),i=window[this.editorName].GetMainElement(),h=i.style.display,u=window.getComputedStyle(r),n=_$("#"+this.pnlWidthTesterName),e=i.offsetWidth-getClientWidth(r);n.style.fontSize=u.fontSize;n.style.fontFamily=u.fontFamily;n.style.textTransform=u.textTransform;n.style.paddingRight=e+"px";n.innerHTML=escapeMarkup(r.value);n.style.display="block";i.style.display="none";t=getClientWidth(n.parentNode);f=Math.max(0,t-n.offsetWidth-1);t-=f;f==0&&t++;o=n.offsetWidth+1;n.style.display="none";i.style.display=h;s=o+e;window[this.editorName].SetWidth(Math.min(t,s))}};
function ProjectsTree(n){this.treeControlName=n.treeControlName;this.languageSelectorName=n.languageSelectorName;this.pnlFilterBoxName=n.pnlFilterBoxName;this.edtFilterName=n.edtFilterName;this.langSelectedCssClass=n.langSelectedCssClass;this.filterBoxFocusedCssClass=n.filterBoxFocusedCssClass;this.invisibleNodeCssClass=n.invisibleNodeCssClass;this.nodeWithInvisibleChildrenCssClass=n.nodeWithInvisibleChildrenCssClass}ProjectsTree.prototype.getProjectExtId=function(){var n=window[this.treeControlName].getFocusedNodeId();return n?this.getProjectNode(n).vals.externalId:null};ProjectsTree.prototype.setProjectExtId=function(n){var t=window[this.treeControlName].getNodeByVal("externalId",n);return this.setFocusedProjectNode(t?t.id:null),t};ProjectsTree.prototype.setReadOnly=function(n){window[this.pnlFilterBoxName]&&(window[this.pnlFilterBoxName].style.display=n?"none":"");window[this.languageSelectorName]&&window[this.languageSelectorName].setVisible(!n);window[this.treeControlName].setReadOnly(n)};ProjectsTree.prototype.getProjectId=function(){var n=window[this.treeControlName].getFocusedNodeId();return n?parseInt(n):null};ProjectsTree.prototype.getProjectNode=function(n){return window[this.treeControlName].getNode(n)};ProjectsTree.prototype.setProjectNode=function(n,t){window[this.treeControlName].setNode(n,t)};ProjectsTree.prototype.setFocusedProjectNode=function(n){return window[this.treeControlName].setFocusedNode(n),window[this.treeControlName].getNode(window[this.treeControlName].getFocusedNodeId())};ProjectsTree.prototype.getSelectedProjectIds=function(n){return window[this.treeControlName].getSelectedNodeIds(n)};ProjectsTree.prototype.setSelectedProjectIds=function(n){window[this.treeControlName].setSelectedNodeIds(n)};ProjectsTree.prototype.setFilterByProjectId=function(n){this.filterByProjectId=n;this.syncFilter()};ProjectsTree.prototype.getSelectedLangCode=function(){return window[this.languageSelectorName].getSelectedLangCode()};ProjectsTree.prototype.getIsPublication=function(){var n=window[this.treeControlName].getFocusedNodeId();return n?this.getProjectNode(n).vals.isPublication:null};ProjectsTree.prototype.syncCssClasses=function(n,t,i){function v(n,t,i){if(n){var r=i;do r=t.getNode(r.parentId),r&&(r.isHidden=!1,f(r,!0),s(r,!0));while(r)}}function f(n,t){n.vals._containerCustomCssClass=t?CssHandler.removeClass(n.vals._containerCustomCssClass,h.invisibleNodeCssClass):CssHandler.addClass(n.vals._containerCustomCssClass,h.invisibleNodeCssClass)}function s(n,t){n.c.length>0&&(n.vals._containerCustomCssClass=t?CssHandler.removeClass(n.vals._containerCustomCssClass,h.nodeWithInvisibleChildrenCssClass):CssHandler.addClass(n.vals._containerCustomCssClass,h.nodeWithInvisibleChildrenCssClass))}var h=this,l=window[this.treeControlName],e,c,a,r,u,o;if(CssHandler.switchElClass(_$("#"+l.containerId),this.langSelectedCssClass,i!=null),r=n.vals.multiLang||!i||isIgnoreCaseEqual(n.vals.langCode,i)&&!n.vals._isNoFocus,t&&n){for(e=n.c.length,u=0;u<n.c.length;u++)o=n.c[u],c=r&&o.t.toLowerCase().includes(t),e=c?e:e-1,f(o,c);a=r&&n.t.toLowerCase().includes(t);r=a||e>0;f(n,r);s(n,r&&e>0)}if(!t&&n&&r){for(u=0;u<n.c.length;u++)o=n.c[u],f(o,r);f(n,r);s(n,r)}else!t&&n&&(f(n,r),s(n,r));return v(r,l,n),r};ProjectsTree.prototype.syncFilter=function(){var n=window[this.languageSelectorName]?window[this.languageSelectorName].getSelectedLangCode():null,r=window[this.edtFilterName]?window[this.edtFilterName].getFilterText():null,t=window[this.treeControlName],i=this;if(t.applyFilter(function(t){var u;return r?i.syncCssClasses(t,r.toLowerCase(),n):i.syncCssClasses(t,null,n)}),this.onLanguageChanged)this.onLanguageChanged(this,{newLang:n});this.filterByProjectId&&t.applyFilter(function(n){var u=!n.isHidden&&n.vals&&n.vals.isPublication=="true",r;if(u){r=n;do if(r=t.getNode(r.parentId),r.vals&&r.vals.isPublication=="false"&&!r.vals._isNoFocus)break;while(r.parentId);return r.id==""||r.id==i.filterByProjectId}return!1})};ProjectsTree.prototype.onNodeSelecting=function(n,t){if(this.onSelectedProjectsChanging){t.projectNode=window[this.treeControlName].getNode(t.nodeId);this.onSelectedProjectsChanging(n,t)}};ProjectsTree.prototype.onNodeSelected=function(n,t){if(this.onSelectedProjectsChanged)this.onSelectedProjectsChanged(n,t)};ProjectsTree.prototype.onFocusedNodeChanging=function(n,t){if(this.onFocusedProjectChanging)this.onFocusedProjectChanging(n,{newProjectNode:window[this.treeControlName].getNode(t.newId),oldProjectNode:window[this.treeControlName].getNode(t.oldId)})};ProjectsTree.prototype.onFocusedNodeChanged=function(n){if(this.onFocusedProjectChanged)this.onFocusedProjectChanged(n,{focusedNode:n.nodes[n.focusedNodeId]})};ProjectsTree.prototype.onNodeDblClick=function(n,t){if(this.onProjectDblClick)this.onProjectDblClick(n,{projectNode:window[this.treeControlName].getNode(t.nodeId)})};ProjectsTree.prototype.onNodeAuxClick=function(n,t){if(this.onProjectAuxClick)this.onProjectAuxClick(n,{htmlEvent:t.htmlEvent,projectNode:window[this.treeControlName].getNode(t.nodeId)})};ProjectsTree.prototype.onLanguageFilterChanged=function(){this.syncFilter()};ProjectsTree.prototype.onEdtFilterChanged=function(n,t){if(!!t.filter){var i=window[this.treeControlName];i.opts.expandLevels=-1}this.syncFilter()};ProjectsTree.prototype.onEdtGotFocus=function(){CssHandler.addElClass(_$("#"+this.pnlFilterBoxName),this.filterBoxFocusedCssClass)};ProjectsTree.prototype.onEdtLostFocus=function(){CssHandler.removeElClass(_$("#"+this.pnlFilterBoxName),this.filterBoxFocusedCssClass)};
function AnswerGeniusButton(){};
